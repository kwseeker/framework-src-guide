<mxfile host="Electron" modified="2023-12-22T11:25:22.581Z" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.6.5 Chrome/114.0.5735.243 Electron/25.3.1 Safari/537.36" etag="DRXvXDfPAw7ymGmEheyo" version="21.6.5" type="device" pages="2">
  <diagram name="SpringSecurityOAuth2工作流程" id="BB3JgpRIZgwQwiqXOJlF">
    <mxGraphModel dx="3088" dy="879" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="dtGfbLZROhE4GbIlcdWK-29" style="rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-44" target="dtGfbLZROhE4GbIlcdWK-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-83" style="rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-70" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="880" y="1120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-76" style="rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0;exitDx=0;exitDy=0;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-54" target="Jysl4UP8jRCQiMBeIVnq-72" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-75" style="rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-33" target="Jysl4UP8jRCQiMBeIVnq-72" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bewY3FNtBYAkQc0WHg5f-1" value="&lt;h1 style=&quot;font-size: 16px;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Spring Security OAuth2 工作流程&amp;nbsp;&lt;/font&gt;&lt;/h1&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;版本：spring-security-oauth2-autoconfigure:2.1.10.RELEASE (spring-security-oauth现在已经废弃，功能迁移到了spring-security和spring-authorization-server两个项目)&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 12px;&quot;&gt;这里只分析两种常用的模式：密码模式（通常用于统一的认证授权中心）、认证码模式（通常用于第三方授权）&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 12px;&quot;&gt;&lt;b&gt;密码模式&lt;/b&gt;：&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 12px;&quot;&gt;生产场景的密码模式交互流程举例：（详细参考第2页的涌道图）&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 12px;&quot;&gt;用户输入用户名密码请求网关服务的/login; 网关额外添加自己的client-id、client-secret（如果认证服务器不开放到外网不需要） 然后转发给认证服务器/oauth/token;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;认证服务器对client-secret以及用户密码与传参进行比对，校验成功后返回访问令牌、令牌类型、过期时间、客户端应用授权范围等信息；&lt;/div&gt;&lt;div style=&quot;&quot;&gt;后续的业务请求先由网关将AccessToken转发给认证服务进行校验，校验成功后获取用户信息再转发给后台业务服务。&lt;/div&gt;&lt;div style=&quot;font-size: 11px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 12px;&quot;&gt;&lt;b&gt;认证码模式&lt;/b&gt;：&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 12px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="40" y="20" width="960" height="180" as="geometry" />
        </mxCell>
        <mxCell id="bewY3FNtBYAkQc0WHg5f-5" value="" style="edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;rounded=1;" parent="1" source="bewY3FNtBYAkQc0WHg5f-2" target="bewY3FNtBYAkQc0WHg5f-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bewY3FNtBYAkQc0WHg5f-12" style="edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;rounded=1;" parent="1" source="bewY3FNtBYAkQc0WHg5f-2" target="bewY3FNtBYAkQc0WHg5f-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="bewY3FNtBYAkQc0WHg5f-2" target="gpTnpa3g8ZrnLY71u2b0-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bewY3FNtBYAkQc0WHg5f-2" value="OAuth2初始化" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="40" y="240" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bewY3FNtBYAkQc0WHg5f-7" style="edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;rounded=1;" parent="1" source="bewY3FNtBYAkQc0WHg5f-3" target="bewY3FNtBYAkQc0WHg5f-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bewY3FNtBYAkQc0WHg5f-3" value="认证码模式" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="40" y="2853" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ekV5xUxB1UH4FCtE4HuT-2" value="" style="edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;rounded=1;" parent="1" source="bewY3FNtBYAkQc0WHg5f-4" target="ekV5xUxB1UH4FCtE4HuT-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-53" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="bewY3FNtBYAkQc0WHg5f-4" target="Jysl4UP8jRCQiMBeIVnq-52" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bewY3FNtBYAkQc0WHg5f-4" value="OAuth2自动配置" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="240" y="240" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bewY3FNtBYAkQc0WHg5f-6" value="" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="240" y="2853" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="bewY3FNtBYAkQc0WHg5f-14" value="" style="edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;rounded=1;" parent="1" source="bewY3FNtBYAkQc0WHg5f-8" target="bewY3FNtBYAkQc0WHg5f-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bewY3FNtBYAkQc0WHg5f-8" value="客户端应用请求&lt;br&gt;认证服务器获取授权&lt;br&gt;&lt;b&gt;/oauth/token&lt;/b&gt;&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;此接口是Spring Security源码中注册的&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="240" y="2560" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-39" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="bewY3FNtBYAkQc0WHg5f-11" target="Jysl4UP8jRCQiMBeIVnq-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-42" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="bewY3FNtBYAkQc0WHg5f-11" target="Jysl4UP8jRCQiMBeIVnq-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-46" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="bewY3FNtBYAkQc0WHg5f-11" target="Jysl4UP8jRCQiMBeIVnq-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-74" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" source="bewY3FNtBYAkQc0WHg5f-11" target="Jysl4UP8jRCQiMBeIVnq-72" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bewY3FNtBYAkQc0WHg5f-11" value="自定义 OAuth2 配置" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="240" y="960" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-26" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="bewY3FNtBYAkQc0WHg5f-13" target="Jysl4UP8jRCQiMBeIVnq-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bewY3FNtBYAkQc0WHg5f-13" value="FilterChainProxy#doFilter(...)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;springSecurityFilterChain&lt;br&gt;仍然会经过安全过滤器链&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="480" y="2560" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-22" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="bewY3FNtBYAkQc0WHg5f-15" target="bewY3FNtBYAkQc0WHg5f-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="bewY3FNtBYAkQc0WHg5f-15" value="AccessToken校验&lt;br&gt;&lt;b&gt;/oauth/check_token&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;此接口是Spring Security源码中注册的&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="240" y="2660" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-2" value="" style="edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;rounded=1;" parent="1" source="ekV5xUxB1UH4FCtE4HuT-1" target="Jysl4UP8jRCQiMBeIVnq-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-4" style="edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;rounded=1;" parent="1" source="ekV5xUxB1UH4FCtE4HuT-1" target="Jysl4UP8jRCQiMBeIVnq-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-6" style="edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;rounded=1;" parent="1" source="ekV5xUxB1UH4FCtE4HuT-1" target="Jysl4UP8jRCQiMBeIVnq-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ekV5xUxB1UH4FCtE4HuT-1" value="OAuth2AutoConfiguration" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="480" y="240" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-1" target="Jysl4UP8jRCQiMBeIVnq-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-11" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-1" target="Jysl4UP8jRCQiMBeIVnq-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-16" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-1" target="Jysl4UP8jRCQiMBeIVnq-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-17" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-1" target="Jysl4UP8jRCQiMBeIVnq-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-1" value="@Import" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="720" y="240" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-3" target="Jysl4UP8jRCQiMBeIVnq-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-3" value="@Bean" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="720" y="640" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-5" target="Jysl4UP8jRCQiMBeIVnq-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-5" value="@EnableConfigurationProperties" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="720" y="560" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-7" target="Jysl4UP8jRCQiMBeIVnq-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-37" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-7" target="Jysl4UP8jRCQiMBeIVnq-35" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1180" y="270" />
              <mxPoint x="1180" y="350" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-7" value="OAuth2AuthorizationServerConfiguration" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="960" y="240" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-9" value="OAuth2MethodSecurityConfiguration" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="960" y="320" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-12" value="OAuth2ResourceServerConfiguration" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="960" y="400" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-14" value="OAuth2RestOperationsConfiguration" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="960" y="480" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-18" value="OAuth2ClientProperties" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="960" y="560" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-20" value="new ResourceServerProperties(&lt;br&gt;this.credentials.getClientId(), this.credentials.getClientSecret());" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="960" y="640" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-23" value="&lt;font color=&quot;#007fff&quot;&gt;调试发现安全过滤器链中有两个过滤器链&lt;br&gt;/oauth/token、 /oauth/token_key、&lt;br&gt;/oauth/check_token 走一条&lt;br&gt;其他请求走另外一条&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="480" y="2620" width="240" height="70" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-28" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-25" target="Jysl4UP8jRCQiMBeIVnq-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-25" value="&lt;div&gt;WebAsyncManagerIntegrationFilter&lt;/div&gt;&lt;div&gt;SecurityContextPersistenceFilter&lt;/div&gt;&lt;div&gt;HeaderWriterFilter&lt;/div&gt;&lt;div&gt;LogoutFilter&lt;/div&gt;&lt;div&gt;&lt;b&gt;BasicAuthenticationFilter&lt;/b&gt;&lt;/div&gt;&lt;div&gt;RequestCacheAwareFilter&lt;/div&gt;&lt;div&gt;SecurityContextHolderAwareRequestFilter&lt;/div&gt;&lt;div&gt;AnonymousAuthenticationFilter&lt;/div&gt;&lt;div&gt;SessionManagementFilter&lt;/div&gt;&lt;div&gt;ExceptionTranslationFilter&lt;/div&gt;&lt;div&gt;&lt;b&gt;FilterSecurityInterceptor&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;/oauth/token、 /oauth/token_key、&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;/oauth/check_token 走的过滤器链&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=4;" parent="1" vertex="1">
          <mxGeometry x="720" y="2510" width="200" height="160" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-27" target="Jysl4UP8jRCQiMBeIVnq-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-27" value="BasicAuthenticationFilter&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;读取请求头 “Authorization” 的值&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="960" y="2560" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-26" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-29" target="gpTnpa3g8ZrnLY71u2b0-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-29" value="FilterSecurityInterceptor" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="960" y="2640" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-31" value="ResponseEntity&amp;lt;OAuth2AccessToken&amp;gt; &lt;b&gt;postAccessToken&lt;/b&gt;(Principal principal, @RequestParam Map&amp;lt;String, String&amp;gt; parameters)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;/oauth/token 的处理器&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1199" y="2720" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-47" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-50" target="Jysl4UP8jRCQiMBeIVnq-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1650" y="270" />
              <mxPoint x="1650" y="940" />
              <mxPoint x="460" y="940" />
              <mxPoint x="460" y="975" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-51" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-33" target="Jysl4UP8jRCQiMBeIVnq-50" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-86" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-33" target="Jysl4UP8jRCQiMBeIVnq-85" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1420" y="270" />
              <mxPoint x="1420" y="350" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-88" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-33" target="Jysl4UP8jRCQiMBeIVnq-87" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-97" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-33" target="Jysl4UP8jRCQiMBeIVnq-93" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-100" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-33" target="Jysl4UP8jRCQiMBeIVnq-98" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-33" value="AuthorizationServerEndpointsConfiguration&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;端点配置，注册了几个断点，&lt;br&gt;比如 /oauth/token&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1200" y="240" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-35" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;AuthorizationServerTokenServicesConfiguration&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1190" y="320" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-38" value="&lt;div&gt;void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; endpoints.&lt;b&gt;authenticationManager&lt;/b&gt;(authenticationManager);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="480" y="960" width="400" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-40" value="&lt;div&gt;void configure(AuthorizationServerSecurityConfigurer oauthServer) throws Exception {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; oauthServer.&lt;b&gt;checkTokenAccess&lt;/b&gt;(&quot;isAuthenticated()&quot;);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="480" y="1040" width="400" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-43" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;OAuth2AuthorizationServerConfig extends&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;b&gt;AuthorizationServerConfigurerAdapter&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="240" y="920" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-44" target="dtGfbLZROhE4GbIlcdWK-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-3" value="&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;如果选择&lt;br style=&quot;&quot;&gt;基于内存配置&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;" parent="dtGfbLZROhE4GbIlcdWK-2" vertex="1" connectable="0">
          <mxGeometry x="-0.223" y="1" relative="1" as="geometry">
            <mxPoint x="9" y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-44" value="&lt;div&gt;void configure(&lt;b&gt;ClientDetailsServiceConfigurer&lt;/b&gt; clients) throws Exception {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; clients.&lt;b&gt;withClientDetails&lt;/b&gt;(clientDetailsService);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;这里的clients&amp;nbsp;ClientDetailsServiceConfiguration 中创建的&amp;nbsp;ClientDetailsServiceConfigurer&amp;nbsp;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="480" y="1121" width="400" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-48" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b style=&quot;&quot;&gt;AuthorizationServerEndpointsConfiguration&lt;/b&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;AuthorizationServerEndpointsConfigurer &lt;b&gt;endpoints&lt;/b&gt; = new &lt;b&gt;AuthorizationServerEndpointsConfigurer&lt;/b&gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//客户端应用详情信息服务，和Spring Security UserDetailService 作用类似&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;ClientDetailsService &lt;b&gt;clientDetailsService&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//用户自定义OAuth2配置类，继承 AuthorizationServerConfigurerAdapter&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;List&amp;lt;AuthorizationServerConfigurer&amp;gt; &lt;b&gt;configurers&lt;/b&gt; = Collections.emptyList();&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
          <mxGeometry x="-520" y="240" width="480" height="110" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-50" value="&lt;div&gt;@PostConstruct&lt;/div&gt;&lt;div&gt;void init()&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1440" y="240" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-55" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-60" target="Jysl4UP8jRCQiMBeIVnq-54" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-52" value="@EnableAuthorizationServer" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="480" y="720" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-64" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-54" target="Jysl4UP8jRCQiMBeIVnq-63" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-68" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-54" target="Jysl4UP8jRCQiMBeIVnq-67" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-54" value="&lt;b&gt;AuthorizationServerSecurityConfiguration&lt;/b&gt;&lt;br&gt;extends&amp;nbsp;&lt;b&gt;WebSecurityConfigurerAdapter&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;用于配置认证服务器的过滤器链&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="960" y="720" width="199" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-71" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-58" target="Jysl4UP8jRCQiMBeIVnq-70" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-28" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-58" target="dtGfbLZROhE4GbIlcdWK-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-58" value="ClientDetailsServiceConfiguration" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1440" y="720" width="199" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-61" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-52" target="Jysl4UP8jRCQiMBeIVnq-60" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="680" y="750" as="sourcePoint" />
            <mxPoint x="960" y="750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-62" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-60" target="Jysl4UP8jRCQiMBeIVnq-33" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="930" y="750" />
              <mxPoint x="930" y="310" />
              <mxPoint x="1170" y="310" />
              <mxPoint x="1170" y="285" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-60" value="@Import" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="720" y="720" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-65" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-63" target="Jysl4UP8jRCQiMBeIVnq-58" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-66" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-63" target="Jysl4UP8jRCQiMBeIVnq-33" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1419" y="735" />
              <mxPoint x="1419" y="710" />
              <mxPoint x="1170" y="710" />
              <mxPoint x="1170" y="285" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-63" value="@Import" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1200" y="720" width="199" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-69" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#dae8fc;strokeColor=#6c8ebf;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-67" target="Jysl4UP8jRCQiMBeIVnq-44" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="470" y="1140" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1670" y="840" />
              <mxPoint x="1670" y="1110" />
              <mxPoint x="470" y="1110" />
              <mxPoint x="470" y="1136" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-67" value="&lt;div&gt;&lt;b&gt;@Autowired&lt;/b&gt;&lt;/div&gt;&lt;div&gt;public void configure(&lt;b&gt;ClientDetailsServiceConfigurer&lt;/b&gt; clientDetails) throws Exception {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; for (&lt;b&gt;AuthorizationServerConfigurer&lt;/b&gt; configurer : configurers) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; configurer.configure(clientDetails);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="1200" y="800" width="440" height="80" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-70" value="&lt;div&gt;@Bean&lt;/div&gt;ClientDetailsServiceConfigurer configurer = new &lt;b&gt;ClientDetailsServiceConfigurer&lt;/b&gt;(new ClientDetailsServiceBuilder());" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1680" y="720" width="199" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-72" value="&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&lt;b&gt;AuthorizationServerConfigurerAdapter&lt;br&gt;就是自定义OAuth2配置的窗口&lt;br&gt;很多配置类会注入此类，通过它可以修改各个&lt;br&gt;自动配置配置类的配置，然后自动配置使用&lt;br&gt;修改后的配置创建Bean&lt;br&gt;然后再看配置类代码就会感觉很清晰了&lt;/b&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="230" y="525" width="220" height="100" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-78" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-77" target="bewY3FNtBYAkQc0WHg5f-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-79" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-77" target="bewY3FNtBYAkQc0WHg5f-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-77" value="密码模式" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="40" y="2560" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-80" value="&lt;b&gt;一些关键的配置类 和 Bean&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-300" y="200" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-90" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-85" target="Jysl4UP8jRCQiMBeIVnq-89" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-85" value="@Bean&lt;br&gt;&lt;b&gt;AuthorizationEndpoint&lt;/b&gt; authorizationEndpoint()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1440" y="320" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-92" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-87" target="Jysl4UP8jRCQiMBeIVnq-91" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-87" value="@Bean&lt;br&gt;&lt;b&gt;TokenEndpoint &lt;/b&gt;tokenEndpoint()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1440" y="400" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-89" value="任意RequestMethod /oauth/authorize&lt;br&gt;POST&amp;nbsp;/oauth/authorize" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;" parent="1" vertex="1">
          <mxGeometry x="1680" y="320" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-91" value="GET /oauth/token&lt;br&gt;POST /oauth/token" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;" parent="1" vertex="1">
          <mxGeometry x="1680" y="400" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-96" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-93" target="Jysl4UP8jRCQiMBeIVnq-95" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-93" value="@Bean&lt;br&gt;&lt;b&gt;CheckTokenEndpoint &lt;/b&gt;checkTokenEndpoint()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1440" y="480" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-95" value="任意RequestMethod /oauth/check_token" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;" parent="1" vertex="1">
          <mxGeometry x="1680" y="480" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-102" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jysl4UP8jRCQiMBeIVnq-98" target="Jysl4UP8jRCQiMBeIVnq-101" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-98" value="@Bean&lt;br&gt;&lt;b&gt;WhitelabelApprovalEndpoint &lt;/b&gt;whitelabelApprovalEndpoint()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1440" y="560" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Jysl4UP8jRCQiMBeIVnq-101" value="任意RequestMethod /oauth/confirm_access" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1680" y="560" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="dtGfbLZROhE4GbIlcdWK-1" target="dtGfbLZROhE4GbIlcdWK-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-1" value="&lt;div&gt;clients.&lt;b&gt;inMemory&lt;/b&gt;()&lt;/div&gt;&lt;div&gt;.withClient(&quot;client-gateway&quot;)&lt;/div&gt;&lt;div&gt;.secret(&quot;secret-123&quot;)&lt;/div&gt;&lt;div&gt;.authorizedGrantTypes(&quot;password&quot;)&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;.scopes(&quot;read_userinfo&quot;, &quot;read_contacts&quot;);&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="959" y="1121" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="dtGfbLZROhE4GbIlcdWK-5" target="dtGfbLZROhE4GbIlcdWK-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="dtGfbLZROhE4GbIlcdWK-5" target="dtGfbLZROhE4GbIlcdWK-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-5" value="&lt;b&gt;InMemoryClientDetailsServiceBuilder&lt;/b&gt; next = getBuilder().inMemory();" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="1200" y="1121" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="dtGfbLZROhE4GbIlcdWK-7" target="dtGfbLZROhE4GbIlcdWK-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="dtGfbLZROhE4GbIlcdWK-7" target="dtGfbLZROhE4GbIlcdWK-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-7" value="&lt;div&gt;.withClient(&quot;client-gateway&quot;)&lt;/div&gt;&lt;div&gt;.secret(&quot;secret-123&quot;)&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;" parent="1" vertex="1">
          <mxGeometry x="1200" y="1200" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-9" value="return new InMemoryClientDetailsServiceBuilder();" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="1440" y="1121" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-11" value="&lt;div&gt;ClientBuilder clientBuilder = new ClientBuilder(clientId);&lt;/div&gt;&lt;div&gt;this.clientBuilders.add(clientBuilder);&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;" parent="1" vertex="1">
          <mxGeometry x="1440" y="1200" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-16" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="dtGfbLZROhE4GbIlcdWK-13" target="dtGfbLZROhE4GbIlcdWK-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-18" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="dtGfbLZROhE4GbIlcdWK-13" target="dtGfbLZROhE4GbIlcdWK-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-13" value="&lt;div&gt;.authorizedGrantTypes(&quot;password&quot;)&amp;nbsp;&amp;nbsp;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;" parent="1" vertex="1">
          <mxGeometry x="1200" y="1280" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-15" value="&lt;div&gt;&lt;div&gt;for (String grant : authorizedGrantTypes) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; this.authorizedGrantTypes.add(grant);&lt;span style=&quot;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="1440" y="1280" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-20" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="dtGfbLZROhE4GbIlcdWK-17" target="dtGfbLZROhE4GbIlcdWK-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-17" value="&lt;div&gt;.scopes(&quot;read_userinfo&quot;, &quot;read_contacts&quot;)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;" parent="1" vertex="1">
          <mxGeometry x="1200" y="1360" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-19" value="&lt;div&gt;for (String authority : authorities) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; this.authorities.add(authority);&lt;span style=&quot;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="1440" y="1360" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-24" style="rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;endArrow=diamondThin;endFill=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="dtGfbLZROhE4GbIlcdWK-21" target="dtGfbLZROhE4GbIlcdWK-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-21" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;ClientDetailsServiceBuilder&lt;/b&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//注册的客户端应用Builder&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private List&amp;lt;ClientBuilder&amp;gt; clientBuilders = new ArrayList&amp;lt;ClientBuilder&amp;gt;();&lt;br&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
          <mxGeometry x="-520" y="400" width="480" height="80" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-25" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;endArrow=block;endFill=0;" parent="1" source="dtGfbLZROhE4GbIlcdWK-22" target="dtGfbLZROhE4GbIlcdWK-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-22" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;InMemoryClientDetailsServiceBuilder&lt;/b&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//客户端应用详情信息Map, key为clientId&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private Map&amp;lt;String, ClientDetails&amp;gt; clientDetails = new HashMap&amp;lt;String, ClientDetails&amp;gt;();&lt;br&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
          <mxGeometry x="-520" y="520" width="480" height="80" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-23" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;ClientBuilder &lt;/b&gt;构建客户端应用&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final String clientId;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private Collection&amp;lt;String&amp;gt; authorizedGrantTypes = new LinkedHashSet&amp;lt;String&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private Collection&amp;lt;String&amp;gt; authorities = new LinkedHashSet&amp;lt;String&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private Integer accessTokenValiditySeconds;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private Integer refreshTokenValiditySeconds;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private Collection&amp;lt;String&amp;gt; scopes = new LinkedHashSet&amp;lt;String&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private Collection&amp;lt;String&amp;gt; autoApproveScopes = new HashSet&amp;lt;String&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private String secret;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private Set&amp;lt;String&amp;gt; registeredRedirectUris = new HashSet&amp;lt;String&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private Set&amp;lt;String&amp;gt; resourceIds = new HashSet&amp;lt;String&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private boolean autoApprove;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private Map&amp;lt;String, Object&amp;gt; additionalInformation = new LinkedHashMap&amp;lt;String, Object&amp;gt;();&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1040" y="400" width="480" height="200" as="geometry" />
        </mxCell>
        <mxCell id="dtGfbLZROhE4GbIlcdWK-26" value="&lt;div&gt;@Bean&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;@Lazy&lt;/span&gt;&lt;/div&gt;&lt;div&gt;@Scope(proxyMode=ScopedProxyMode.INTERFACES)&lt;/div&gt;&lt;div&gt;public &lt;b&gt;ClientDetailsService&lt;/b&gt; clientDetailsService() throws Exception {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; return configurer.and().&lt;b&gt;build&lt;/b&gt;();&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;arcSize=6;" parent="1" vertex="1">
          <mxGeometry x="1680" y="800" width="260" height="100" as="geometry" />
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="gpTnpa3g8ZrnLY71u2b0-1" target="gpTnpa3g8ZrnLY71u2b0-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="480" y="1490" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-1" value="过滤器链的创建&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;这部分是Spring Security的源码&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="240" y="1460" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="gpTnpa3g8ZrnLY71u2b0-6" target="DjIQ4SRXJKjCJ7x8OOmH-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-6" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;@Bean &lt;br&gt;&lt;/b&gt;Filter &lt;b&gt;springSecurityFilterChain&lt;/b&gt;()&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;详细流程参考spring security 流程图&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="480" y="1460" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-7" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;AuthorizationServerSecurityConfiguration&lt;br&gt;&lt;/font&gt;extends AuthorizationServerConfigurerAdapter&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1520" y="1760" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-10" value="WebSecurityConfiguration" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="500" y="1430" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-14" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="gpTnpa3g8ZrnLY71u2b0-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1480" y="1790" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-17" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="DjIQ4SRXJKjCJ7x8OOmH-9" target="gpTnpa3g8ZrnLY71u2b0-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1480" y="1790" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-15" value="&lt;font&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;SecurityConfig extends WebSecurityConfigurerAdapter&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1520" y="1860" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="DjIQ4SRXJKjCJ7x8OOmH-11" target="gpTnpa3g8ZrnLY71u2b0-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1500" y="1990" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="DjIQ4SRXJKjCJ7x8OOmH-11" target="DjIQ4SRXJKjCJ7x8OOmH-2">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1500" y="1990" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="1500" y="1990" />
              <mxPoint x="1500" y="2090" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-20" value="&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;http = {HttpSecurity@6837}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;requestMatcherConfigurer = {HttpSecurity$RequestMatcherConfigurer@6840}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;&lt;b&gt;filters&lt;/b&gt; = {ArrayList@6841}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; 0 = {WebAsyncManagerIntegrationFilter@6852}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;&lt;b&gt;requestMatcher&lt;/b&gt; = {OrRequestMatcher@6842} &quot;OrRequestMatcher [requestMatchers=[&lt;b&gt;Ant [pattern=&#39;/oauth/token&#39;], Ant [pattern=&#39;/oauth/token_key&#39;], Ant [pattern=&#39;/oauth/check_token&#39;]&lt;/b&gt;]]&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;comparator = {FilterComparator@6843}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;logger = {LogAdapter$Slf4jLocationAwareLog@6844}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;&lt;b&gt;configurers&lt;/b&gt; = {LinkedHashMap@6845}&amp;nbsp; size = 12&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Class@6531} &quot;class org.springframework.security.config.annotation.web.configurers.CsrfConfigurer&quot; -&amp;gt; {ArrayList@6899}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Class@6538} &quot;class org.springframework.security.config.annotation.web.configurers.ExceptionHandlingConfigurer&quot; -&amp;gt; {ArrayList@6900}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Class@6539} &quot;class org.springframework.security.config.annotation.web.configurers.HeadersConfigurer&quot; -&amp;gt; {ArrayList@6901}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Class@6559} &quot;class org.springframework.security.config.annotation.web.configurers.SessionManagementConfigurer&quot; -&amp;gt; {ArrayList@6902}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Class@6564} &quot;class org.springframework.security.config.annotation.web.configurers.SecurityContextConfigurer&quot; -&amp;gt; {ArrayList@6903}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Class@6565} &quot;class org.springframework.security.config.annotation.web.configurers.RequestCacheConfigurer&quot; -&amp;gt; {ArrayList@6904}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Class@6566} &quot;class org.springframework.security.config.annotation.web.configurers.AnonymousConfigurer&quot; -&amp;gt; {ArrayList@6905}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Class@6569} &quot;class org.springframework.security.config.annotation.web.configurers.ServletApiConfigurer&quot; -&amp;gt; {ArrayList@6906}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Class@6571} &quot;class org.springframework.security.config.annotation.web.configurers.DefaultLoginPageConfigurer&quot; -&amp;gt; {ArrayList@6907}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Class@6580} &quot;class org.springframework.security.config.annotation.web.configurers.LogoutConfigurer&quot; -&amp;gt; {ArrayList@6908}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Class@5327} &quot;class org.springframework.security.oauth2.config.annotation.web.configurers.AuthorizationServerSecurityConfigurer&quot; -&amp;gt; {ArrayList@6909}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Class@6827} &quot;class org.springframework.security.config.annotation.web.configurers.ExpressionUrlAuthorizationConfigurer&quot; -&amp;gt; {ArrayList@6910}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;configurersAddedInInitializing = {ArrayList@6846}&amp;nbsp; size = 0&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;sharedObjects = {HashMap@6847}&amp;nbsp; size = 7&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;allowConfigurersOfSameType = false&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;buildState = {AbstractConfiguredSecurityBuilder$BuildState@6446} &quot;UNBUILT&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;objectPostProcessor = {AutowireBeanFactoryObjectPostProcessor@6433}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;building = {AtomicBoolean@6848} &quot;false&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;object = null&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1860" y="920" width="880" height="340" as="geometry" />
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-21" value="&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;http = {HttpSecurity@7035}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp;requestMatcherConfigurer = {HttpSecurity$RequestMatcherConfigurer@7039}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp;filters = {ArrayList@7040}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; 0 = {WebAsyncManagerIntegrationFilter@7081}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp;requestMatcher = {AnyRequestMatcher@7041} &quot;any request&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp;comparator = {FilterComparator@7042}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp;logger = {LogAdapter$Slf4jLocationAwareLog@7043}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp;configurers = {LinkedHashMap@7044}&amp;nbsp; size = 13&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; {Class@6531} &quot;class org.springframework.security.config.annotation.web.configurers.CsrfConfigurer&quot; -&amp;gt; {ArrayList@7065}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; {Class@6538} &quot;class org.springframework.security.config.annotation.web.configurers.ExceptionHandlingConfigurer&quot; -&amp;gt; {ArrayList@7066}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; {Class@6539} &quot;class org.springframework.security.config.annotation.web.configurers.HeadersConfigurer&quot; -&amp;gt; {ArrayList@7067}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; {Class@6559} &quot;class org.springframework.security.config.annotation.web.configurers.SessionManagementConfigurer&quot; -&amp;gt; {ArrayList@7068}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; {Class@6564} &quot;class org.springframework.security.config.annotation.web.configurers.SecurityContextConfigurer&quot; -&amp;gt; {ArrayList@7069}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; {Class@6565} &quot;class org.springframework.security.config.annotation.web.configurers.RequestCacheConfigurer&quot; -&amp;gt; {ArrayList@7070}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; {Class@6566} &quot;class org.springframework.security.config.annotation.web.configurers.AnonymousConfigurer&quot; -&amp;gt; {ArrayList@7071}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; {Class@6569} &quot;class org.springframework.security.config.annotation.web.configurers.ServletApiConfigurer&quot; -&amp;gt; {ArrayList@7072}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; {Class@6571} &quot;class org.springframework.security.config.annotation.web.configurers.DefaultLoginPageConfigurer&quot; -&amp;gt; {ArrayList@7073}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; {Class@6580} &quot;class org.springframework.security.config.annotation.web.configurers.LogoutConfigurer&quot; -&amp;gt; {ArrayList@7074}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; {Class@6827} &quot;class org.springframework.security.config.annotation.web.configurers.ExpressionUrlAuthorizationConfigurer&quot; -&amp;gt; {ArrayList@7075}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; {Class@7006} &quot;class org.springframework.security.config.annotation.web.configurers.FormLoginConfigurer&quot; -&amp;gt; {ArrayList@7076}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; {Class@7030} &quot;class org.springframework.security.config.annotation.web.configurers.HttpBasicConfigurer&quot; -&amp;gt; {ArrayList@7077}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp;configurersAddedInInitializing = {ArrayList@7045}&amp;nbsp; size = 0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp;sharedObjects = {HashMap@7046}&amp;nbsp; size = 5&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp;allowConfigurersOfSameType = false&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp;buildState = {AbstractConfiguredSecurityBuilder$BuildState@6446} &quot;UNBUILT&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp;objectPostProcessor = {AutowireBeanFactoryObjectPostProcessor@6433}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp;building = {AtomicBoolean@7047} &quot;false&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp;object = null&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2210" y="1280" width="710" height="350" as="geometry" />
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-23" value="&lt;font style=&quot;&quot;&gt;&lt;font size=&quot;1&quot;&gt;AuthorizationServerSecurityConfiguration&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="1520" y="1960" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-27" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="gpTnpa3g8ZrnLY71u2b0-25" target="Jysl4UP8jRCQiMBeIVnq-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gpTnpa3g8ZrnLY71u2b0-25" value="端点请求处理&lt;br&gt;&lt;font color=&quot;#ea6b66&quot;&gt;入参、返回值、异常处理器都是写死的&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="959.5" y="2720" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-1" value="&lt;font style=&quot;font-size: 10px;&quot; color=&quot;#007fff&quot;&gt;看后面实际的过滤器链可能会产生疑问：&lt;br&gt;AuthorizationServerSecurityConfiguration配置的&lt;br&gt;那条过滤器链中 BasicAuthenticationFilter 是怎么来的？&lt;br&gt;这里反过来溯源这个过滤器的注册流程&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="900" y="2090" width="270" height="70" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-2" value="&lt;font&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;SecurityConfig&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1520" y="2060" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-6" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="DjIQ4SRXJKjCJ7x8OOmH-7" target="DjIQ4SRXJKjCJ7x8OOmH-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-7" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;webSecurity&lt;/b&gt;.&lt;b&gt;build&lt;/b&gt;()&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;构造安全过滤器链，&lt;b&gt;WebSecurity 中可能有多个HttpSecurity&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="720" y="1460" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="DjIQ4SRXJKjCJ7x8OOmH-9" target="DjIQ4SRXJKjCJ7x8OOmH-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-9" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;div&gt;beforeInit();&lt;/div&gt;&lt;div&gt;&lt;b&gt;init&lt;/b&gt;();&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;往过滤器链的配置类中&lt;b&gt;注册过滤器的配置类&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1320" y="1760" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="DjIQ4SRXJKjCJ7x8OOmH-11" target="DjIQ4SRXJKjCJ7x8OOmH-12">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1400" y="2060" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-11" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;div&gt;beforeConfigure();&lt;/div&gt;&lt;div&gt;&lt;b&gt;configure&lt;/b&gt;();&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;遍历过滤器的配置类&lt;b&gt;创建过滤器&lt;/b&gt;并注册到过滤器链的配置类&lt;/font&gt;&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1320" y="1960" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-12" value="&lt;font style=&quot;font-size: 10px&quot;&gt;O result = &lt;b&gt;performBuild&lt;/b&gt;();&lt;br&gt;return result;&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;创建过滤器链&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1320" y="2180" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-13" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;AbstractConfiguredSecurityBuilder&lt;br&gt;执行的是HttpSecurity覆盖的方法&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1320" y="1720" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" edge="1" parent="1" source="DjIQ4SRXJKjCJ7x8OOmH-15" target="DjIQ4SRXJKjCJ7x8OOmH-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-15" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;div&gt;beforeInit();&lt;/div&gt;&lt;div&gt;&lt;b&gt;init&lt;/b&gt;();&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="920" y="1460" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="DjIQ4SRXJKjCJ7x8OOmH-17" target="DjIQ4SRXJKjCJ7x8OOmH-19">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1000" y="1660" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-17" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;div&gt;beforeConfigure();&lt;/div&gt;&lt;div&gt;&lt;b&gt;configure&lt;/b&gt;();&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="920" y="1560" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-18" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="DjIQ4SRXJKjCJ7x8OOmH-19" target="DjIQ4SRXJKjCJ7x8OOmH-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-19" value="&lt;font style=&quot;font-size: 10px&quot;&gt;O result = &lt;b&gt;performBuild&lt;/b&gt;();&lt;br&gt;return result;&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;创建过滤器链&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="920" y="1760" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-20" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;AbstractConfiguredSecurityBuilder&lt;br&gt;执行的是WebSecurity覆盖的方法&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="910" y="1425" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-21" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="DjIQ4SRXJKjCJ7x8OOmH-25" target="DjIQ4SRXJKjCJ7x8OOmH-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="DjIQ4SRXJKjCJ7x8OOmH-23" target="DjIQ4SRXJKjCJ7x8OOmH-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-23" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;&lt;div style=&quot;&quot;&gt;List&amp;lt;SecurityFilterChain&amp;gt; securityFilterChains = new ArrayList&amp;lt;&amp;gt;(&lt;span style=&quot;background-color: initial;&quot;&gt;chainSize);&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1120" y="1760" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="DjIQ4SRXJKjCJ7x8OOmH-25" target="DjIQ4SRXJKjCJ7x8OOmH-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-25" value="&lt;font style=&quot;&quot;&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;for &lt;b&gt;securityFilterChainBuilders&lt;/b&gt;:&amp;nbsp;&lt;br&gt;&lt;/font&gt;securityFilterChains.add(&lt;br&gt;securityFilterChainBuilder.&lt;b&gt;build&lt;/b&gt;());&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;securityFilterChainBuilder 即 &lt;b&gt;HttpSecurity&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1120" y="1840" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-26" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;这个方法主要的作用就是WebSecurity中&lt;br&gt;配置了几个HttpSecurity 就创建几个过滤器链&lt;br&gt;然后创建过滤器链代理&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="890" y="1820" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="DjIQ4SRXJKjCJ7x8OOmH-27" value="&lt;font style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;FilterChainProxy filterChainProxy = new &lt;b&gt;FilterChainProxy&lt;/b&gt;(&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;securityFilterChains)&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1120" y="1940" width="160" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="3ssNuAnr9_rqi4YUogIS" name="各模式交互流程">
    <mxGraphModel dx="1195" dy="733" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-18" value="密码模式交互流程" style="swimlane;childLayout=stackLayout;resizeParent=1;resizeParentMax=0;startSize=20;html=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="20" y="20" width="800" height="420" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-19" value="用户" style="swimlane;startSize=20;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-18">
          <mxGeometry y="20" width="160" height="400" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-25" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;登录&lt;br style=&quot;font-size: 10px;&quot;&gt;username、password&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-19">
          <mxGeometry x="20" y="40" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-53" value="登录成功" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-19">
          <mxGeometry x="20" y="100" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-55" value="业务操作&lt;br&gt;携带令牌" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-19">
          <mxGeometry x="20" y="180" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-20" value="网关" style="swimlane;startSize=20;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-18">
          <mxGeometry x="160" y="20" width="160" height="400" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-26" value="/gateway/login&lt;br&gt;附带client-secret" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-20">
          <mxGeometry x="20" y="40" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-51" value="返回令牌" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-20">
          <mxGeometry x="20" y="100" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-57" value="令牌校验" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-20">
          <mxGeometry x="20" y="180" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-60" value="令牌校验成功&lt;br&gt;获取到用户信息" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-20">
          <mxGeometry x="20" y="260" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-21" value="业务服务" style="swimlane;startSize=20;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-18">
          <mxGeometry x="320" y="20" width="160" height="400" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-62" value="权限校验&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px;&quot;&gt;不放在网关是防止每次修改业务服务权限配置都要改网关&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-21">
          <mxGeometry x="20" y="260" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-96" value="校验成功后执行业务操作" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-21">
          <mxGeometry x="20" y="340" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-23" value="认证中心" style="swimlane;startSize=20;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-18">
          <mxGeometry x="480" y="20" width="160" height="400" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-28" value="/oauth/token&lt;br&gt;查询用户信息" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-23">
          <mxGeometry x="20" y="40" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-34" value="/oauth/token&lt;br&gt;校验client-secret、用户密码，成功则返回令牌" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-23">
          <mxGeometry x="20" y="100" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-59" value="/oauth/check_token&lt;br&gt;检查令牌" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-23">
          <mxGeometry x="20" y="180" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-24" value="用户基础服务" style="swimlane;startSize=20;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-18">
          <mxGeometry x="640" y="20" width="160" height="400" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-32" value="查询用户信息" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-24">
          <mxGeometry x="20" y="40" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-64" value="查询用户权限信息" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="vrPN_jBtXwNGg4vfSMyD-24">
          <mxGeometry x="20" y="260" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="vrPN_jBtXwNGg4vfSMyD-18" source="vrPN_jBtXwNGg4vfSMyD-25" target="vrPN_jBtXwNGg4vfSMyD-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;" edge="1" parent="vrPN_jBtXwNGg4vfSMyD-18" source="vrPN_jBtXwNGg4vfSMyD-26" target="vrPN_jBtXwNGg4vfSMyD-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="vrPN_jBtXwNGg4vfSMyD-18" source="vrPN_jBtXwNGg4vfSMyD-28" target="vrPN_jBtXwNGg4vfSMyD-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="vrPN_jBtXwNGg4vfSMyD-18" source="vrPN_jBtXwNGg4vfSMyD-32" target="vrPN_jBtXwNGg4vfSMyD-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="vrPN_jBtXwNGg4vfSMyD-18" source="vrPN_jBtXwNGg4vfSMyD-34" target="vrPN_jBtXwNGg4vfSMyD-51">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="vrPN_jBtXwNGg4vfSMyD-18" source="vrPN_jBtXwNGg4vfSMyD-51" target="vrPN_jBtXwNGg4vfSMyD-53">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="vrPN_jBtXwNGg4vfSMyD-18" source="vrPN_jBtXwNGg4vfSMyD-55" target="vrPN_jBtXwNGg4vfSMyD-57">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="169.99999999999955" y="220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="vrPN_jBtXwNGg4vfSMyD-18" source="vrPN_jBtXwNGg4vfSMyD-57" target="vrPN_jBtXwNGg4vfSMyD-59">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="509.99999999999955" y="220.33333333333348" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="vrPN_jBtXwNGg4vfSMyD-18" source="vrPN_jBtXwNGg4vfSMyD-59" target="vrPN_jBtXwNGg4vfSMyD-60">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="vrPN_jBtXwNGg4vfSMyD-18" source="vrPN_jBtXwNGg4vfSMyD-60" target="vrPN_jBtXwNGg4vfSMyD-62">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="vrPN_jBtXwNGg4vfSMyD-18" source="vrPN_jBtXwNGg4vfSMyD-62" target="vrPN_jBtXwNGg4vfSMyD-64">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vrPN_jBtXwNGg4vfSMyD-97" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="vrPN_jBtXwNGg4vfSMyD-18" source="vrPN_jBtXwNGg4vfSMyD-64" target="vrPN_jBtXwNGg4vfSMyD-96">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
