<mxfile host="Electron" modified="2024-04-25T08:59:34.263Z" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.6.5 Chrome/114.0.5735.243 Electron/25.3.1 Safari/537.36" etag="W29IaAGQ3luLWRjUdMj7" version="21.6.5" type="device" pages="3">
  <diagram id="epMd4GJdL1VY7lUlSukr" name="xxl-job-executor">
    <mxGraphModel dx="2058" dy="764" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="-lWm-qoocMC7RLlnJny9-0" />
        <mxCell id="-lWm-qoocMC7RLlnJny9-1" parent="-lWm-qoocMC7RLlnJny9-0" />
        <mxCell id="-206KKTZnmEvFPcNaSRJ-3" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=10;fontColor=#333333;fillColor=#f5f5f5;strokeColor=#666666;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="420" y="540" width="1470" height="300" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-236" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=12;fontColor=#333333;strokeColor=#666666;fillColor=#f5f5f5;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1300" y="1280" width="660" height="350" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-233" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=12;fontColor=#333333;strokeColor=#666666;fillColor=#f5f5f5;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1980" y="1650" width="470" height="450" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-231" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=10;fontColor=#333333;strokeColor=#666666;fillColor=#f5f5f5;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1580" y="2120" width="1180" height="720" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-230" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=10;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2870" y="2700" width="650" height="670" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-128" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#82b366;shape=link;elbow=vertical;fillColor=#d5e8d4;width=2;dashed=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-89" target="KZKVduNkzBJ_FhNbkcFE-127" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-0" value="&lt;h1&gt;xxl-job-executor 工作流程图 &lt;span style=&quot;font-weight: normal&quot;&gt;&lt;font style=&quot;font-size: 18px&quot;&gt;（2.3.1）&lt;/font&gt;&lt;/span&gt;&lt;/h1&gt;&lt;div&gt;&lt;/div&gt;任务执行器; 核心是&lt;span&gt;XxlJobExecutor&lt;/span&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;(黄色节点：核心节点，蓝色节点：重要节点，绿色节点：底层或交互节点)&lt;br&gt;&lt;p&gt;&lt;b&gt;前置知识：&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Spring (SmartInitializingSingleton、MethodIntrospector)&lt;br&gt;&lt;/li&gt;&lt;li&gt;Netty&amp;nbsp;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="40" y="20" width="480" height="160" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-1" target="JAirRcyNL59irFaegiv7-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-1" value="xxl-job-executor" style="ellipse;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="60" y="200" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-8" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#007FFF;endArrow=classic;endFill=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-2" target="JAirRcyNL59irFaegiv7-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-2" value="XxlJobSpringExecutor# xxlJobExecutor()&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;注册任务执行器Bean&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="40" y="440" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-4" value="&lt;p style=&quot;margin: 4px 0px 0px ; text-align: center ; text-decoration: underline&quot;&gt;&lt;font&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;&lt;b&gt;XxlJobExecutor&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px ; font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#000000&quot;&gt;&lt;b&gt;adminAddresses&lt;/b&gt; = &quot;http://127.0.0.1:8080/xxl-job-admin&quot;&lt;/font&gt;&lt;font style=&quot;font-size: 10px&quot;&gt; //调度中心的地址，&lt;br&gt;多个以逗号分隔&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px ; font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#000000&quot;&gt;accessToken = &quot;default_token&quot;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px ; font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#000000&quot;&gt;&lt;b&gt;appname&lt;/b&gt; = &quot;xxl-job-executor-sample&quot;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px ; font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#000000&quot;&gt;address = &quot;&quot;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px ; font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#000000&quot;&gt;ip = &quot;&quot;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px ; font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#000000&quot;&gt;&lt;b&gt;port&lt;/b&gt; = 9999&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px ; font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#000000&quot;&gt;logPath = &quot;/home/lee/mywork/java/github/xxl-job/logs/jobhandler&quot;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px ; font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#000000&quot;&gt;logRetentionDays = 30&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px ; font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;b style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;embedServer&lt;/b&gt;&lt;font color=&quot;#000000&quot;&gt; = null&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; white-space: pre&quot;&gt;&#x9;&lt;/span&gt;//嵌入了Netty服务器，实现RPC通信&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px ; font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px ; font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;静态字段：&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;List&amp;lt;AdminBiz&amp;gt; &lt;/font&gt;&lt;b style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;adminBizList&lt;/b&gt;&lt;font color=&quot;#000000&quot;&gt;; &lt;/font&gt;//用于创建管理中心客户端的配置列表&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;ConcurrentMap&amp;lt;String, IJobHandler&amp;gt; &lt;/font&gt;&lt;b style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;jobHandlerRepository&lt;/b&gt;&lt;font color=&quot;#000000&quot;&gt;;&amp;nbsp;&lt;/font&gt;//处理器Map&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&amp;nbsp;处理器名-&amp;gt; 处理器对象，即一个任务执行器可能处理多个任务&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;ConcurrentMap&amp;lt;Integer, JobThread&amp;gt; &lt;b&gt;jobThreadRepository&lt;/b&gt;; &lt;/font&gt;//任务处理线程集合&lt;/span&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="-440" y="240" width="400" height="240" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-6" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;endArrow=block;endFill=0;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-5" target="JAirRcyNL59irFaegiv7-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-5" value="&lt;p style=&quot;margin: 4px 0px 0px ; text-align: center ; text-decoration: underline ; font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-size: 12px&quot;&gt;XxlJobSpringExecutor&lt;/span&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;ApplicationContext applicationContext;&lt;/font&gt;&lt;/span&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="-400" y="520" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-10" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;endArrow=classic;endFill=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-7" target="JAirRcyNL59irFaegiv7-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-7" value="&lt;font&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;XxlJobSpringExecutor xxlJobSpringExecutor = new &lt;b&gt;XxlJobSpringExecutor&lt;/b&gt;()&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="240" y="440" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-12" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;endArrow=classic;endFill=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-9" target="JAirRcyNL59irFaegiv7-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-9" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;读取application.properties配置，&lt;br&gt;对成员初始化&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="240" y="500" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-14" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;endArrow=classic;endFill=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-11" target="JAirRcyNL59irFaegiv7-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-11" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;afterSingletonsInstantiated&lt;/b&gt;()&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;通过实现SmartInitializingSingleton接口，在所有Bean实例化后执行启动&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="240" y="560" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-16" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;endArrow=classic;endFill=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-13" target="JAirRcyNL59irFaegiv7-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-20" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;endArrow=classic;endFill=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-13" target="JAirRcyNL59irFaegiv7-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-13" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;initJobHandlerMethodRepository&lt;br&gt;(applicationContext)&lt;br&gt;&lt;/span&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;扫描所有Bean读取@XxlJob注释的Method, 然后注册JobHandler&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="440" y="550" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-18" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;endArrow=classic;endFill=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-15" target="JAirRcyNL59irFaegiv7-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-17" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-15" target="KZKVduNkzBJ_FhNbkcFE-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-15" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;GlueFactory.refreshInstance(1)&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;创建用于创建GlueJobHandler的工厂&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="440" y="860" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-24" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-17" target="KZKVduNkzBJ_FhNbkcFE-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-17" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;super.start()&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="440" y="1000" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-23" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;endArrow=classic;endFill=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-19" target="JAirRcyNL59irFaegiv7-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-19" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;beanDefinitionNames = applicationContext&lt;br&gt;.&lt;b&gt;getBeanNamesForType&lt;/b&gt;(Object.class, false, true);&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;读取全部Bean&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="680" y="560" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-25" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;endArrow=classic;endFill=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-22" target="JAirRcyNL59irFaegiv7-24" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="800" y="650" />
              <mxPoint x="920" y="650" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-22" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;for&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;beanDefinitionNames :&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="680" y="620" width="240" height="20" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-27" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;endArrow=classic;endFill=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-24" target="JAirRcyNL59irFaegiv7-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-24" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;annotatedMethods = &lt;b&gt;MethodIntrospector&lt;/b&gt;&lt;br&gt;.selectMethods(... &lt;b&gt;XxlJob&lt;/b&gt;.class&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;...)&lt;br&gt;&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="800" y="670" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-29" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;endArrow=classic;endFill=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-26" target="JAirRcyNL59irFaegiv7-28" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="920" y="780" />
              <mxPoint x="800" y="780" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;curved=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-26" target="KZKVduNkzBJ_FhNbkcFE-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-26" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;for annotatedMethods.entrySet()&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;:&amp;nbsp;&lt;/span&gt;&lt;br&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;registJobHandler&lt;/b&gt;(xxlJob, bean, executeMethod)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="800" y="730" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-28" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;for&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="680" y="800" width="240" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="JAirRcyNL59irFaegiv7-30" target="JAirRcyNL59irFaegiv7-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="JAirRcyNL59irFaegiv7-30" value="&lt;font style=&quot;font-size: 11px&quot;&gt;@Component SampleXxlJob&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 11px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;注册任务处理器 Bean&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="40" y="320" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-4" value="&lt;h1 style=&quot;font-size: 14px&quot;&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;借鉴：&lt;/span&gt;&lt;br&gt;&lt;/h1&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;通过 SmartInitializingSingleton&amp;nbsp;afterSingletonsInstantiated()方法实现在所有Bean都实例化后执行一下逻辑；&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="600" y="20" width="440" height="140" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-8" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-5" target="KZKVduNkzBJ_FhNbkcFE-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-5" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;for annotatedMethods.entrySet()&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;:&amp;nbsp;&lt;/span&gt;&lt;br&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;registJobHandler&lt;/b&gt;(xxlJob, bean, executeMethod)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1080" y="730" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-10" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-7" target="KZKVduNkzBJ_FhNbkcFE-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-7" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;额外通过反射获取&lt;b&gt;任务处理器类&lt;/b&gt; @XxlJob 注解中指定的init()、destroy()方法（Method）对象&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1360" y="730" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-13" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-9" target="KZKVduNkzBJ_FhNbkcFE-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-9" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;registJobHandler&lt;/b&gt;(name, new &lt;b&gt;MethodJobHandler&lt;/b&gt;(bean, executeMethod, initMethod, destroyMethod))&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1360" y="790" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-12" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;jobHandlerRepository.&lt;/b&gt;put(name, jobHandler)&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;jobHandlerRepository是CHM&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1640" y="790" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-14" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;glueFactory = new &lt;br&gt;GlueFactory()&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="820" y="860" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-20" value="0" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-16" target="KZKVduNkzBJ_FhNbkcFE-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-22" value="1" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-16" target="KZKVduNkzBJ_FhNbkcFE-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-16" value="type" style="rhombus;whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="680" y="840" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-21" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;glueFactory = new &lt;b&gt;SpringGlueFactory&lt;/b&gt;()&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="820" y="920" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-26" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-23" target="KZKVduNkzBJ_FhNbkcFE-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-23" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;XxlJobFileAppender.&lt;b&gt;initLogPath&lt;/b&gt;(logPath)&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;检查目录是否存在不存在则创建&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="680" y="1000" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-28" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-25" target="KZKVduNkzBJ_FhNbkcFE-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-34" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-25" target="KZKVduNkzBJ_FhNbkcFE-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-25" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;initAdminBizList(adminAddresses, accessToken)&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;创建用于连接Admin的客户端列表&lt;br&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#007fff&quot;&gt;一个Admin对应一个 AdminBizClient&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="680" y="1070" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-30" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-27" target="KZKVduNkzBJ_FhNbkcFE-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-27" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;JobLogFileCleanThread.getInstance()&lt;br&gt;.start(logRetentionDays)&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;启动用于定时清除日志的守护线程&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="680" y="1200" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-32" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-29" target="KZKVduNkzBJ_FhNbkcFE-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-38" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-29" target="KZKVduNkzBJ_FhNbkcFE-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-29" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;TriggerCallbackThread&lt;/b&gt;.getInstance().start()&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;启动&lt;b&gt;任务触发&lt;/b&gt;回调线程(里面启动了两个线程)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="680" y="1280" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-76" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-31" target="KZKVduNkzBJ_FhNbkcFE-75" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-31" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;initEmbedServer(address, ip, port, appname, accessToken)&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;启动executor Netty服务器,&lt;br&gt;实现与调度中心的通信&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="680" y="1710" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-36" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-33" target="KZKVduNkzBJ_FhNbkcFE-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-33" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;以 “,” 分割 ${xxl.job.admin.addresses} 值，获取Admin地址列表&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="960" y="1080" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-118" value="与Admin通信" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-35" target="KZKVduNkzBJ_FhNbkcFE-117" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-206KKTZnmEvFPcNaSRJ-10" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeWidth=1;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-35" target="-206KKTZnmEvFPcNaSRJ-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1230" y="1160" />
              <mxPoint x="1230" y="1095" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="-206KKTZnmEvFPcNaSRJ-11" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeWidth=1;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-35" target="-206KKTZnmEvFPcNaSRJ-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1220" y="1160" />
              <mxPoint x="1220" y="1025" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-35" value="&lt;font style=&quot;font-size: 10px&quot;&gt;AdminBiz adminBiz = new &lt;b&gt;AdminBizClient&lt;/b&gt;(address.trim(), accessToken);&lt;br&gt;&lt;b&gt;adminBizList&lt;/b&gt;.add(adminBiz);&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="940" y="1140" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-40" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-37" target="KZKVduNkzBJ_FhNbkcFE-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-42" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;dashed=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-37" target="KZKVduNkzBJ_FhNbkcFE-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-37" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;triggerCallbackThread&lt;/b&gt; = new Thread(...)&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;启动回调线程，执行回调任务&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="960" y="1280" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-44" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;dashed=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-39" target="KZKVduNkzBJ_FhNbkcFE-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-39" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;triggerRetryCallbackThread&lt;/b&gt; = new Thread(...)&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;启动重试线程，重试回调失败的任务&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="960" y="1640" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-46" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-41" target="KZKVduNkzBJ_FhNbkcFE-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-41" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;run()&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1200" y="1280" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-60" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-43" target="KZKVduNkzBJ_FhNbkcFE-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-43" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;run()&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1200" y="1640" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-53" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-45" target="KZKVduNkzBJ_FhNbkcFE-52" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1380" y="1320" />
              <mxPoint x="1500" y="1320" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-45" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;while(!toStop)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1320" y="1290" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-50" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-47" target="KZKVduNkzBJ_FhNbkcFE-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-47" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;while end&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1320" y="1540" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-49" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;last callback 处理&lt;br&gt;&lt;/span&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#007fff&quot;&gt;Executor关闭前的处理&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1320" y="1580" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-55" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-52" target="KZKVduNkzBJ_FhNbkcFE-54" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-52" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;HandleCallbackParam callback = getInstance().&lt;b&gt;callBackQueue&lt;/b&gt;.take();&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;从无界阻塞队列取任务&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1400" y="1340" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-57" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-54" target="KZKVduNkzBJ_FhNbkcFE-56" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-54" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;div&gt;int drainToNum = getInstance()&lt;br&gt;.&lt;b&gt;callBackQueue&lt;/b&gt;.drainTo(callbackParamList);&lt;/div&gt;&lt;div&gt;callbackParamList.add(callback)&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1400" y="1400" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-58" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-56" target="KZKVduNkzBJ_FhNbkcFE-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-62" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-56" target="KZKVduNkzBJ_FhNbkcFE-61" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1620" y="1480" />
              <mxPoint x="1620" y="1300" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-56" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;doCallback&lt;/b&gt;(callbackParamList)&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;相当于批量回调处理&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1400" y="1460" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-206KKTZnmEvFPcNaSRJ-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeWidth=1;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-59" target="KZKVduNkzBJ_FhNbkcFE-56" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1500" y="1660" />
              <mxPoint x="1500" y="1510" />
              <mxPoint x="1380" y="1510" />
              <mxPoint x="1380" y="1480" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-59" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;while(!toStop) :&lt;br&gt;&lt;/span&gt;retryFailCallbackFile();&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1320" y="1640" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-66" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-61" target="KZKVduNkzBJ_FhNbkcFE-65" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1740" y="1320" />
              <mxPoint x="1840" y="1320" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-61" value="&lt;font style=&quot;font-size: 10px&quot;&gt;for&amp;nbsp;XxlJobExecutor.&lt;b&gt;getAdminBizList&lt;/b&gt;()&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1640" y="1290" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-74" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-63" target="KZKVduNkzBJ_FhNbkcFE-56" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-63" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;for end&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1640" y="1540" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-69" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-65" target="KZKVduNkzBJ_FhNbkcFE-68" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-206KKTZnmEvFPcNaSRJ-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeWidth=1;elbow=vertical;fillColor=#d5e8d4;strokeColor=#82b366;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-65" target="-206KKTZnmEvFPcNaSRJ-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1970" y="1360" />
              <mxPoint x="1970" y="1060" />
              <mxPoint x="1240" y="1060" />
              <mxPoint x="1240" y="1037" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-65" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;callbackResult = &lt;b&gt;adminBiz&lt;/b&gt;.&lt;b&gt;callback&lt;/b&gt;(callbackParamList)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1740" y="1340" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-72" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-68" target="KZKVduNkzBJ_FhNbkcFE-71" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-68" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;callbackLog()&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1740" y="1400" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-73" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-71" target="KZKVduNkzBJ_FhNbkcFE-63" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-71" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;div&gt;if (!callbackRet) {&amp;nbsp; &lt;b&gt;appendFailCallbackFile&lt;/b&gt;(callbackParamList);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1740" y="1460" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-78" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-75" target="KZKVduNkzBJ_FhNbkcFE-77" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-75" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;embedServer = new EmbedServer()&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="960" y="1720" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-80" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-77" target="KZKVduNkzBJ_FhNbkcFE-79" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-77" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;embedServer.&lt;b&gt;start&lt;/b&gt;(address, port, appname, accessToken)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="960" y="1800" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-82" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-79" target="KZKVduNkzBJ_FhNbkcFE-81" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-79" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;executorBiz = new ExecutorBizImpl()&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1200" y="1800" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-84" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;dashed=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-81" target="KZKVduNkzBJ_FhNbkcFE-83" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-81" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;thread = new Thread();&lt;br&gt;thread.setDaemon(true);&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;thread.start();&lt;/span&gt;&lt;br&gt;&lt;font style=&quot;font-size: 9px&quot; color=&quot;#007fff&quot;&gt;启动一个守护者线程，线程里启动Netty服务端&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1200" y="1880" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-86" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-83" target="KZKVduNkzBJ_FhNbkcFE-85" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-83" value="&lt;font style=&quot;font-size: 10px&quot;&gt;run()&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1440" y="1890" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-88" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-85" target="KZKVduNkzBJ_FhNbkcFE-87" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-90" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;dashed=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-85" target="KZKVduNkzBJ_FhNbkcFE-89" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-85" value="&lt;font style=&quot;font-size: 10px&quot;&gt;Netty Server 启动&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1560" y="1890" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-92" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-87" target="KZKVduNkzBJ_FhNbkcFE-91" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-87" value="&lt;font style=&quot;font-size: 10px&quot;&gt;startRegistry(appname, address);&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1560" y="1960" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-89" value="&lt;font style=&quot;font-size: 10px&quot;&gt;new &lt;b&gt;EmbedHttpServerHandler&lt;/b&gt;(executorBiz, accessToken, bizThreadPool)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;消息处理器&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1760" y="1880" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-94" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;dashed=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-91" target="KZKVduNkzBJ_FhNbkcFE-93" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1980" y="1980" />
              <mxPoint x="1980" y="1690" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-91" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;ExecutorRegistryThread&lt;/b&gt;.getInstance()&lt;br&gt;.start(appname, address)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;将当前Executor注册到Admin&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1760" y="1960" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-104" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-93" target="KZKVduNkzBJ_FhNbkcFE-101" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2100" y="1690" />
              <mxPoint x="2100" y="1690" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-93" value="&lt;font style=&quot;font-size: 10px&quot;&gt;run()&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2000" y="1670" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-98" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-95" target="KZKVduNkzBJ_FhNbkcFE-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-95" value="&lt;font style=&quot;font-size: 9px&quot;&gt;RegistryParam registryParam = new &lt;b&gt;RegistryParam&lt;/b&gt;(&lt;br&gt;RegistryConfig.RegistType.EXECUTOR.name(), &lt;br&gt;appname, address)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2200" y="1730" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-100" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-97" target="KZKVduNkzBJ_FhNbkcFE-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-97" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;for XxlJobExecutor.getAdminBizList()&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#808080;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2220" y="1790" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-110" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-99" target="KZKVduNkzBJ_FhNbkcFE-109" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-116" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#00CC66;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-99" target="KZKVduNkzBJ_FhNbkcFE-117" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2460" y="1850" />
              <mxPoint x="2460" y="1210" />
              <mxPoint x="1240" y="1210" />
              <mxPoint x="1240" y="1173" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-99" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;ReturnT&amp;lt;String&amp;gt; registryResult = &lt;b&gt;adminBiz&lt;/b&gt;.&lt;b&gt;registry&lt;/b&gt;(registryParam);&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2220" y="1830" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-103" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-101" target="KZKVduNkzBJ_FhNbkcFE-95" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2200" y="1710" />
              <mxPoint x="2320" y="1710" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-101" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;while (!toStop)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2120" y="1680" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-108" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-105" target="KZKVduNkzBJ_FhNbkcFE-107" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-105" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;while end&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2120" y="2000" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-112" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-107" target="KZKVduNkzBJ_FhNbkcFE-93" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-107" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;服务退出，Executor 注销&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2120" y="2040" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-120" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-109" target="KZKVduNkzBJ_FhNbkcFE-119" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-109" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;TimeUnit.SECONDS&lt;br&gt;.sleep(RegistryConfig.BEAT_TIMEOUT)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2220" y="1890" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-113" value="每个心跳周期都执行一次注册&lt;br&gt;（既是注册又是心跳维持）" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2000" y="1750" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-124" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-117" target="KZKVduNkzBJ_FhNbkcFE-123" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-117" value="&lt;font style=&quot;font-size: 10px&quot;&gt;ReturnT&amp;lt;String&amp;gt; &lt;b&gt;registry&lt;/b&gt;(RegistryParam registryParam)&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;往Admin注册Exector&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1260" y="1135" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-121" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;curved=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-119" target="KZKVduNkzBJ_FhNbkcFE-105" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2320" y="1980" />
              <mxPoint x="2200" y="1980" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-119" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;for end&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#808080;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2220" y="1950" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-122" value="对应业务服务节点" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="180" y="210" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-123" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;XxlJobRemotingUtil.postBody(addressUrl + &quot;&lt;b&gt;api/registry&lt;/b&gt;&quot;, accessToken, timeout, registryParam, String.class)&lt;br&gt;&lt;/span&gt;&lt;font style=&quot;font-size: 9px&quot; color=&quot;#007fff&quot;&gt;通过JDK接口HttpURLConnection发送HTTP请求&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1500" y="1130" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-126" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;Executor启动阶段做的事：&lt;/b&gt;&lt;br&gt;&lt;ul&gt;&lt;li&gt;读取 @XxlJob指定的JobHandler 到 Executor Bean；&lt;/li&gt;&lt;li&gt;启动两个任务触发回调线程（其中一个是失败重试），线程对象有个任务队列&amp;nbsp;&lt;b style=&quot;text-align: center&quot;&gt;callBackQueue&lt;/b&gt;，以阻塞的方式从队列取回调任务执行，执行失败就加入重试；&lt;/li&gt;&lt;li&gt;启动Netty 服务端，通过&amp;nbsp;&lt;b&gt;EmbedHttpServerHandler&amp;nbsp;&lt;/b&gt;处理TCP请求;&lt;/li&gt;&lt;li&gt;将当前Executor基本信息注册到Admin (且每个心跳周期都会通过HTTP发送一次注册);&amp;nbsp;&lt;/li&gt;&lt;/ul&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="320" y="200" width="440" height="100" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-130" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;curved=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-127" target="KZKVduNkzBJ_FhNbkcFE-129" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-127" value="&lt;font&gt;&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;void &lt;b&gt;channelRead0&lt;/b&gt;(final ChannelHandlerContext ctx, FullHttpRequest msg)&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;也是用的HTTP协议通信，&lt;br&gt;Netty官方已经支持了HTTP协议的编解码&lt;/font&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="960" y="2040" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-132" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-129" target="KZKVduNkzBJ_FhNbkcFE-131" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-129" value="&lt;font style=&quot;font-size: 8px&quot;&gt;&lt;div&gt;String requestData = msg.content().toString(CharsetUtil.UTF_8);&lt;/div&gt;&lt;div&gt;String uri = msg.uri();&lt;/div&gt;&lt;div&gt;HttpMethod httpMethod = msg.method();&lt;/div&gt;&lt;div&gt;boolean keepAlive = HttpUtil.isKeepAlive(msg);&lt;/div&gt;&lt;div&gt;String accessTokenReq = msg.headers().get(XxlJobRemotingUtil.XXL_JOB_ACCESS_TOKEN);&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1200" y="2040" width="260" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-134" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;dashed=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-131" target="KZKVduNkzBJ_FhNbkcFE-133" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-131" value="&lt;font style=&quot;font-size: 10px&quot;&gt;bizThreadPool.execute(...)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;消息处理在线程池中执行&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1220" y="2140" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-136" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-133" target="KZKVduNkzBJ_FhNbkcFE-135" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-133" value="&lt;div&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;run()&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1480" y="2140" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-138" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-135" target="KZKVduNkzBJ_FhNbkcFE-137" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-142" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-135" target="KZKVduNkzBJ_FhNbkcFE-141" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-135" value="&lt;div&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;Object responseObj = &lt;b&gt;process&lt;/b&gt;(httpMethod, uri, requestData, accessTokenReq)&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1600" y="2140" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-137" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;String responseJson = GsonTool.toJson(responseObj);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;&lt;b&gt;writeResponse&lt;/b&gt;(ctx, keepAlive, responseJson);&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1600" y="2200" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-144" value="/beat" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-141" target="KZKVduNkzBJ_FhNbkcFE-143" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-145" value="/idleBeat" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-141" target="KZKVduNkzBJ_FhNbkcFE-146" edge="1">
          <mxGeometry y="20" relative="1" as="geometry">
            <mxPoint x="1950" y="2210" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-150" value="/run" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-141" target="KZKVduNkzBJ_FhNbkcFE-147" edge="1">
          <mxGeometry x="0.3333" y="20" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-151" value="/kill" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-141" target="KZKVduNkzBJ_FhNbkcFE-148" edge="1">
          <mxGeometry x="0.5094" y="20" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-152" value="/log" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-141" target="KZKVduNkzBJ_FhNbkcFE-149" edge="1">
          <mxGeometry x="0.65" y="20" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-141" value="uri ?" style="rhombus;whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1840" y="2120" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-154" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-143" target="KZKVduNkzBJ_FhNbkcFE-153" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-143" value="&lt;font style=&quot;font-size: 10px&quot;&gt;executorBiz.beat()&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2000" y="2140" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-146" value="&lt;font style=&quot;font-size: 10px&quot;&gt;executorBiz.idleBeat(idleBeatParam)&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2000" y="2220" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-156" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-147" target="KZKVduNkzBJ_FhNbkcFE-155" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-147" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;executorBiz.run(triggerParam)&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;执行任务，triggerParam从msg中解析出来&lt;/font&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2000" y="2300" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-148" value="&lt;font style=&quot;font-size: 10px&quot;&gt;executorBiz.kill(killParam)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;关闭任务执行，找到此任务对应的工作者线程，中断线程执行&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2000" y="2378" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-149" value="&lt;font style=&quot;font-size: 10px&quot;&gt;executorBiz.log(logParam)&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2000" y="2460" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-153" value="&lt;font style=&quot;font-size: 10px&quot;&gt;return ReturnT.SUCCESS;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2240" y="2140" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-160" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-155" target="KZKVduNkzBJ_FhNbkcFE-159" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-155" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;JobThread &lt;b&gt;jobThread&lt;/b&gt; = XxlJobExecutor&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;.loadJobThread(triggerParam.getJobId());&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;IJobHandler &lt;b&gt;jobHandler&lt;/b&gt; = jobThread!=null?jobThread.getHandler():null;&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2240" y="2280" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-157" value="&lt;p style=&quot;margin: 4px 0px 0px ; text-align: center&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;u&gt;&lt;b&gt;TriggerParam&lt;/b&gt; 触发任务执行传参&lt;/u&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private int jobId;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;private String executorHandler; &lt;/font&gt;//IJobHandler 实例名称，比如 MethodJobHandler&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;private String executorParams;&amp;nbsp; &lt;/font&gt;//任务传参&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private String executorBlockStrategy;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private int executorTimeout;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private long logId;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private long logDateTime;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private String glueType;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private String glueSource;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private long glueUpdatetime;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private int broadcastIndex;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private int broadcastTotal;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="-440" y="620" width="400" height="220" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-158" value="ExecutorBizImpl" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2055" y="2280" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-162" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-159" target="KZKVduNkzBJ_FhNbkcFE-161" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-159" value="&lt;font&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;GlueTypeEnum glueTypeEnum = GlueTypeEnum&lt;br&gt;.match(triggerParam.getGlueType())&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2240" y="2378" width="200" height="42" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-164" value="BEAN" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-161" target="KZKVduNkzBJ_FhNbkcFE-163" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-166" value="GLUE_GROOVY" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-161" target="KZKVduNkzBJ_FhNbkcFE-165" edge="1">
          <mxGeometry x="1" y="31" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2460" y="2480" />
              <mxPoint x="2460" y="2561" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-168" value="glueTypeEnum.isScript()" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-161" target="KZKVduNkzBJ_FhNbkcFE-167" edge="1">
          <mxGeometry x="1" y="33" relative="1" as="geometry">
            <mxPoint x="10" y="2" as="offset" />
            <Array as="points">
              <mxPoint x="2440" y="2480" />
              <mxPoint x="2440" y="2651" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-172" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-161" target="KZKVduNkzBJ_FhNbkcFE-171" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-161" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;glueTypeEnum&lt;/span&gt;&lt;br&gt;&lt;font style=&quot;font-size: 8px&quot; color=&quot;#007fff&quot;&gt;如果首次触发或者参数有变化，就更新jobHandler 和 jobThread&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2280" y="2440" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-163" value="&lt;font&gt;&lt;font&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;IJobHandler &lt;/span&gt;&lt;b style=&quot;font-size: 11px&quot;&gt;newJobHandler&lt;/b&gt;&lt;span style=&quot;font-size: 11px&quot;&gt; = XxlJobExecutor.&lt;/span&gt;&lt;b style=&quot;font-size: 11px&quot;&gt;loadJobHandler&lt;/b&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;triggerParam.getExecutorHandler())&lt;/span&gt;&lt;br&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#007fff&quot;&gt;读取之前扫埋 @XxlJob注解时注册的MethodJobHandler&lt;/font&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2500" y="2442" width="200" height="76" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-165" value="&lt;font&gt;TODO&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2500" y="2540" width="200" height="42" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-167" value="&lt;font&gt;TODO&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2500" y="2630" width="200" height="42" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-174" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-171" target="KZKVduNkzBJ_FhNbkcFE-173" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-180" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-171" target="KZKVduNkzBJ_FhNbkcFE-179" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-171" value="&lt;font style=&quot;font-size: 9px&quot;&gt;&lt;div&gt;if (jobThread == null) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; jobThread = XxlJobExecutor.&lt;b&gt;registJobThread&lt;/b&gt;(&lt;br&gt;triggerParam.getJobId(), jobHandler, removeOldReason);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;前面如果jobHandler有变化，会将jobThread引用置空，这一步再重新注册,并启动JobThread对象&lt;/font&gt;&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2220" y="2690" width="240" height="80" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-178" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-173" target="KZKVduNkzBJ_FhNbkcFE-177" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-173" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;span style=&quot;font-size: x-small&quot;&gt;ReturnT&amp;lt;String&amp;gt; pushResult = jobThread.&lt;b&gt;pushTriggerQueue&lt;/b&gt;(triggerParam);&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=left;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2220" y="2780" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-190" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#82b366;elbow=vertical;fillColor=#d5e8d4;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-177" target="KZKVduNkzBJ_FhNbkcFE-188" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-191" value="添加任务" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#007FFF;" parent="KZKVduNkzBJ_FhNbkcFE-190" vertex="1" connectable="0">
          <mxGeometry x="0.2625" y="5" relative="1" as="geometry">
            <mxPoint x="-77" y="-35" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-177" value="&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;div&gt;&lt;b&gt;triggerLogIdSet&lt;/b&gt;.add(triggerParam.getLogId());&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;&lt;b&gt;triggerQueue&lt;/b&gt;.add(triggerParam);&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;触发参数加入工作者线程的无界阻塞队列&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2500" y="2780" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-182" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;dashed=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-179" target="KZKVduNkzBJ_FhNbkcFE-181" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-206KKTZnmEvFPcNaSRJ-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;strokeWidth=1;elbow=vertical;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-179" target="-206KKTZnmEvFPcNaSRJ-16" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2765" y="2750" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-179" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;JobThread newJobThread = new &lt;b&gt;JobThread&lt;/b&gt;(jobId, handler);&lt;/div&gt;&lt;div&gt;newJobThread.start();&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2500" y="2710" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-184" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-181" target="KZKVduNkzBJ_FhNbkcFE-183" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-181" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;run()&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;任务异步处理&lt;/font&gt;&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2780" y="2710" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-186" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-183" target="KZKVduNkzBJ_FhNbkcFE-185" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-183" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;handler.init();&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=center;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2920" y="2710" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-189" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-185" target="KZKVduNkzBJ_FhNbkcFE-188" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2980" y="2800" />
              <mxPoint x="3080" y="2800" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-185" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;while(!toStop) start&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=center;fillColor=#CFCFCF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2920" y="2770" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-210" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-188" target="KZKVduNkzBJ_FhNbkcFE-209" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-188" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;triggerParam = &lt;b&gt;triggerQueue&lt;/b&gt;.poll(3L, TimeUnit.SECONDS);&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2980" y="2820" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-193" value="&lt;font style=&quot;font-size: 12px&quot;&gt;任务处理逻辑：&lt;br&gt;1）从队列获取任务，根据是否有设置超时时间，选择在该线程中执行还是新建线程异步执行&lt;br&gt;2）当工作者线程连续30次空循环且队列为空，就中断工作者线程（下次触发前面步骤判断线程为空会新建，没有问题）&lt;br&gt;3）任务正常执行、执行异常、或线程被中断但还有任务没处理，都添加回调任务到&amp;nbsp;&lt;span style=&quot;text-align: center&quot;&gt;TriggerCallbackThread 队列&lt;/span&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="3080" y="2700" width="440" height="110" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-196" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-194" target="KZKVduNkzBJ_FhNbkcFE-195" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-194" value="&lt;font size=&quot;1&quot;&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font size=&quot;1&quot;&gt;while end &lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;(线程空闲超30次或服务被关闭, 退出循环并中断线程)&lt;/font&gt;&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=center;fillColor=#CFCFCF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2920" y="3200" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-199" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-195" target="KZKVduNkzBJ_FhNbkcFE-198" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-201" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-195" target="KZKVduNkzBJ_FhNbkcFE-200" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-195" value="&lt;font style=&quot;font-size: 9px&quot;&gt;&lt;div&gt;线程收尾处理，如果&amp;nbsp;triggerQueue还有任务未处理，执行&lt;br&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;TriggerCallbackThread.pushCallBack(new HandleCallbackParam(...)&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=center;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2880" y="3250" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-198" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;handler.destroy();&lt;br&gt;&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=center;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2920" y="3320" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-203" value="队列数据来源" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#82b366;elbow=vertical;fillColor=#d5e8d4;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-200" target="KZKVduNkzBJ_FhNbkcFE-52" edge="1">
          <mxGeometry x="0.9352" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3340" y="3275" />
              <mxPoint x="3340" y="1390" />
              <mxPoint x="1550" y="1390" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-200" value="&lt;font&gt;&lt;div&gt;&lt;font size=&quot;1&quot;&gt;getInstance().&lt;b&gt;callBackQueue&lt;br&gt;&lt;/b&gt;.add(callback);&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="3120" y="3255" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-202" value="TriggerCallbackThread" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="3165" y="3235" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-205" value="&lt;font style=&quot;font-size: 10px&quot;&gt;回调是指回调xxl-job-admin的接口&lt;br&gt;回调任务包括：&lt;br&gt;1）任务线程被中断存在未及时处理的任务的回调&lt;br&gt;2）任务正常执行结果的回调&lt;br&gt;3）任务异常执行结果的回调&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1070" y="1340" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-206" value="JobThread" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2790" y="2690" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-214" value="Y，即有任务触发" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;curved=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-209" target="KZKVduNkzBJ_FhNbkcFE-213" edge="1">
          <mxGeometry y="20" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3150" y="2930" />
              <mxPoint x="3150" y="2900" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-216" value="N，没有任务触发，poll超时走到这个" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;curved=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-209" target="KZKVduNkzBJ_FhNbkcFE-215" edge="1">
          <mxGeometry x="0.1189" y="30" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3150" y="2930" />
              <mxPoint x="3150" y="3023" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-218" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-209" target="KZKVduNkzBJ_FhNbkcFE-217" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-209" value="&lt;font style=&quot;font-size: 10px&quot;&gt;triggerParam!=null&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="3030" y="2910" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-227" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-213" target="KZKVduNkzBJ_FhNbkcFE-226" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-228" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-213" target="KZKVduNkzBJ_FhNbkcFE-225" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-213" value="&lt;font style=&quot;font-size: 10px&quot;&gt;如果任务有设置超时时间，则封装成一个FutureTask和新线程异步执行，否则立即执行&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="3180" y="2880" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-206KKTZnmEvFPcNaSRJ-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;strokeWidth=1;elbow=vertical;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-215" target="-206KKTZnmEvFPcNaSRJ-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-215" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;if (idleTimes &amp;gt; 30 &amp;amp;&amp;amp;&amp;nbsp;triggerQueue.size() == 0 )&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;XxlJobExecutor.&lt;b&gt;removeJobThread&lt;/b&gt;(jobId, ...)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="3180" y="3003" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-220" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-217" target="KZKVduNkzBJ_FhNbkcFE-219" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-217" value="&lt;font style=&quot;font-size: 10px&quot;&gt;catch:&amp;nbsp;&lt;br&gt;XxlJobHelper.handleFail(errorMsg)&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="3000" y="3050" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-222" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-219" target="KZKVduNkzBJ_FhNbkcFE-200" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-223" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="-lWm-qoocMC7RLlnJny9-1" source="KZKVduNkzBJ_FhNbkcFE-219" target="KZKVduNkzBJ_FhNbkcFE-194" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3080" y="3180" />
              <mxPoint x="2980" y="3180" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-219" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;finally:&amp;nbsp;&lt;/span&gt;&lt;br&gt;&lt;span&gt;if(triggerParam != null)&lt;br&gt;&lt;/span&gt;TriggerCallbackThread.pushCallBack(...)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;不管正常或异常都会添加回调任务&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2980" y="3110" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-225" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;记录结果日志&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;XxlJobHelper.log(...)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="3180" y="2940" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-226" value="&lt;font style=&quot;font-size: 10px&quot;&gt;handler.execute();&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="3360" y="2880" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-232" value="&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 12px&quot;&gt;主要逻辑：&lt;br&gt;1) 接收Netty客户端（就是xxl-job-admin）请求，针对不同uri做不同处理;&lt;br&gt;2) 如果是触发定时任务执行，就新建（如果已存在就复用） JobThread 并查找对应的 JobHandler，并启动线程（如果已存在就复用），最后提交定时任务到队列 &lt;b&gt;JobThread.triggerQueue&lt;/b&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#808080;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1600" y="2260" width="310" height="100" as="geometry" />
        </mxCell>
        <mxCell id="KZKVduNkzBJ_FhNbkcFE-235" value="注册本Executro节点到 Admin" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2000" y="1725" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-206KKTZnmEvFPcNaSRJ-0" value="&lt;b&gt;主要是里面 @XxlJob 注解的方法，&lt;br&gt;后面会被注册为任务处理器&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=11;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="205" y="325" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-206KKTZnmEvFPcNaSRJ-2" value="&lt;p style=&quot;margin: 4px 0px 0px ; text-align: center&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;b&gt;@XxlJob &lt;/b&gt;&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;u&gt;通过方法定义 MethodJobHandler&lt;/u&gt;&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;String value(); &lt;/font&gt;//JobHandler名称&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;String init() default &quot;&quot;;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;String destroy() default &quot;&quot;;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="-800" y="240" width="320" height="80" as="geometry" />
        </mxCell>
        <mxCell id="-206KKTZnmEvFPcNaSRJ-4" value="这里展示的是 &lt;b&gt;MethodJobHandler&lt;/b&gt;的注册流程&lt;br&gt;&lt;br&gt;另外两种（GlueJobHandler、ScriptJobHandler）参考：xxl-job-admin中的实现" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="530" y="640" width="150" height="100" as="geometry" />
        </mxCell>
        <mxCell id="-206KKTZnmEvFPcNaSRJ-6" value="&lt;p style=&quot;margin: 4px 0px 0px ; text-align: center&quot;&gt;&lt;font&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;u&gt;&lt;b&gt;MethodJobHandler &lt;/b&gt;extends IJobHandler&lt;/u&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private final Object target;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private final Method method;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private Method initMethod;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private Method destroyMethod;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="-800" y="360" width="320" height="110" as="geometry" />
        </mxCell>
        <mxCell id="-206KKTZnmEvFPcNaSRJ-8" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;ReturnT&amp;lt;String&amp;gt; &lt;b&gt;registryRemove&lt;/b&gt;(RegistryParam registryParam)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1260" y="1070" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-206KKTZnmEvFPcNaSRJ-9" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;ReturnT&amp;lt;String&amp;gt; &lt;b&gt;callback&lt;/b&gt;(List&amp;lt;HandleCallbackParam&amp;gt; callbackParamList)&amp;nbsp;&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1260" y="1000" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-206KKTZnmEvFPcNaSRJ-15" value="从xxl-job-callback-{x}.log中取出失败的回调重试" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="1450" y="1660" width="230" height="20" as="geometry" />
        </mxCell>
        <mxCell id="-206KKTZnmEvFPcNaSRJ-16" value="&lt;font style=&quot;font-size: 12px&quot;&gt;看来每个任务（比如demoJobHandler）执行时都会在&lt;b&gt;专属的 JobThread 线程&lt;/b&gt;中执行，如果任务触发不频繁（大于30s），线程超时会释放，下次触发再重建，但是&lt;b&gt;如果有大量任务且都触发很频繁的话，应该会积压很多线程&lt;/b&gt;，这时xxl-job 可能会有问题，不过我是没见到这种场景，万一碰到这种情况使用 ElasticJob代替&lt;br&gt;Xxx-Job&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="-lWm-qoocMC7RLlnJny9-1" vertex="1">
          <mxGeometry x="2610" y="2880" width="250" height="120" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="FjCYESVtWtLVUpIMTeuN" name="xxl-job-admin">
    <mxGraphModel dx="2721" dy="1175" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="OSpAHNJ8Lpkp76DFQ3Wi-11" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=10;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="1240" y="870" width="1800" height="870" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;curved=1;" parent="1" source="toSJOTEez4pn9fF8W7Rf-23" target="L3x8PkFCvonlR5Kohttu-102" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1970" y="1960" />
              <mxPoint x="1970" y="1231" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="mrdwPyX3-eENtZlFChnA-1" value="&lt;h1&gt;XXL-job-admin 工作流程图 &lt;span style=&quot;font-weight: normal&quot;&gt;&lt;font style=&quot;font-size: 18px&quot;&gt;（2.3.1）&lt;/font&gt;&lt;/span&gt;&lt;/h1&gt;&lt;div&gt;&lt;/div&gt;任务调度中心。(黄色节点：核心节点，蓝色节点：重要节点，绿色节点：底层或交互节点)&lt;br&gt;源码比较简单，有些细节不细说了&lt;br&gt;&lt;p&gt;&lt;b&gt;前置知识：&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Spring (SmartInitializingSingleton、MethodIntrospector)&lt;br&gt;&lt;/li&gt;&lt;li&gt;Netty&amp;nbsp;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="40" y="20" width="560" height="160" as="geometry" />
        </mxCell>
        <mxCell id="FFJPpEh5o4AvgVyiyg4f-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#E6D0DE;strokeColor=#000000;elbow=vertical;curved=1;" parent="1" source="eogpY33OZBlcC0yd0O9i-1" target="FFJPpEh5o4AvgVyiyg4f-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eogpY33OZBlcC0yd0O9i-1" value="xxl-job-admin" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="200" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FFJPpEh5o4AvgVyiyg4f-8" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="FFJPpEh5o4AvgVyiyg4f-3" target="FFJPpEh5o4AvgVyiyg4f-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-61" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="FFJPpEh5o4AvgVyiyg4f-3" target="L3x8PkFCvonlR5Kohttu-60" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FFJPpEh5o4AvgVyiyg4f-3" value="XxlJobAdminConfig" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="40" y="280" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FFJPpEh5o4AvgVyiyg4f-5" value="&lt;font style=&quot;font-size: 10px&quot;&gt;搜索@Configuration @Component 等逻辑找到核心Bean&amp;nbsp;XxlJobAdminConfig, 其他都是不太重要的Bean&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="120" y="250" width="470" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FFJPpEh5o4AvgVyiyg4f-10" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="FFJPpEh5o4AvgVyiyg4f-7" target="FFJPpEh5o4AvgVyiyg4f-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FFJPpEh5o4AvgVyiyg4f-7" value="&lt;font style=&quot;font-size: 10px&quot;&gt;Bean实例化 &amp;lt;init&amp;gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="280" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FFJPpEh5o4AvgVyiyg4f-12" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="FFJPpEh5o4AvgVyiyg4f-9" target="FFJPpEh5o4AvgVyiyg4f-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FFJPpEh5o4AvgVyiyg4f-9" value="afterPropertiesSet()&lt;br&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#007fff&quot;&gt;执行InitializingBean初始化方法&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="340" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-3" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="FFJPpEh5o4AvgVyiyg4f-11" target="L3x8PkFCvonlR5Kohttu-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FFJPpEh5o4AvgVyiyg4f-11" value="&lt;font style=&quot;font-size: 10px&quot;&gt;xxlJobScheduler = new &lt;b&gt;XxlJobScheduler&lt;/b&gt;()&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="440" y="340" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-1" value="&lt;p style=&quot;margin: 4px 0px 0px ; text-align: center ; text-decoration: underline&quot;&gt;&lt;font&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;XxlJobAdminConfig&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;xxlJobScheduler&lt;/b&gt; = {XxlJobScheduler@7781}&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;i18n = &quot;zh_CN&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;accessToken = &quot;default_token&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;emailFrom = &quot;xxx@qq.com&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;triggerPoolFastMax&lt;/b&gt; = 200&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;triggerPoolSlowMax&lt;/b&gt; = 100&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;logretentiondays = 30&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;xxlJobLogDao&lt;/b&gt; = {$Proxy77@6624}&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;xxlJobInfoDao&lt;/b&gt; = {$Proxy76@6625}&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;xxlJobRegistryDao&lt;/b&gt; = {$Proxy81@6626}&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;xxlJobGroupDao&lt;/b&gt; = {$Proxy75@6627}&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;xxlJobLogReportDao&lt;/b&gt; = {$Proxy79@6628}&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;mailSender = {JavaMailSenderImpl@6629}&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;dataSource = {HikariDataSource@6630} &quot;HikariDataSource (null)&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;jobAlarmer&lt;/b&gt; = {JobAlarmer@6631}&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="-400" y="240" width="360" height="260" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-5" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-2" target="L3x8PkFCvonlR5Kohttu-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-2" value="&lt;font style=&quot;font-size: 10px&quot;&gt;xxlJobScheduler.&lt;b&gt;init&lt;/b&gt;()&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="440" y="400" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-7" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-4" target="L3x8PkFCvonlR5Kohttu-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-4" value="&lt;font style=&quot;font-size: 10px&quot;&gt;initI18n();&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;国际化相关&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="400" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-9" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-6" target="L3x8PkFCvonlR5Kohttu-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-19" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-6" target="L3x8PkFCvonlR5Kohttu-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-6" value="&lt;font&gt;&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;JobTriggerPoolHelper&lt;/b&gt;.toStart();&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;创建两个用于&amp;nbsp; 的线程池&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="640" y="460" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-11" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-8" target="L3x8PkFCvonlR5Kohttu-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-21" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-8" target="L3x8PkFCvonlR5Kohttu-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-8" value="&lt;font&gt;&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;JobRegistryHelper&lt;/b&gt;.getInstance().start();&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;创建一个用于 的线程池&lt;br&gt;和一个&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 127 , 255) ; font-size: 10px&quot;&gt;注册&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;监控&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 127 , 255) ; font-size: 10px&quot;&gt;的守护&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;线程并启动&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="630" y="520" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-13" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-10" target="L3x8PkFCvonlR5Kohttu-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-23" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-10" target="L3x8PkFCvonlR5Kohttu-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-10" value="&lt;font&gt;&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;JobFailMonitorHelper&lt;/b&gt;.getInstance().start();&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;创建一个用于 的守护线程并启动&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="620" y="640" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-15" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-12" target="L3x8PkFCvonlR5Kohttu-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-35" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-12" target="L3x8PkFCvonlR5Kohttu-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-12" value="&lt;font&gt;&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;JobCompleteHelper&lt;/b&gt;.getInstance().start();&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;创建一个用于 的线程池&lt;br&gt;和一个&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 127 , 255) ; font-size: 10px&quot;&gt;的守护&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;线程并启动&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="620" y="700" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-17" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-14" target="L3x8PkFCvonlR5Kohttu-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-43" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-14" target="L3x8PkFCvonlR5Kohttu-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-14" value="&lt;font&gt;&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;JobLogReportHelper&lt;/b&gt;.getInstance().start();&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 127 , 255) ; font-size: 10px&quot;&gt;创建一个用于 的守护线程并启动&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="620" y="820" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-49" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-16" target="L3x8PkFCvonlR5Kohttu-48" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-16" value="&lt;font&gt;&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;JobScheduleHelper&lt;/b&gt;.getInstance().start();&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 127 , 255) ; font-size: 10px&quot;&gt;创建两个守护进程，一个用于 ，另一个用于&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="620" y="880" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-18" value="&lt;font style=&quot;font-size: 9px&quot;&gt;&lt;b&gt;fastTriggerPool&lt;/b&gt; = new ThreadPoolExecutor(...);&lt;br&gt;&lt;b&gt;slowTriggerPool&lt;/b&gt;&amp;nbsp;= new ThreadPoolExecutor(...);&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;采用LinkedBlockingQueue存储任务，&lt;br&gt;指定了容量避免内存溢出；使用默认的拒绝策略&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="880" y="450" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-25" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-20" target="L3x8PkFCvonlR5Kohttu-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-20" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;registryOrRemoveThreadPool&lt;/b&gt; = new ThreadPoolExecutor(...);&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="880" y="520" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-29" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;dashed=1;" parent="1" source="L3x8PkFCvonlR5Kohttu-22" target="L3x8PkFCvonlR5Kohttu-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-22" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;monitorThread&lt;/b&gt; = new Thread(...)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="890" y="640" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-27" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;dashed=1;" parent="1" source="L3x8PkFCvonlR5Kohttu-24" target="L3x8PkFCvonlR5Kohttu-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-24" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;registryMonitorThread&lt;/b&gt; = new Thread(...);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;执行器注册表定时刷新&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="880" y="580" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-31" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-26" target="L3x8PkFCvonlR5Kohttu-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-26" value="&lt;font style=&quot;font-size: 10px&quot;&gt;run()&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1140" y="580" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-33" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-28" target="L3x8PkFCvonlR5Kohttu-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-28" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;run()&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1140" y="640" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-30" value="&lt;font style=&quot;font-size: 10px&quot;&gt;每30秒执行一次，从执行器注册表&amp;nbsp;xxl_job_registry 删除死掉的执行器，刷新还活着的执行器实例数据表中的地址列表信息&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;" parent="1" vertex="1">
          <mxGeometry x="1260" y="580" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-32" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;每10秒执行一次，扫描&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;xxl_job_log 中记录的执行失败的任务，如果还有重试次数就重试执行，如果任务的XxlJobInfo信息存在则&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;执行告警并更新告警状态&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;" parent="1" vertex="1">
          <mxGeometry x="1260" y="630" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-37" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-34" target="L3x8PkFCvonlR5Kohttu-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-34" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;callbackThreadPool&lt;/b&gt; = new ThreadPoolExecutor(...)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="890" y="700" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-41" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;dashed=1;" parent="1" source="L3x8PkFCvonlR5Kohttu-36" target="L3x8PkFCvonlR5Kohttu-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-36" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;monitorThread&lt;/b&gt; = new Thread(...)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="890" y="760" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-38" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-39" target="L3x8PkFCvonlR5Kohttu-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-39" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;run()&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1140" y="760" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-40" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;每60秒执行一次，扫描 xxl_job_log 中&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;调度记录停留在 &quot;运行中&quot; 状态超过10min，且对应执行器心跳注册失败不在线，则将本地调度主动标记失败&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;" parent="1" vertex="1">
          <mxGeometry x="1259.5" y="750" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-47" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;dashed=1;" parent="1" source="L3x8PkFCvonlR5Kohttu-42" target="L3x8PkFCvonlR5Kohttu-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-42" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;logrThread&lt;/b&gt; = new Thread(...)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="890" y="820" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-44" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-45" target="L3x8PkFCvonlR5Kohttu-46" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-45" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;run()&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1141" y="820" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-46" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;每分钟执行一次，从xxl_job_log 中统计今天调用成功、失败、执行中的任务的数量，更新到&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;xxl_job_log_report&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1261" y="820" width="219" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-51" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-48" target="L3x8PkFCvonlR5Kohttu-50" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-58" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;dashed=1;" parent="1" source="L3x8PkFCvonlR5Kohttu-48" target="L3x8PkFCvonlR5Kohttu-53" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-48" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;scheduleThread&lt;/b&gt; = new Thread(...)&lt;br&gt;&lt;/span&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#007fff&quot;&gt;任务调度线程&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="900" y="880" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-59" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;dashed=1;" parent="1" source="L3x8PkFCvonlR5Kohttu-50" target="L3x8PkFCvonlR5Kohttu-56" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-50" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;ringThread&lt;/b&gt; = new Thread(...)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="901" y="1760" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-52" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-53" target="L3x8PkFCvonlR5Kohttu-54" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-53" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;run()&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1141" y="880" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-65" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-54" target="L3x8PkFCvonlR5Kohttu-64" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-54" value="&lt;font style=&quot;font-size: 8px&quot;&gt;&lt;span&gt;先睡眠个4~5s，然后计算preReadCount = (&lt;/span&gt;&lt;b style=&quot;text-align: left&quot;&gt;triggerPoolFastMax +&amp;nbsp;&lt;/b&gt;&lt;b style=&quot;text-align: left&quot;&gt;triggerPoolSlowMax&lt;/b&gt;&lt;span&gt;&lt;br&gt;) * 20&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1261" y="880" width="179" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-55" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-56" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1261" y="1780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-56" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;run()&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1141" y="1760" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-60" value="HTTP请求" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="40" y="1000" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-68" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-64" target="L3x8PkFCvonlR5Kohttu-67" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1351" y="970" />
              <mxPoint x="1440" y="970" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-64" value="&lt;font&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;while (!scheduleThreadToStop)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D6D6D6;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1261" y="940" width="179" height="20" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-66" value="&lt;font&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;while end&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D6D6D6;" parent="1" vertex="1">
          <mxGeometry x="1261" y="1657.3" width="179" height="20" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-71" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-67" target="L3x8PkFCvonlR5Kohttu-70" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-67" value="&lt;font&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;开启事务 &lt;br&gt;使用 select for update 加&lt;b&gt;记录锁&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1350" y="990" width="179" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-77" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-70" target="L3x8PkFCvonlR5Kohttu-76" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-70" value="&lt;font style=&quot;font-size: 8px&quot;&gt;&lt;span&gt;List&amp;lt;XxlJobInfo&amp;gt; scheduleList = XxlJobAdminConfig.getAdminConfig().getXxlJobInfoDao()&lt;br&gt;.scheduleJobQuery(nowTime + PRE_READ_MS, preReadCount);&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;批量查询调度状态为“可调度”且（到期还未调度或将在5s内调度）的任务&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1320" y="1050" width="240" height="70" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-73" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=8;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-72" target="L3x8PkFCvonlR5Kohttu-66" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1440" y="1640" />
              <mxPoint x="1349" y="1640" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-72" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;如果上面步骤耗时&amp;lt;1000ms，若前面读取任务列表不为空，则继续睡眠0～1s,然后读取下一批，否则说明这4秒多时间内没有任务可执行睡4～5秒&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1350.5" y="1577.3" width="179" height="52.7" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-75" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-74" target="L3x8PkFCvonlR5Kohttu-72" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-80" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-74" target="L3x8PkFCvonlR5Kohttu-72" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-74" value="&lt;font&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;结束事务 并 恢复之前的自动提交状态&lt;br&gt;即释放&lt;b&gt;记录锁&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;关闭连接和Statement&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1350.5" y="1517.3" width="179" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-82" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-76" target="L3x8PkFCvonlR5Kohttu-81" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-76" value="&lt;font style=&quot;font-size: 10px&quot;&gt;for&amp;nbsp;scheduleList&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D6D6D6;" parent="1" vertex="1">
          <mxGeometry x="1350.5" y="1129" width="179" height="21" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-79" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-78" target="L3x8PkFCvonlR5Kohttu-74" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-78" value="&lt;font style=&quot;font-size: 10px&quot;&gt;for end&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D6D6D6;" parent="1" vertex="1">
          <mxGeometry x="1350" y="1477.3" width="179" height="21" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-86" value="&lt;font style=&quot;font-size: 8px&quot;&gt;大于下次触发&lt;br&gt;时间+5s，&lt;br&gt;即本该上次调度执行的任务&lt;br&gt;错过上次触发的任务&lt;br&gt;&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-81" target="L3x8PkFCvonlR5Kohttu-85" edge="1">
          <mxGeometry x="0.0006" y="10" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1560" y="1240" />
              <mxPoint x="1560" y="1121" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-88" value="&lt;font style=&quot;font-size: 8px&quot;&gt;大于下次触发时间&lt;br&gt;但是小于下次触发时间+5s&lt;br&gt;即本次应该触发执行的任务&lt;br&gt;&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-81" target="L3x8PkFCvonlR5Kohttu-87" edge="1">
          <mxGeometry x="0.1132" y="20" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1560" y="1240" />
              <mxPoint x="1560" y="1300" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-90" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-81" target="L3x8PkFCvonlR5Kohttu-89" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1560" y="1240" />
              <mxPoint x="1560" y="1580" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-91" value="&lt;font style=&quot;font-size: 8px&quot;&gt;小于下次触发时间，&lt;br&gt;即还没到触发时间&lt;br&gt;&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#007FFF;" parent="L3x8PkFCvonlR5Kohttu-90" vertex="1" connectable="0">
          <mxGeometry x="0.0943" y="-2" relative="1" as="geometry">
            <mxPoint x="22" y="88" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-100" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-81" target="L3x8PkFCvonlR5Kohttu-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-81" value="&lt;font style=&quot;font-size: 10px&quot;&gt;nowTime ?&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1399.5" y="1200" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-95" value="&lt;font style=&quot;font-size: 7px&quot;&gt;FIRE_ONCE_NOW&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-85" target="L3x8PkFCvonlR5Kohttu-94" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-98" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=7;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-85" target="L3x8PkFCvonlR5Kohttu-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-85" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;jobInfo.getMisfireStrategy()&lt;/span&gt;&lt;br&gt;&lt;font style=&quot;font-size: 8px&quot; color=&quot;#007fff&quot;&gt;获取MisFire策略，如果是DO_NOTHING就什么都不做，如果是FIRE_ONCE_NOW就立即触发一次&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1600" y="1091" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="0hqkEQ851FuDCjZB_4US-4" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-87" target="0hqkEQ851FuDCjZB_4US-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="OSpAHNJ8Lpkp76DFQ3Wi-9" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-87" target="L3x8PkFCvonlR5Kohttu-102" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1920" y="1300" />
              <mxPoint x="1920" y="1231" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-87" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;JobTriggerPoolHelper&lt;/b&gt;.&lt;b&gt;trigger&lt;/b&gt;(jobInfo.getId(), TriggerTypeEnum.CRON, -1, null, null, null)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;直接触发执行&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1600" y="1280" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OSpAHNJ8Lpkp76DFQ3Wi-3" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-89" target="OSpAHNJ8Lpkp76DFQ3Wi-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-89" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp;ringSecond = (int)((jobInfo.getTriggerNextTime()/1000)%60);&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1600" y="1560" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-92" value="&lt;p style=&quot;margin: 4px 0px 0px ; text-align: center&quot;&gt;&lt;font&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;u&gt;XxlJobInfo&lt;/u&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private int id;&#x9;&#x9;&#x9;&#x9;// 主键ID&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&#x9;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private int jobGroup;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;// 执行器主键ID&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private String jobDesc;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&#x9;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private Date addTime;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private Date updateTime;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&#x9;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private String author;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;// 负责人&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private String alarmEmail;&lt;span&gt;&#x9;&lt;/span&gt;// 报警邮件&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private String scheduleType;&lt;span&gt;&#x9;&#x9;&#x9;&lt;/span&gt;// 调度类型&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private String scheduleConf;&lt;span&gt;&#x9;&#x9;&#x9;&lt;/span&gt;// 调度配置，值含义取决于调度类型&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private String misfireStrategy;&lt;span&gt;&#x9;&#x9;&#x9;&lt;/span&gt;// 调度过期策略&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private String executorRouteStrategy;&lt;span&gt;&#x9;&lt;/span&gt;// 执行器路由策略&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private String executorHandler;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;&amp;nbsp; &amp;nbsp; // 执行器，任务Handler名称&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private String executorParam;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;&amp;nbsp; &amp;nbsp; // 执行器，任务参数&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private String executorBlockStrategy;&lt;span&gt;&#x9;&lt;/span&gt;// 阻塞处理策略&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private int executorTimeout;&amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;// 任务执行超时时间，单位秒&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private int executorFailRetryCount;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;// 失败重试次数&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&#x9;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private String glueType;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;// GLUE类型&lt;span&gt;&#x9;&lt;/span&gt;#com.xxl.job.core.glue.GlueTypeEnum&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private String glueSource;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;// GLUE源代码&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private String glueRemark;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;// GLUE备注&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private Date glueUpdatetime;&lt;span&gt;&#x9;&lt;/span&gt;// GLUE更新时间&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private String childJobId;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;// 子任务ID，多个逗号分隔&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#000000&quot;&gt;private int triggerStatus;&lt;/font&gt;&#x9;&#x9;// 调度状态：0-停止，1-运行（可调度）&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;private long triggerLastTime;&lt;span&gt;&#x9;&lt;/span&gt;// 上次调度时间&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&#x9;private long triggerNextTime;&#x9;// 下次调度时间&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="-400" y="540" width="360" height="460" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-103" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-94" target="L3x8PkFCvonlR5Kohttu-102" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2050" y="1121" />
              <mxPoint x="2050" y="1230" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-94" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;JobTriggerPoolHelper&lt;/b&gt;.&lt;b&gt;trigger&lt;/b&gt;(&lt;br&gt;jobInfo.getId(), TriggerTypeEnum.MISFIRE, -1, null, null, null)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1880" y="1091" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-97" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;refreshNextValidTime(jobInfo, new Date())&lt;/span&gt;&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;根据当前时间以及计划类型（如CRON）计算并更新任务在 xxl_job_info 中的下次触发时间&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1600" y="1171" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-101" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-99" target="L3x8PkFCvonlR5Kohttu-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-99" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;div&gt;&lt;/div&gt;&lt;span&gt;for&amp;nbsp;scheduleList:&amp;nbsp;&lt;br&gt;&lt;/span&gt;XxlJobAdminConfig.getAdminConfig()&lt;br&gt;.getXxlJobInfoDao().&lt;b&gt;scheduleUpdate&lt;/b&gt;(jobInfo);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;更新任务信息到数据表&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1330" y="1400" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-29" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="L3x8PkFCvonlR5Kohttu-102" target="toSJOTEez4pn9fF8W7Rf-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-102" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;选择&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;fastTriggerPool 或 slowTriggerPool&lt;b&gt; 异步执行&lt;/b&gt;&amp;nbsp;&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2067" y="1201" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-107" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-104" target="L3x8PkFCvonlR5Kohttu-106" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-104" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;runExecutor(triggerParam, address)&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;根据路由策略，选取Executor执行&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2590" y="1290" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-109" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="L3x8PkFCvonlR5Kohttu-106" target="L3x8PkFCvonlR5Kohttu-108" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-106" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;executorBiz = new &lt;b&gt;ExecutorBizClient&lt;/b&gt;(&lt;br&gt;address, XxlJobAdminConfig.&lt;br&gt;getAdminConfig().getAccessToken())&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="2820" y="1290" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-108" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;runResult = executorBiz.&lt;b&gt;run&lt;/b&gt;(triggerParam)&lt;br&gt;&lt;/span&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#007fff&quot;&gt;请求Executor /run接口&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="2820" y="1351" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="L3x8PkFCvonlR5Kohttu-110" value="XxlJobScheduler" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="2875" y="1270" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0hqkEQ851FuDCjZB_4US-2" value="ExecutorBizClient是个HTTP客户端" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="2865" y="1391" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="0hqkEQ851FuDCjZB_4US-6" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="0hqkEQ851FuDCjZB_4US-3" target="0hqkEQ851FuDCjZB_4US-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="0hqkEQ851FuDCjZB_4US-3" value="&lt;font style=&quot;font-size: 10px&quot;&gt;refreshNextValidTime(jobInfo, new Date())&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;更新下次触发时间&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1600" y="1340" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="0hqkEQ851FuDCjZB_4US-8" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="0hqkEQ851FuDCjZB_4US-5" target="0hqkEQ851FuDCjZB_4US-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="0hqkEQ851FuDCjZB_4US-5" value="&lt;font style=&quot;font-size: 10px&quot;&gt;下次触发时间在5s内&lt;br&gt;即密集触发，5s内触发多次&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1600" y="1400" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="0hqkEQ851FuDCjZB_4US-10" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="0hqkEQ851FuDCjZB_4US-7" target="0hqkEQ851FuDCjZB_4US-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="0hqkEQ851FuDCjZB_4US-7" value="&lt;font style=&quot;font-size: 10px&quot;&gt;ringSecond = (int)((jobInfo.getTriggerNextTime()/1000)%60)&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1840" y="1400" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="0hqkEQ851FuDCjZB_4US-12" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="0hqkEQ851FuDCjZB_4US-9" target="0hqkEQ851FuDCjZB_4US-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="0hqkEQ851FuDCjZB_4US-9" target="toSJOTEez4pn9fF8W7Rf-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="0hqkEQ851FuDCjZB_4US-9" value="&lt;font style=&quot;font-size: 10px&quot;&gt;pushTimeRing(ringSecond, jobInfo.getId())&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;添加到时间轮&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1840" y="1460" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="0hqkEQ851FuDCjZB_4US-11" value="&lt;font style=&quot;font-size: 10px&quot;&gt;refreshNextValidTime(jobInfo, new Date(jobInfo.getTriggerNextTime()))&lt;br&gt;&lt;span style=&quot;color: rgb(0 , 127 , 255)&quot;&gt;更新下次触发时间&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1840" y="1520" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="0hqkEQ851FuDCjZB_4US-13" value="估算两个调度线程池，每秒最多可以调度的任务数量" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1439.5" y="890" width="240" height="20" as="geometry" />
        </mxCell>
        <mxCell id="0hqkEQ851FuDCjZB_4US-15" value="大概是五秒取一次最近任务列表，&lt;br&gt;将列表中任务一秒一更新，条件满足就执行" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1090" y="930" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="0hqkEQ851FuDCjZB_4US-16" value="时间轮分为60份， 60秒和120秒时触发的任务都在同一个 List中存储&lt;br&gt;&lt;b&gt;Map&amp;lt;Integer, List&amp;lt;Integer&amp;gt;&amp;gt;&lt;/b&gt; &lt;b&gt;ringData&lt;/b&gt; = new ConcurrentHashMap&amp;lt;&amp;gt;();" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1840" y="1370" width="340" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OSpAHNJ8Lpkp76DFQ3Wi-1" value="&lt;h1 style=&quot;font-size: 14px&quot;&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;借鉴：&lt;/span&gt;&lt;br&gt;&lt;/h1&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;xxl-job 时间轮原理&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;使用 select for update 数据库行锁来同步调度线程（每个调度中心一个调度线程）&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="600" y="20" width="440" height="140" as="geometry" />
        </mxCell>
        <mxCell id="OSpAHNJ8Lpkp76DFQ3Wi-5" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;elbow=vertical;" parent="1" source="OSpAHNJ8Lpkp76DFQ3Wi-2" target="OSpAHNJ8Lpkp76DFQ3Wi-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;curved=1;" parent="1" source="OSpAHNJ8Lpkp76DFQ3Wi-2" target="toSJOTEez4pn9fF8W7Rf-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2070" y="1637" />
              <mxPoint x="2070" y="1480" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OSpAHNJ8Lpkp76DFQ3Wi-2" value="&lt;font style=&quot;font-size: 10px&quot;&gt;pushTimeRing(ringSecond, jobInfo.getId());&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;添加到时间轮&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1600" y="1617.3" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OSpAHNJ8Lpkp76DFQ3Wi-4" value="&lt;font style=&quot;font-size: 10px&quot;&gt;refreshNextValidTime(jobInfo, new Date(jobInfo.getTriggerNextTime()));&lt;br&gt;&lt;span style=&quot;color: rgb(0 , 127 , 255)&quot;&gt;更新下次触发时间&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1600" y="1680" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OSpAHNJ8Lpkp76DFQ3Wi-6" value="避免&lt;b&gt;多个的注册中心&lt;/b&gt;的调度线程读取并调度同一条任务" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1540" y="995" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-2" value="线程名&lt;br&gt;xxl-job, admin JobTriggerPoolHelper-fastTriggerPool-&amp;lt;hashcode&amp;gt;&lt;br&gt;xxl-job, admin JobTriggerPoolHelper-slowTriggerPool-&amp;lt;hashcode&amp;gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=1;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1110" y="460" width="330" height="40" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-3" value="&lt;p style=&quot;margin: 4px 0px 0px ; text-align: center&quot;&gt;&lt;font&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;u&gt;XxlJobGroup (执行器信息)&lt;/u&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;private int id;&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; white-space: pre&quot;&gt;&#x9;&lt;/span&gt;//执行器ID&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private String &lt;b&gt;appname&lt;/b&gt;;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private String &lt;b&gt;title&lt;/b&gt;;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;private int &lt;b&gt;addressType&lt;/b&gt;;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/font&gt;// 执行器地址类型：0=自动注册、1=手动录入&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;private String &lt;b&gt;addressList&lt;/b&gt;;&amp;nbsp; &amp;nbsp; &lt;/font&gt;&amp;nbsp;// 执行器地址列表，多地址逗号分隔(手动录入)&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;private Date &lt;/font&gt;&lt;b style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;updateTime&lt;/b&gt;&lt;font color=&quot;#000000&quot;&gt;;&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; white-space: pre&quot;&gt;&#x9;&lt;/span&gt;// 上次注册心跳时间&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private List&amp;lt;String&amp;gt; &lt;b&gt;registryList&lt;/b&gt;;&amp;nbsp; // 执行器地址列表(系统注册)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="-800" y="240" width="360" height="160" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-5" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;u&gt;XxlJobRegistry&lt;/u&gt;&lt;/font&gt;&lt;/span&gt;&lt;u style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&amp;nbsp;(执行器注册表，会自动刷新)&lt;/u&gt;&lt;/div&gt;&lt;hr style=&quot;font-size: 10px&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private int id;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private String registryGroup;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private String registryKey;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private String registryValue;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private Date updateTime;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="-800" y="440" width="360" height="120" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-6" value="&lt;div&gt;- &lt;b&gt;xxl_job_lock&lt;/b&gt;：任务调度锁表；&lt;/div&gt;&lt;div&gt;- &lt;b&gt;xxl_job_group&lt;/b&gt;：执行器信息表，维护任务执行器信息；&lt;/div&gt;&lt;div&gt;- &lt;b&gt;xxl_job_info&lt;/b&gt;：调度扩展信息表： 用于保存XXL-JOB调度任务的扩展信息，如任务分组、任务名、机器地址、执行器、执行入参和报警邮件等等；&lt;/div&gt;&lt;div&gt;- &lt;b&gt;xxl_job_log&lt;/b&gt;：调度日志表： 用于保存XXL-JOB任务调度的历史信息，如调度结果、执行结果、调度入参、调度机器和执行器等等；&lt;/div&gt;&lt;div&gt;- &lt;b&gt;xxl_job_log_report&lt;/b&gt;：调度日志报表：用户存储XXL-JOB任务调度日志的报表，调度中心报表功能页面会用到；&lt;/div&gt;&lt;div&gt;- xxl_job_logglue：任务GLUE日志：用于保存GLUE更新历史，用于支持GLUE的版本回溯功能；&lt;/div&gt;&lt;div&gt;- &lt;b&gt;xxl_job_registry&lt;/b&gt;：执行器注册表，维护在线的执行器和调度中心机器地址信息；&lt;/div&gt;&lt;div&gt;- &lt;b&gt;xxl_job_user&lt;/b&gt;：系统用户表；&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="-800" y="110" width="600" height="90" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-7" value="如果有拓展执行器实例，&lt;br&gt;就是通过这里加入到执行器注册表的" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1485" y="585" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-8" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;span&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;u&gt;XxlJobLog&lt;/u&gt;&lt;/font&gt;&lt;/span&gt;&lt;u style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&amp;nbsp;(任务执行信息)&lt;/u&gt;&lt;br&gt;&lt;/div&gt;&lt;hr style=&quot;font-size: 10px&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private long id;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;// job info&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private int jobGroup;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private int jobId;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;// execute info&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private String executorAddress;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private String executorHandler;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private String executorParam;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private String executorShardingParam;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private int &lt;b&gt;executorFailRetryCount&lt;/b&gt;;&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;// trigger info&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private Date triggerTime;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private int triggerCode;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private String triggerMsg;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;// handle info&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private Date handleTime;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private int handleCode;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private String handleMsg;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;// alarm info&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 8px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;private int alarmStatus;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="-800" y="600" width="360" height="340" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-9" value="参考调度过期策略：&lt;br&gt;DO_NOTHING： 忽略；&lt;br&gt;FIRE_ONCE_NOW：立即触发一次" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1810" y="1160" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-14" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="toSJOTEez4pn9fF8W7Rf-10" target="toSJOTEez4pn9fF8W7Rf-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-10" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;List&amp;lt;Integer&amp;gt; ringItemData = ringData.get(ringSecond);&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2107" y="1460" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-13" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;ringItemData&lt;/b&gt;.add(jobId);&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2107" y="1520" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-20" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="toSJOTEez4pn9fF8W7Rf-15" target="toSJOTEez4pn9fF8W7Rf-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1351" y="1800" />
              <mxPoint x="1440" y="1800" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-15" value="&lt;font&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;while (!ringThreadToStop)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D6D6D6;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1261" y="1770" width="179" height="20" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-16" value="&lt;font&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;while end&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D6D6D6;" parent="1" vertex="1">
          <mxGeometry x="1261" y="2010" width="179" height="20" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-22" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="toSJOTEez4pn9fF8W7Rf-19" target="toSJOTEez4pn9fF8W7Rf-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-19" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;TimeUnit.MILLISECONDS.sleep(1000 - System.currentTimeMillis() % 1000)&lt;br&gt;&lt;/span&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#007fff&quot;&gt;下一个整秒时刻醒来&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1339.5" y="1820" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-24" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="toSJOTEez4pn9fF8W7Rf-21" target="toSJOTEez4pn9fF8W7Rf-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-21" value="&lt;font style=&quot;font-size: 10px&quot;&gt;读取时间轮当前秒和前一秒的任务加入&lt;b&gt;ringItemData&lt;/b&gt;&lt;br&gt;ringItemData.addAll(tmpData);&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1340" y="1880" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-25" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="toSJOTEez4pn9fF8W7Rf-23" target="toSJOTEez4pn9fF8W7Rf-16" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1440" y="1990" />
              <mxPoint x="1351" y="1990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-23" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;for (int jobId: ringItemData)：&lt;br&gt;&lt;/span&gt;JobTriggerPoolHelper.&lt;b&gt;trigger&lt;/b&gt;(jobId, TriggerTypeEnum.CRON, -1, null, null, null)&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1339.5" y="1940" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-27" value="比如当前时间戳是&amp;nbsp;1681743696650 , 就睡眠 350ms&lt;br&gt;在 1681743697000 时醒来" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1540" y="1825" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-32" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;dashed=1;" parent="1" source="toSJOTEez4pn9fF8W7Rf-28" target="toSJOTEez4pn9fF8W7Rf-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-28" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;triggerPool_.execute(new Runnable() {...}}&lt;br&gt;&lt;/span&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#007fff&quot;&gt;异步触发执行任务&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="2068" y="1280" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-33" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="toSJOTEez4pn9fF8W7Rf-31" target="L3x8PkFCvonlR5Kohttu-104" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-35" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;fontSize=10;fontColor=#007FFF;" parent="1" source="toSJOTEez4pn9fF8W7Rf-31" target="toSJOTEez4pn9fF8W7Rf-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-31" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;&lt;br&gt;XxlJobTrigger&lt;/b&gt;.&lt;b&gt;trigger&lt;/b&gt;(jobId, triggerType, failRetryCount, executorShardingParam, executorParam, addressList)&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2330" y="1281" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="toSJOTEez4pn9fF8W7Rf-34" value="finally:&lt;br&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2330" y="1355" width="240" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="6ZwJcEH1ik3oU2Q9ojGl" name="xxl-job主流程">
    <mxGraphModel dx="1231" dy="764" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="XV_gDHsHkFdfBwFGJm9C-0" />
        <mxCell id="XV_gDHsHkFdfBwFGJm9C-1" parent="XV_gDHsHkFdfBwFGJm9C-0" />
        <mxCell id="ZwfI9Yo1tfwzPjimNjcz-0" value="&lt;h1&gt;XXL-job 简易流程&amp;nbsp;&lt;span style=&quot;font-weight: normal&quot;&gt;&lt;font style=&quot;font-size: 18px&quot;&gt;（2.3.1）&lt;/font&gt;&lt;/span&gt;&lt;/h1&gt;&lt;div&gt;&lt;/div&gt;主要分析定时任务注册、存储、调度、执行流程。&lt;br&gt;(黄色节点：核心节点，蓝色节点：重要节点，绿色节点：底层或交互节点)&lt;br&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="XV_gDHsHkFdfBwFGJm9C-1" vertex="1">
          <mxGeometry x="40" y="20" width="560" height="100" as="geometry" />
        </mxCell>
        <mxCell id="ZwfI9Yo1tfwzPjimNjcz-1" value="" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;align=center;arcSize=0;verticalAlign=bottom;" parent="XV_gDHsHkFdfBwFGJm9C-1" vertex="1">
          <mxGeometry x="40" y="160" width="160" height="360" as="geometry" />
        </mxCell>
        <mxCell id="_E5MtczHBtg_geGjRIYx-0" value="" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;arcSize=0;" parent="XV_gDHsHkFdfBwFGJm9C-1" vertex="1">
          <mxGeometry x="440" y="160" width="160" height="320" as="geometry" />
        </mxCell>
        <mxCell id="hmM8VKlGtPwX4rTb9dWN-0" value="AdminBizClient" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;" parent="XV_gDHsHkFdfBwFGJm9C-1" vertex="1">
          <mxGeometry x="260" y="200" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="RO2sx8MIDG7D2ehTXBIw-0" value="Netty" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;" parent="XV_gDHsHkFdfBwFGJm9C-1" vertex="1">
          <mxGeometry x="260" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RO2sx8MIDG7D2ehTXBIw-3" value="&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#330000&quot;&gt;执行器 XxlJobExecutor&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;fontColor=#007FFF;" parent="XV_gDHsHkFdfBwFGJm9C-1" vertex="1">
          <mxGeometry x="60" y="530" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dN3qkICirPAGnUJ7gZou-0" style="rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#330000;strokeWidth=1;elbow=vertical;" parent="XV_gDHsHkFdfBwFGJm9C-1" source="3x51bpP3D1QClZlxl-u_-0" target="hmM8VKlGtPwX4rTb9dWN-0" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3x51bpP3D1QClZlxl-u_-0" value="&lt;font color=&quot;#330000&quot;&gt;adminBizList&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;fontSize=10;fontColor=#007FFF;fillColor=#E6D0DE;" parent="XV_gDHsHkFdfBwFGJm9C-1" vertex="1">
          <mxGeometry x="60" y="180" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3x51bpP3D1QClZlxl-u_-1" value="&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#330000&quot;&gt;&lt;div&gt;调度中心&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=14;fontColor=#007FFF;" parent="XV_gDHsHkFdfBwFGJm9C-1" vertex="1">
          <mxGeometry x="490" y="480" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="3x51bpP3D1QClZlxl-u_-2" value="AdminBizClient" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;" parent="XV_gDHsHkFdfBwFGJm9C-1" vertex="1">
          <mxGeometry x="260" y="240" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Qwq-bwDv7-aJPypMnott-0" value="&lt;font color=&quot;#330000&quot;&gt;jobHandlerRepository&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;fontSize=10;fontColor=#007FFF;fillColor=#E6D0DE;" parent="XV_gDHsHkFdfBwFGJm9C-1" vertex="1">
          <mxGeometry x="60" y="240" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Qwq-bwDv7-aJPypMnott-1" value="&lt;font color=&quot;#330000&quot;&gt;jobThreadRepository&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;fontSize=10;fontColor=#007FFF;fillColor=#E6D0DE;" parent="XV_gDHsHkFdfBwFGJm9C-1" vertex="1">
          <mxGeometry x="60" y="460" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Svm4aTg76ByoMFXfKpxN-0" value="&lt;font color=&quot;#330000&quot;&gt;triggerCallbackThread&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;fontSize=10;fontColor=#007FFF;fillColor=#E6D0DE;" parent="XV_gDHsHkFdfBwFGJm9C-1" vertex="1">
          <mxGeometry x="60" y="300" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Svm4aTg76ByoMFXfKpxN-1" value="&lt;font color=&quot;#330000&quot; style=&quot;font-size: 9px&quot;&gt;triggerRetryCallbackThread&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;fontSize=10;fontColor=#007FFF;fillColor=#E6D0DE;" parent="XV_gDHsHkFdfBwFGJm9C-1" vertex="1">
          <mxGeometry x="60" y="340" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="TgTyQt9iY8SksDVqa16C-0" style="edgeStyle=none;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#330000;strokeWidth=1;elbow=vertical;" parent="XV_gDHsHkFdfBwFGJm9C-1" source="Svm4aTg76ByoMFXfKpxN-2" target="hmM8VKlGtPwX4rTb9dWN-0" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Svm4aTg76ByoMFXfKpxN-2" value="&lt;font color=&quot;#330000&quot;&gt;ExecutorRegistryThread&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;fontSize=10;fontColor=#007FFF;fillColor=#E6D0DE;" parent="XV_gDHsHkFdfBwFGJm9C-1" vertex="1">
          <mxGeometry x="60" y="400" width="120" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
