<mxfile host="Electron" modified="2024-04-19T15:56:49.815Z" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.6.5 Chrome/114.0.5735.243 Electron/25.3.1 Safari/537.36" etag="8etbdHrPRuGhRPIH-kHP" version="21.6.5" type="device">
  <diagram name="第 1 页" id="_ELyFHzvFEiwb_eeZEqK">
    <mxGraphModel dx="3341" dy="1034" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-54" value="&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;main(String[] args) 方法体&lt;br style=&quot;font-size: 10px;&quot;&gt;{&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp; System.out.println(&quot;hello&quot;);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;}&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;被编译为下面4条字节码指令:&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;&quot;&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;GETSTATIC java/lang/System.out : Ljava/io/PrintStream;&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;b&gt;//即从 java/lang/System 类中获取 out 静态字段 返回为 PrintStream 类型&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;LDC &quot;hello&quot;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;INVOKEVIRTUAL java/io/PrintStream.println (Ljava/lang/String;)V&lt;span style=&quot;&quot;&gt;&lt;span style=&quot;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;b style=&quot;background-color: initial; border-color: var(--border-color);&quot;&gt;//即调用 java/io/PrintStream println(Ljava/lang/String;)V 方法&lt;/b&gt;&lt;/div&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot; style=&quot;&quot;&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;RETURN&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;{Integer@1734} 0 -&amp;gt; {&lt;b&gt;GetStaticInst&lt;/b&gt;@1735} &quot;GetStaticInst{clazz=&#39;java/lang/System&#39;, fieldName=&#39;out&#39;, fieldDescriptor=&#39;Ljava/io/PrintStream;&#39;}&quot;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp;key = {Integer@1734} 0&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp;value = {GetStaticInst@1735} &quot;GetStaticInst{clazz=&#39;java/lang/System&#39;, fieldName=&#39;out&#39;, fieldDescriptor=&#39;Ljava/io/PrintStream;&#39;}&quot;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp; &lt;b&gt;clazz&lt;/b&gt; = &quot;java/lang/System&quot;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp; &lt;b&gt;fieldName&lt;/b&gt; = &quot;out&quot;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp; &lt;b&gt;fieldDescriptor&lt;/b&gt; = &quot;Ljava/io/PrintStream;&quot;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;{Integer@1736} 3 -&amp;gt; {&lt;b&gt;LdcInst&lt;/b&gt;@1737} &quot;LdcInst{descriptor=&#39;Ljava/lang/String&#39;, val=hello}&quot;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp;key = {Integer@1736} 3&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp;value = {LdcInst@1737} &quot;LdcInst{descriptor=&#39;Ljava/lang/String&#39;, val=hello}&quot;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp; &lt;b&gt;descriptor&lt;/b&gt; = &quot;Ljava/lang/String&quot;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp; &lt;b&gt;val&lt;/b&gt; = &quot;hello&quot;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;{Integer@1738} 5 -&amp;gt; {&lt;b&gt;InvokeVirtualInst&lt;/b&gt;@1739} &quot;InvokeVirtualInst{clazz=&#39;java/io/PrintStream&#39;, methodName=&#39;println&#39;, methodDescriptor=&#39;(Ljava/lang/String;)V&#39;}&quot;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp;key = {Integer@1738} 5&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp;value = {InvokeVirtualInst@1739} &quot;InvokeVirtualInst{clazz=&#39;java/io/PrintStream&#39;, methodName=&#39;println&#39;, methodDescriptor=&#39;(Ljava/lang/String;)V&#39;}&quot;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp; &lt;b&gt;clazz&lt;/b&gt; = &quot;java/io/PrintStream&quot;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp; &lt;b&gt;methodName&lt;/b&gt; = &quot;println&quot;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp; &lt;b&gt;methodDescriptor&lt;/b&gt; = &quot;(Ljava/lang/String;)V&quot;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;{Integer@1740} 8 -&amp;gt; {ReturnInst@1741}&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1480" y="2040" width="730" height="360" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-1" value="&lt;h1 style=&quot;font-size: 18px;&quot;&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;Mini-jvm 工作原理&lt;/font&gt;&lt;/h1&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;参考 Java8 HotSpot 实现的开源的简单的JVM实现，jvm-core 除去 Instuction (字节码指令实现) 也就剩下大概 7K多行，很容易理解。&lt;br&gt;不过功能也只包含一些很核心的功能。&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;https://github.com/guxingke/mini-jvm&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="40" y="10" width="760" height="90" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-2" target="hw3rN0ojpoE_x7gTb8zc-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-2" value="Main#main(String[] args)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;位于jvm-core模块&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="40" y="120" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-6" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-3" target="hw3rN0ojpoE_x7gTb8zc-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-25" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-3" target="hw3rN0ojpoE_x7gTb8zc-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-3" value="Args cmd = Args.parseArgs(args);&lt;br&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;主要是解析 -cp -jar 获取类加载路径&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;以及获取Main类全限定名&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="280" y="120" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-5" target="hw3rN0ojpoE_x7gTb8zc-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-5" value="VirtualMachine vm = new &lt;b&gt;VirtualMachine&lt;/b&gt;();&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;这个类并没有任何成员字段&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="280" y="220" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-7" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Args&lt;/b&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;boolean version;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;boolean help;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//是否启用详细日志输出，打开的话会输出详细的运行日志&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//作者支持了trace call class debug&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;boolean &lt;b&gt;verbose&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;boolean verboseTrace;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;boolean verboseCall;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;boolean verboseClass;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;boolean verboseDebug;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//解析 -cp -jar 参数获取到的类路径&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public String &lt;b&gt;classpath&lt;/b&gt; = &quot;.&quot;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//应用的Main类全限定名&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public String &lt;b&gt;clazz&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//原始参数列表&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public String[] &lt;b&gt;args&lt;/b&gt; = new String[0];&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static Args &lt;b&gt;parseArgs&lt;/b&gt;(String... cliArgs)&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-400" y="120" width="360" height="280" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-8" target="hw3rN0ojpoE_x7gTb8zc-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-8" value="vm.&lt;b&gt;run&lt;/b&gt;(cmd);" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="280" y="320" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-10" target="hw3rN0ojpoE_x7gTb8zc-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-10" value="先将 Args 对象的参数再记录到 EnvHolder 中" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="520" y="320" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-12" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;EnvHolder&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static boolean verbose;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static boolean verboseTrace;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static boolean verboseCall;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static boolean verboseClass;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static boolean verboseDebug;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static boolean debug;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-800" y="120" width="360" height="160" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-13" target="hw3rN0ojpoE_x7gTb8zc-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-13" value="Entry entry = Classpath.parse(Utils.classpath(&lt;br&gt;cmd.classpath));&lt;br&gt;&lt;font style=&quot;font-size: 10px;&quot; color=&quot;#007fff&quot;&gt;先获取类路径，再解析类路径到Entry实例&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="520" y="400" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-18" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-15" target="hw3rN0ojpoE_x7gTb8zc-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-15" target="hw3rN0ojpoE_x7gTb8zc-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-15" value="ClassLoader classLoader = new &lt;b&gt;ClassLoader&lt;/b&gt;(&quot;boot&quot;, entry);&lt;br&gt;&lt;b&gt;initVm&lt;/b&gt;(classLoader);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;创建boot类加载器，初始化JVM&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="520" y="480" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-20" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-17" target="hw3rN0ojpoE_x7gTb8zc-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-62" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-17" target="hw3rN0ojpoE_x7gTb8zc-61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-17" value="&lt;div&gt;String mainClass = Utils.replace(&lt;br&gt;cmd.clazz, &#39;.&#39;, EnvHolder&lt;br&gt;.FILE_SEPARATOR.toCharArray([0]);&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp; &amp;nbsp; classLoader.&lt;b&gt;loadClass&lt;/b&gt;(mainClass);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;主类的类加载&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="520" y="1320" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-19" target="hw3rN0ojpoE_x7gTb8zc-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-19" value="Class clazz = Heap.findClass(mainClass);&lt;br&gt;Method method = clazz.getMainMethod();&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;查找应用程序Main类的main()方法&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="520" y="1640" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hw3rN0ojpoE_x7gTb8zc-21" target="eWhodD4vRtD6RhS1Q6ua-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-21" value="Interpreter.&lt;b&gt;runMain&lt;/b&gt;(method, cmd.args);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;解析器执行main()方法&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="520" y="1860" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-24" value="args.clazz = parseMainClass(jar);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;解析Java包中的Main类：通过解析META-INF/MANIFEST.MF文件中 Main-Class属性获取&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="520" y="120" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-26" value="&lt;font color=&quot;#007fff&quot;&gt;比如测试中最终引入的类路径（可以看到将JDK的jar包也都引进来了，因为mini-jvm并没有实现多少JDK上的实现）：&amp;nbsp;&lt;br&gt;example:/home/arvin/mywork/github/mini-jvm/mini-jdk/target/rt.jar:/home/arvin/.jabba/jdk/adopt@1.8.0-292/jre/lib/*&lt;br&gt;此时 Entry 是 CompositeEntry 类型&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="730" y="400" width="650" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-27" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Entry (I)&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;类搜索接口，有3种实现，DirEntry JarEntry CompositeEntry&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;实现类也是 classPath 的容器&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;ClassFile findClass(String name);&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-400" y="440" width="360" height="130" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-28" value="&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;entries = {ArrayList@508}&amp;nbsp; size = 3&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;0 = {&lt;b&gt;DirEntry&lt;/b&gt;@515}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; dirPath = &quot;example&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;1 = {&lt;b&gt;JarEntry&lt;/b&gt;@518}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; path = &quot;/home/arvin/mywork/github/mini-jvm/mini-jdk/target/rt.jar&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;2 = {&lt;b&gt;CompositeEntry&lt;/b&gt;@521}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; entries = {ArrayList@525}&amp;nbsp; size = 7&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp;0 = {&lt;b&gt;JarEntry&lt;/b&gt;@527}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp;1 = {JarEntry@528}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp;2 = {JarEntry@529}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp;3 = {JarEntry@530}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp;4 = {JarEntry@531}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp;5 = {JarEntry@532}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp;6 = {JarEntry@533}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="-710" y="440" width="310" height="180" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-30" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;ClassLoader&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;类加载器实现，只实现最核心的功能，没有实现双亲委托等功能&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;private final String &lt;b&gt;name&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;private final Entry &lt;b&gt;entry&lt;/b&gt;;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public void loadPrimitiveClass(String name)&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public void loadPrimitiveArrayClass(String name)&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public Class loadClass(String name)&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public void doRegister(Class clazz)&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public Class doLoadClass(String name)&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public Class doLoadClass(String name, ClassFile classFile)&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public Method map(MethodInfo cfMethodInfo)&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public Field map(FieldInfo fieldInfo)&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public String getName()&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-400" y="600" width="360" height="240" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-31" target="hw3rN0ojpoE_x7gTb8zc-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-31" value="MetaSpace.main = new Thread(1024);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;创建一个栈帧容器，最大栈深1024&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="760" y="480" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-33" target="hw3rN0ojpoE_x7gTb8zc-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-45" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-33" target="hw3rN0ojpoE_x7gTb8zc-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-33" value="&lt;b&gt;loadLibrary&lt;/b&gt;();&lt;br&gt;&lt;font style=&quot;font-size: 10px;&quot; color=&quot;#007fff&quot;&gt;注册了一组&lt;b&gt;本地方法&lt;/b&gt;到堆，不过它内部并不是通过JNI链接到系统调用，而是直接链接到了官方的JDK的本地方法&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="760" y="600" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-35" target="hw3rN0ojpoE_x7gTb8zc-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-48" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-35" target="hw3rN0ojpoE_x7gTb8zc-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-35" value="&lt;b&gt;loadFoundationClass&lt;/b&gt;(classLoader);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;加载基础类型，java/lang/Class、8中基本类型及器对应的包装类型、数组类型、String、Void&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="760" y="850" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-37" value="initSystemOut(classLoader);&lt;br&gt;initSystemErr(classLoader);&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;加载 FileDescriptor、FileOutputStream、PrintStream、System&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="760" y="1000" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-42" style="rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;endArrow=open;endFill=0;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-39" target="hw3rN0ojpoE_x7gTb8zc-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-39" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;MateSpace&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;元空间，对标的HotSpot中的元空间&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//栈帧容器&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static Thread &lt;b&gt;main&lt;/b&gt;;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static Thread getMainEnv()&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static NativeMethod findNativeMethod(String key)&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-400" y="880" width="360" height="160" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-43" style="rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;endArrow=open;endFill=0;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-40" target="hw3rN0ojpoE_x7gTb8zc-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-40" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Thread&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;内部线程，是一个栈结构，看它的源码实现这其实是栈帧的容器&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//top其实是栈帧数量，top-1是栈顶的索引&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public int top;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//保存栈帧的栈&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public Frame[] frames;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public void pushFrame(Frame frame)&amp;nbsp;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public Frame popFrame()&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public Frame topFrame()&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public Frame callerFrame()&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-800" y="880" width="360" height="200" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-17" style="rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;endArrow=open;endFill=0;" edge="1" parent="1" source="hw3rN0ojpoE_x7gTb8zc-41" target="eWhodD4vRtD6RhS1Q6ua-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-41" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Frame&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;栈帧&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//当前栈帧执行的方法&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final Method &lt;b&gt;method&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//本地变量列表, LocalVars 是 Slot 数组&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;private final LocalVars &lt;b&gt;localVars&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//操作数栈，是 Slot 栈，除了Slot数组还包含一个top(栈顶索引)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;private final OperandStack &lt;b&gt;operandStack&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//com.gxk.jvm.rtda.heap.&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;Method的 instructionMap&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;private final Map&amp;lt;Integer, Instruction&amp;gt; &lt;b&gt;instructionMap&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//即MetaSpace栈帧容器main&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final Thread &lt;b&gt;thread&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//下一个指令的程序计数器值&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public int &lt;b&gt;nextPc&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//当前指令的程序计数器值&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;private int &lt;b&gt;pc&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public int &lt;b&gt;stat&lt;/b&gt;;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="-1200" y="830" width="360" height="300" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-44" value="&lt;div style=&quot;font-size: 10px;&quot;&gt;ObjectBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;ClassBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;SystemBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;FileOutputStreamBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;FileDescriptorBridge.registerNative0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;MathBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;UnsafeBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;IntegerBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;FloatBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;DoubleBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;StringBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;RandomBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;ExceptionBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;ThrowableBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;AtomicLongBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;ReflectionBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;ClassLoaderBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;AccessControllerBridge.registerNative0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;PropertiesBridge.registerNative0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;CharsetBridge.registerNative0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;UnixFileSystemBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;FileInputStreamBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;ZipFileBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;NativeInputStreamBridge.registerNatives0();&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;注册了一些常用的类的本地方法&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;fontSize=10;arcSize=2;" parent="1" vertex="1">
          <mxGeometry x="1001" y="480" width="240" height="300" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-18" style="rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;endArrow=open;endFill=0;" edge="1" parent="1" source="hw3rN0ojpoE_x7gTb8zc-46" target="hw3rN0ojpoE_x7gTb8zc-49">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-46" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Heap&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;堆空间，对标的HotSpot中的堆&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//本地方法的Map&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;private static final Map&amp;lt;String, &lt;/span&gt;&lt;b style=&quot;font-size: 11px;&quot;&gt;NativeMethod&lt;/b&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&amp;gt; &lt;/span&gt;&lt;font style=&quot;font-size: 10px;&quot;&gt;NATIVE_METHOD_MAP&lt;/font&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;;&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;// Klass的Map&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 11px;&quot;&gt;private static final Map&amp;lt;String, &lt;b&gt;Class&lt;/b&gt;&amp;gt; &lt;font style=&quot;font-size: 11px;&quot;&gt;STRING_K_CLASS_MAP&lt;/font&gt;;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static void registerMethod(String key, NativeMethod method)&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static NativeMethod findMethod(String key)&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static Class findClass(String name)&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static void registerClass(String name, Class clazz)&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public static List&amp;lt;Class&amp;gt; getClasses()&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-800" y="1160" width="360" height="200" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-52" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-47" target="hw3rN0ojpoE_x7gTb8zc-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-47" value="&lt;font color=&quot;#007fff&quot;&gt;//加载官方JDK中的Class类&lt;br&gt;&lt;/font&gt;Class metaClass = classLoader&lt;br&gt;.&lt;b&gt;loadClass&lt;/b&gt;(&quot;java/lang/Class&quot;);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;//遍历Heap中注册的类名，依次进行实例化&lt;br&gt;&lt;/font&gt;&lt;div&gt;for (Class cls : Heap.getClasses()) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; if (cls.getRuntimeClass() == null) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; Instance obj = metaClass.&lt;b&gt;newInstance&lt;/b&gt;();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; cls.setRuntimeClass(obj);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; obj.setMetaClass(cls);&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; }&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;arcSize=4;align=left;" parent="1" vertex="1">
          <mxGeometry x="1001" y="800" width="239" height="160" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-20" style="rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;endArrow=open;endFill=0;" edge="1" parent="1" source="hw3rN0ojpoE_x7gTb8zc-49" target="eWhodD4vRtD6RhS1Q6ua-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-21" style="rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;endArrow=open;endFill=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="hw3rN0ojpoE_x7gTb8zc-49" target="eWhodD4vRtD6RhS1Q6ua-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-49" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Class&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;对标HotSpot中的&lt;b&gt;Klass&lt;/b&gt;类(保存JVM中类元数据)，每个类加载后都有一个Klass&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;注意区分官方JDK中&lt;b&gt;Class&lt;/b&gt;与&lt;b&gt;Klass&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;Mini-JVM 使用自定义的 Class 作为 Klass，还是使用官方JDK的Class作为反射接口&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;public final int accessFlags;&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;public final String name;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;public final String superClassName;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;public final List&amp;lt;String&amp;gt; interfaceNames;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;public final List&amp;lt;Method&amp;gt; methods;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;public final List&amp;lt;Field&amp;gt; fields;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;public final BootstrapMethods bootstrapMethods;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;public final ConstantPool constantPool;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//该类实例的的类加载器&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;public final ClassLoader classLoader;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;public final ClassFile classFile;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;private Class &lt;b&gt;superClass&lt;/b&gt;;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;private List&amp;lt;Class&amp;gt; &lt;b&gt;interfaces&lt;/b&gt;;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//初始状态为0, 检查存在静态初始化方法&amp;lt;clinit&amp;gt;后为1, 执行静态初始化方法后为2，&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//只要有静态成员初始化或静态代码块就会自动生成 clinit 方法&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;public int &lt;b&gt;stat&lt;/b&gt; = 0;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//即官方JDK中的Class对象&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;span style=&quot;font-size: 11px;&quot;&gt;private Instance runtimeClass;&lt;/span&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-1200" y="1160" width="360" height="440" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-50" value="&lt;font color=&quot;#cc0000&quot;&gt;为何要单独注册下本地方法？&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="520" y="540" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-54" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-51" target="hw3rN0ojpoE_x7gTb8zc-53" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-51" value="classLoader.&lt;b&gt;loadPrimitiveClass&lt;/b&gt;(...)&lt;br&gt;加载 char、boolean、byte、... 八种基本类型，以及 void 类型" style="rounded=1;whiteSpace=wrap;html=1;arcSize=17;align=left;" parent="1" vertex="1">
          <mxGeometry x="1001" y="980" width="239" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-58" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-53" target="hw3rN0ojpoE_x7gTb8zc-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-53" value="classLoader.&lt;b&gt;loadClass&lt;/b&gt;(...)&lt;br&gt;加载 char、boolean、byte、... 八种基本类型的包装类型，以及 String、Void 类型" style="rounded=1;whiteSpace=wrap;html=1;arcSize=17;align=left;" parent="1" vertex="1">
          <mxGeometry x="1001" y="1060" width="239" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-57" value="&lt;div&gt;classLoader.&lt;b&gt;loadPrimitiveArrayClass&lt;/b&gt;(...)&lt;/div&gt;&lt;div&gt;加载 char、boolean、byte、... 八种基本类型的数组类型&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;arcSize=17;align=left;" parent="1" vertex="1">
          <mxGeometry x="1001" y="1140" width="239" height="60" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-64" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-61" target="hw3rN0ojpoE_x7gTb8zc-63" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-66" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="hw3rN0ojpoE_x7gTb8zc-61" target="hw3rN0ojpoE_x7gTb8zc-65" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-61" value="Class clazz = doLoadClass(name);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;先查看下堆中这个类是否已经存在，不存在则加载并注册到堆中&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="760" y="1330" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="hw3rN0ojpoE_x7gTb8zc-63" target="eWhodD4vRtD6RhS1Q6ua-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-63" value="doRegister(clazz);&lt;br&gt;&lt;font style=&quot;font-size: 10px;&quot; color=&quot;#007fff&quot;&gt;就是将新实例化的&amp;nbsp;com.gxk.jvm.rtda.heap.Class 注册到堆空间 STRING_K_CLASS_MAP，并检查和它对应的本地方法是否存在&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="760" y="1520" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-23" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="hw3rN0ojpoE_x7gTb8zc-65" target="eWhodD4vRtD6RhS1Q6ua-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-26" value="1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="eWhodD4vRtD6RhS1Q6ua-23">
          <mxGeometry x="0.9241" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-24" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="hw3rN0ojpoE_x7gTb8zc-65" target="eWhodD4vRtD6RhS1Q6ua-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-25" value="2" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="eWhodD4vRtD6RhS1Q6ua-24">
          <mxGeometry x="0.45" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="hw3rN0ojpoE_x7gTb8zc-65" value="&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//1 先查找类名对应在Entry中的class文件，&lt;b&gt;class文件内容读取到ClassFile实例&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;ClassFile clazz = entry.&lt;b&gt;findClass&lt;/b&gt;(name);&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//2&amp;nbsp;&lt;b&gt;执行类加载&lt;/b&gt;，这个Class对标的HotSpot &lt;b&gt;Klass&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;Class aClass = &lt;b&gt;doLoadClass&lt;/b&gt;(name, clazz);&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//如果类有超类，则加载超类&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;if (aClass.superClassName != null) {&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&amp;nbsp; &amp;nbsp; aClass.&lt;b&gt;setSuperClass&lt;/b&gt;(this.&lt;b&gt;loadClass&lt;/b&gt;(&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;aClass.superClassName));&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;}&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;if (Heap.findClass(&quot;java/lang/Class&quot;) != null) {&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&amp;nbsp; &amp;nbsp; Instance rcs = Heap.findClass(&quot;java/lang/Class&quot;)&lt;span style=&quot;background-color: initial;&quot;&gt;.newInstance();&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; &amp;nbsp; //Klass 与 Class 相互引用&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&amp;nbsp; &amp;nbsp; aClass.&lt;b&gt;setRuntimeClass&lt;/b&gt;(rcs);&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&amp;nbsp; &amp;nbsp; rcs.&lt;b&gt;setMetaClass&lt;/b&gt;(aClass);&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;}&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;return aClass;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;arcSize=3;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1001" y="1225" width="239" height="270" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-59" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;endArrow=open;endFill=0;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-1" target="eWhodD4vRtD6RhS1Q6ua-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-1" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;ClassFile&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;.class文件读取后的文件对象实例&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//魔数,确认是否能让虚拟机接受的class文件 在java中 通常为0xCAFEBABE&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int magic;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//jvm的次版本号&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int minorVersion;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//jvm的主版本号&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int majorVersion;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//常量池大小 用来解析后面的常量池&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int constantPoolSize;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//常量池结构&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//其中类如果没写继承任何其他类则默认继承Object&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final ConstantPool &lt;b&gt;cpInfo&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//类访问标志,16位的“bitmask”指出class文件定义的是类还是接口，&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;访问级别是public还是private，&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int &lt;b&gt;accessFlags&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//类索引(是常量池索引),class文件存储的类名类似完全限定名&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int thisClass;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//父类索引,同上&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int &lt;b&gt;superClass&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//接口索引数&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int interfacesCount;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//接口索引表，给出该类实现的所有接口的名字&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final Interfaces interfaces;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//字段数&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int fieldCount;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//字段结构，存储字段信息&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final Fields fields;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//方法数&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int methodsCount;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//方法结构，存储方法信息&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final Methods methods;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//属性数&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int attributesCount;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//属性结构，存储属性信息，&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;比如源码文件名（SourceFile）、&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;代码属性(Code)、异常处理表、行号表、局部变量表、常量表、&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;注解属性等&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final Attributes &lt;b&gt;attributes&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//class文件路径&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;private String source;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="-400" y="1160" width="360" height="640" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-3" target="eWhodD4vRtD6RhS1Q6ua-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-3" value="ClassLoader#&lt;b&gt;doLoadClass&lt;/b&gt;(String name, ClassFile classFile);&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;就是解析ClassFile内容转成对应类实例，比如方法-&amp;gt;Method,字段-&amp;gt;Field,超类接口等&lt;br&gt;最终创建 &lt;b&gt;Class&lt;/b&gt; 对象实例&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1280" y="1320" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-5" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Method&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;对标HotSpot的&lt;b&gt;KMethod&lt;/b&gt;类&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//方法的访问标志，如public private，&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;其中&amp;amp;0x0100这位表示是否是本地方法&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;amp;0x0008这位表示是否是静态方法&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int &lt;b&gt;accessFlags&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//方法名&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final String &lt;b&gt;name&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//参数以及返回值类型&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final String &lt;b&gt;descriptor&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//操作数栈最大size&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int maxStacks;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//本地变量表最大长度&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int maxLocals;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//指令Map，就是代码块中包含的字节码指令Map&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final Map&amp;lt;Integer, Instruction&amp;gt; &lt;b&gt;instructionMap&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final ExceptionTable exceptionTable;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final LineNumberTable lineNumberTable;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public Class clazz;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="-1600" y="1160" width="360" height="360" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-6" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Field&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;对标官方JDK的&lt;b&gt;KField&lt;/b&gt;类&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//字段的访问标志，如public private，&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;其中&lt;/font&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;amp;0x0008这位表示是否是静态字段&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int accessFlags;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final String name;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final String descriptor;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public UnionSlot val;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="-1600" y="1560" width="360" height="200" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-7" value="&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 11px;&quot;&gt;//MethodInfo -&amp;gt; Method&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;methods.add(this.&lt;/span&gt;&lt;b style=&quot;background-color: initial; font-size: 11px;&quot;&gt;map&lt;/b&gt;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;(methodInfo));&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;...&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 11px;&quot;&gt;//FieldInfo -&amp;gt; Field&lt;/font&gt;&lt;/div&gt;fields.add(this.map(fieldInfo));&lt;br style=&quot;font-size: 11px;&quot;&gt;...&lt;br style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 11px;&quot;&gt;//执行字段的静态初始化方法&lt;br style=&quot;font-size: 11px;&quot;&gt;&lt;/font&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;for (Field it : fields) {&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&amp;nbsp; if (it.isStatic()) {&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&amp;nbsp; &amp;nbsp; it.&lt;b&gt;init&lt;/b&gt;();&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&amp;nbsp; }&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;}&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;...&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 11px;&quot;&gt;//超类类名（常量池中索引scIdx位置），这里可以看到Java只能单继承&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;superClassName = Utils.getClassName(classFile.cpInfo, scIdx);&lt;br style=&quot;font-size: 11px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;...&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 11px;&quot;&gt;//实现的接口类名&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;interfaceNames.add(anInterface.getName());&lt;br style=&quot;font-size: 11px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;...&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;BootstrapMethods bootstrapMethods = classFile.getBootstrapMethods();&lt;br style=&quot;font-size: 11px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 11px;&quot;&gt;//&lt;b&gt;即类加载就是将class文件转成Class对象,对标HotSpot中的Klass&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;return new &lt;b style=&quot;font-size: 11px;&quot;&gt;Class&lt;/b&gt;(classFile.accessFlags, name, superClassName, interfaceNames, methods, fields,&amp;nbsp;&lt;span style=&quot;background-color: initial; font-size: 11px;&quot;&gt;bootstrapMethods, classFile.cpInfo, this, classFile);&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;arcSize=3;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1520" y="1200" width="360" height="320" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-11" value="Heap.registerClass(clazz.name, clazz);&lt;br style=&quot;font-size: 11px;&quot;&gt;String key = Utils.genNativeMethodKey(&lt;br&gt;method.clazz.name, method.name, method.descriptor);&lt;br style=&quot;font-size: 11px;&quot;&gt;NativeMethod nm = Heap.findMethod(key);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;nm不存在打印异常信息&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1001" y="1520" width="239" height="80" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-13" value="&lt;font color=&quot;#007fff&quot;&gt;就是遍历 clazz 中所有方法，寻找名为 main 的方法&lt;br&gt;注意这里 Class Method 对标HotSpot 中的Klass KMethod&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="730" y="1660" width="330" height="40" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-43" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-14" target="eWhodD4vRtD6RhS1Q6ua-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-14" value="&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//先创建一个方法栈帧&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;Frame frame = new &lt;b&gt;Frame&lt;/b&gt;(method);&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//参数实例列表&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;Instance[] kargs = new &lt;b&gt;Instance&lt;/b&gt;[args.length];&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;for (int i = 0; i &amp;lt; args.length; i++) {&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&amp;nbsp; kargs[i] = Utils.str2Obj(args[i], frame.method.clazz.classLoader);&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;}&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//其实就是检查 java.lang.String 是否加载，未加载则执行加载并存到堆中&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;Class arrClazz = Heap.findClass(&quot;[Ljava/lang/String;&quot;);&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;if (arrClazz == null) {&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&amp;nbsp; arrClazz = new Class(1, &quot;[Ljava/lang/String;&quot;, method.clazz.classLoader, null);&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&amp;nbsp; Heap.registerClass(arrClazz.name, arrClazz);&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;}&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//Instance[] -&amp;gt; InstanceArray&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;InstanceArray array = new &lt;b&gt;InstanceArray&lt;/b&gt;(arrClazz, kargs);&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//参数作为本地变量&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;frame.&lt;b&gt;setRef&lt;/b&gt;(0, array);&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;br style=&quot;font-size: 11px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 11px;&quot;&gt;&lt;b&gt;execute&lt;/b&gt;(frame);&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;arcSize=3;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="760" y="1760" width="400" height="260" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-16" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Slot&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;变量槽&lt;/b&gt;，表示某个变量或操作数，比如本地变量表就是一组变量槽&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//基本类型使用num存储，比如 int float long &#39;double 等&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//会转成 int 类型存储, 比如 int tmp = Float.floatToIntBits(val);&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//64位长的类型会转成两个int 使用两个 Slot 存储&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public Integer &lt;b&gt;num&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//对象类型使用 ref 存储对象引用&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public Instance &lt;b&gt;ref&lt;/b&gt;;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="-1600" y="880" width="360" height="200" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-28" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-22" target="eWhodD4vRtD6RhS1Q6ua-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-22" value="Entry#&lt;b&gt;findClass&lt;/b&gt;(String clazzName)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1280" y="1100" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-27" target="eWhodD4vRtD6RhS1Q6ua-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-27" value="cf = &lt;b&gt;ClassReader&lt;/b&gt;.&lt;b&gt;read&lt;/b&gt;(path);&lt;br&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;借助 DataInputStream 实现&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;按照 class 文件结构读取即可&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1520" y="1100" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-58" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-29" target="eWhodD4vRtD6RhS1Q6ua-57">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-29" value="这里面包含对class文件各种结构的读取，包括 magic、主次版本号、常量池内容、类访问标志、超类、接口、字段、方法、属性等等" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="1760" y="1100" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-31" value="&lt;font color=&quot;#007fff&quot;&gt;class文件中的属性用于保存比如源码文件名、&lt;br&gt;代码属性、异常处理表、行号表、局部变量表、常量表、&lt;br&gt;注解属性等&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1760" y="1040" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-32" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Attribute&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="-740" y="1600" width="240" height="80" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-34" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;endArrow=block;endFill=0;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-33" target="eWhodD4vRtD6RhS1Q6ua-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-33" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Code&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;代码属性&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int maxStacks;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final int maxLocals;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//代码对应的字节码指令&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final Instruction[] &lt;b&gt;instructions&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//异常处理表&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final ExceptionTable exceptionTable;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final Attributes attributes;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="-800" y="1720" width="360" height="200" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-37" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;endArrow=block;endFill=0;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-36" target="eWhodD4vRtD6RhS1Q6ua-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-36" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;ConstantValue&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;常量值&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final Object val;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="-1200" y="1720" width="360" height="100" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-38" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;Instruction (I)&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;字节码指令接口，每个字节码指令都有一个对应的实现&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//指令偏移量，javap 反编译可以看到每个字节码指令前都有一个编号，这个编号是字节码指令在这个方法中的偏移量（各个指令偏移量累加的结果）&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;default int &lt;b&gt;offset&lt;/b&gt;();&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;void execute(Frame frame);&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;default String format();&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="-800" y="1960" width="360" height="160" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-39" value="&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;比如执行 Hello#main(String args) 方法创建的栈帧：&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;public static void main(String[] args) {&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp; System.out.println(&quot;hello&quot;);&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;}&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;对应的字节码：&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;public static main([Ljava/lang/String;)V&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp;L0&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp; LINENUMBER 3 L0&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;b&gt;GETSTATIC&lt;/b&gt; java/lang/System.out : Ljava/io/PrintStream;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;b&gt;LDC&lt;/b&gt; &quot;hello&quot;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;b&gt;INVOKEVIRTUAL&lt;/b&gt; java/io/PrintStream.println (Ljava/lang/String;)V&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp;L1&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp; LINENUMBER 4 L1&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;b&gt;RETURN&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp;L2&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp; LOCALVARIABLE args [Ljava/lang/String; L0 L2 0&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp; MAXSTACK = 2&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; &amp;nbsp; MAXLOCALS = 1&lt;/div&gt;&lt;/div&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/font&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;frame = {Frame@1710}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;&lt;b style=&quot;font-size: 10px;&quot;&gt;method&lt;/b&gt; = {Method@1193}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;&lt;b style=&quot;font-size: 10px;&quot;&gt;localVars&lt;/b&gt; = {LocalVars@1717}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; slots = {Slot[1]@1748}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;&lt;b style=&quot;font-size: 10px;&quot;&gt;operandStack&lt;/b&gt; = {OperandStack@1720}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; slots = {Slot[2]@1749}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; top = 0&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;&lt;b style=&quot;font-size: 10px;&quot;&gt;instructionMap&lt;/b&gt; = {LinkedHashMap@1712}&amp;nbsp; size = 4&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Integer@1734} 0 -&amp;gt; {GetStaticInst@1735} &quot;GetStaticInst{clazz=&#39;java/lang/System&#39;, fieldName=&#39;out&#39;, fieldDescriptor=&#39;Ljava/io/PrintStream;&#39;}&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Integer@1736} 3 -&amp;gt; {LdcInst@1737} &quot;LdcInst{descriptor=&#39;Ljava/lang/String&#39;, val=hello}&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Integer@1738} 5 -&amp;gt; {InvokeVirtualInst@1739} &quot;InvokeVirtualInst{clazz=&#39;java/io/PrintStream&#39;, methodName=&#39;println&#39;, methodDescriptor=&#39;(Ljava/lang/String;)V&#39;}&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; {Integer@1740} 8 -&amp;gt; {ReturnInst@1741}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;&lt;b style=&quot;font-size: 10px;&quot;&gt;thread&lt;/b&gt; = {Thread@1723}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; top = 0&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp; frames = {Frame[1024]@1753}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;&lt;b style=&quot;font-size: 10px;&quot;&gt;nextPc&lt;/b&gt; = 0&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;&lt;b style=&quot;font-size: 10px;&quot;&gt;pc&lt;/b&gt; = 0&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&amp;nbsp;&lt;b style=&quot;font-size: 10px;&quot;&gt;stat&lt;/b&gt; = 0&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="760" y="2020" width="730" height="460" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-45" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-42" target="eWhodD4vRtD6RhS1Q6ua-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-42" value="Interpreter#&lt;b&gt;execute&lt;/b&gt;(Frame newFrame)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;解析器同步执行栈帧&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1200" y="1860" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-47" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-44" target="eWhodD4vRtD6RhS1Q6ua-46">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-44" value="&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;//将main()栈帧压入main栈帧容器顶部&lt;/font&gt;&lt;/div&gt;&lt;div&gt;final Thread env = MetaSpace.getMainEnv();&lt;/div&gt;&lt;div&gt;env.pushFrame(newFrame);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;newFrame.stat = Const.FAKE_FRAME;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;//从栈顶开始遍历方法所有字节码指令并执行&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;do {&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; //获取当前栈顶的栈帧&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; Frame frame = env.topFrame();&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; //pc = nextPc, 获取pc位置的字节码指令&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; Instruction instruction = frame.getInst();&lt;/div&gt;&lt;div&gt;&amp;nbsp; frame.nextPc += instruction.offset();&lt;/div&gt;&lt;div&gt;&amp;nbsp; traceBefore(instruction, frame); &lt;font color=&quot;#007fff&quot;&gt;//打印日志&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; //执行指令&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp; instruction.&lt;b&gt;execute&lt;/b&gt;(frame);&amp;nbsp;&lt;/div&gt;&lt;div&gt;} while (newFrame.stat == Const.FAKE_FRAME);&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;arcSize=2;" vertex="1" parent="1">
          <mxGeometry x="1440" y="1770" width="320" height="240" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-49" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-46" target="eWhodD4vRtD6RhS1Q6ua-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-46" value="&lt;b&gt;GetStaticInst&lt;/b&gt;#execute(Frame frame)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;从类中获取静态字段压入操作数栈&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="1800" y="1770" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-51" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-48" target="eWhodD4vRtD6RhS1Q6ua-50">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-65" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-48" target="eWhodD4vRtD6RhS1Q6ua-64">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-48" value="&lt;b&gt;LdcInst&lt;/b&gt;#execute(Frame frame)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;把常量池中的项压入操作数栈&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="1800" y="1850" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-53" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-50" target="eWhodD4vRtD6RhS1Q6ua-52">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-71" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-50" target="eWhodD4vRtD6RhS1Q6ua-70">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-50" value="&lt;b&gt;InvokeVirtualInst&lt;/b&gt;#execute(Frame frame)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;按照对象的类来调用实例方法，这里即调用 println 方法&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="1800" y="1945" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-52" value="&lt;b&gt;ReturnInst&lt;/b&gt;#execute(Frame frame)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;从方法中返回，返回值为void，这个指令内部主要就是将当前执行完的栈帧出栈&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="1800" y="2030" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-57" value="代码属性的解析" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="2000" y="1100" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-82" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;endArrow=block;endFill=0;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-61" target="eWhodD4vRtD6RhS1Q6ua-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-61" value="&lt;p style=&quot;margin:0px;margin-top:4px;text-align:center;&quot;&gt;&lt;b&gt;GetStaticInst&lt;/b&gt;&lt;br&gt;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;从类中获取静态字段指令&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//从哪个类中获取&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final String clazz;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//获取字段名&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final String fieldName;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//字段返回类型&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;public final String fieldDescriptor;&lt;/p&gt;&lt;hr size=&quot;1&quot;&gt;&lt;p style=&quot;margin:0px;margin-left:4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="-800" y="2160" width="360" height="160" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-62" value="0" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2280" y="1780" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-63" value="num = null&lt;br&gt;ref = System.out 实例引用" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="2320" y="1780" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-64" value="...&lt;br&gt;Interpreter.execute(klass.getMethod(&quot;&amp;lt;clinit&amp;gt;&quot;, &quot;()V&quot;));&lt;br&gt;...&lt;br&gt;&lt;font style=&quot;font-size: 10px;&quot; color=&quot;#007fff&quot;&gt;首次这里还会执行静态初始化方法，因为String 中有静态成员赋值操作&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="2040" y="1840" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-66" value="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2280" y="1840" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-67" value="num = null&lt;br&gt;ref = &quot;Hello&quot;的String实例引用" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="2320" y="1840" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-68" value="0" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2280" y="1880" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-69" value="num = null&lt;br&gt;ref = System.out 实例引用" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="2320" y="1880" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-72" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="eWhodD4vRtD6RhS1Q6ua-70" target="eWhodD4vRtD6RhS1Q6ua-44">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2260" y="1975" />
              <mxPoint x="2260" y="1740" />
              <mxPoint x="1420" y="1740" />
              <mxPoint x="1420" y="1830" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-70" value="调用实例方法(如PrintStream.println() )&lt;b&gt;会创建新的栈帧&lt;/b&gt;，将上一个栈帧的操作数栈pop压入新栈帧的本地变量表，然后新栈帧压入main栈顶，并更新相关参数，然后&lt;b&gt;回到前面的while循环会执行新的栈帧的指令&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="2040" y="1930" width="200" height="90" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-73" value="&lt;font color=&quot;#007fff&quot;&gt;println() 方法被编译为18个字节码指令&lt;br&gt;里面还有好几层方法调用&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2280" y="1940" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-75" value="&lt;font color=&quot;#007fff&quot;&gt;操作数栈&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2355" y="1740" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="eWhodD4vRtD6RhS1Q6ua-83" value="&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;Compiled from &quot;Hello.java&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;public class Hello {&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; public Hello();&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; &amp;nbsp; Code:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;0: aload_0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;1: invokespecial #1&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // Method java/lang/Object.&quot;&amp;lt;init&amp;gt;&quot;:()V&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;4: return&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; public static void main(java.lang.String[]);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; &amp;nbsp; Code:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;b&gt;0&lt;/b&gt;: getstatic&amp;nbsp; &amp;nbsp; &amp;nbsp;#2&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // Field java/lang/System.out:Ljava/io/PrintStream;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;3: ldc&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;#3&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // String hello&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;5: invokevirtual #4&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; // Method java/io/PrintStream.println:(Ljava/lang/String;)V&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;8: return&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1320" y="1960" width="510" height="240" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
