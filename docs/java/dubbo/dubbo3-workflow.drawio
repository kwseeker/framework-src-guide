<mxfile host="Electron" modified="2024-01-05T16:06:00.424Z" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.6.5 Chrome/114.0.5735.243 Electron/25.3.1 Safari/537.36" etag="HWpwyvh9PeXX07aahTW8" version="21.6.5" type="device">
  <diagram name="第 1 页" id="0Qyq6zLl2fmwNNAztLvH">
    <mxGraphModel dx="2901" dy="764" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="LEzOs3IW3RDwebMgTtXX-1" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" edge="1" parent="1" source="VcwutDj3bW0QsIIaURAk-86" target="VcwutDj3bW0QsIIaURAk-49">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1029.9999999999995" y="830.1764705882354" as="targetPoint" />
            <Array as="points">
              <mxPoint x="820" y="830" />
              <mxPoint x="820" y="505" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-49" value="1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="LEzOs3IW3RDwebMgTtXX-1">
          <mxGeometry x="-0.9223" y="2" relative="1" as="geometry">
            <mxPoint y="-7" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="30zH5Bm8l3Furl-t-DYP-1" value="&lt;h1 style=&quot;font-size: 16px;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Dubbo工作原理 &lt;/font&gt;&lt;font style=&quot;font-size: 16px; font-weight: normal;&quot;&gt;（3.2.9）&lt;/font&gt;&lt;/h1&gt;&lt;p style=&quot;font-size: 10px;&quot;&gt;Dubbo3 是在云原生背景下诞生的，使用 Dubbo 构建的微服务遵循云原生思想，能更好的复用底层云原生基础设施、贴合云原生微服务架构。&lt;br&gt;Spring初始化相关代码流程做了简化，详细参考 spring-context.drawio。&lt;br&gt;官方源码解析：&lt;span style=&quot;background-color: initial;&quot;&gt;https://cn.dubbo.apache.org/zh-cn/blog/java/codeanalysis/3.0.8/ (个人感觉官方源码解析写的东西还是碎片化的，没多大帮助)&lt;/span&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="40" y="10" width="680" height="100" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-8" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="VcwutDj3bW0QsIIaURAk-1" target="VcwutDj3bW0QsIIaURAk-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-9" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VcwutDj3bW0QsIIaURAk-1" target="VcwutDj3bW0QsIIaURAk-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-1" value="服务提供者" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="40" y="220" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="VcwutDj3bW0QsIIaURAk-2" target="VcwutDj3bW0QsIIaURAk-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="340" y="250" />
              <mxPoint x="340" y="730" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-26" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VcwutDj3bW0QsIIaURAk-2" target="VcwutDj3bW0QsIIaURAk-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-27" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VcwutDj3bW0QsIIaURAk-2" target="VcwutDj3bW0QsIIaURAk-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-2" value="自动配置&lt;br&gt;&lt;font style=&quot;font-size: 10px;&quot; color=&quot;#007fff&quot;&gt;一些自动配置类&lt;br&gt;先看个大概，后面用到再逆向看&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="200" y="220" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-3" value="接口层" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="40" y="120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-20" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VcwutDj3bW0QsIIaURAk-4" target="VcwutDj3bW0QsIIaURAk-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-21" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VcwutDj3bW0QsIIaURAk-4" target="VcwutDj3bW0QsIIaURAk-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-29" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VcwutDj3bW0QsIIaURAk-4" target="VcwutDj3bW0QsIIaURAk-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-4" value="服务消费者" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="40" y="1920" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-6" value="&lt;font color=&quot;#007fff&quot;&gt;提供接口定义，用于服务提供者和消费者生成远程调用的服务端和客户端Stub&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="170" y="120" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="VcwutDj3bW0QsIIaURAk-7" target="VcwutDj3bW0QsIIaURAk-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-7" value="系统初始化&lt;br&gt;&lt;font style=&quot;font-size: 9px;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;自动配置&lt;/b&gt;属于系统初始化，只不过总是先看自动配置的代码用于提供读源码的切入点&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="200" y="800" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-74" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="VcwutDj3bW0QsIIaURAk-10" target="VcwutDj3bW0QsIIaURAk-73" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-10" value="@EnableDubbo" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="360" y="700" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-87" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="VcwutDj3bW0QsIIaURAk-12" target="VcwutDj3bW0QsIIaURAk-86" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-88" value="..." style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="VcwutDj3bW0QsIIaURAk-87" vertex="1" connectable="0">
          <mxGeometry x="-0.263" y="-2" relative="1" as="geometry">
            <mxPoint x="5" y="-2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-65" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VcwutDj3bW0QsIIaURAk-12" target="LEzOs3IW3RDwebMgTtXX-59">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="570" y="830" />
              <mxPoint x="570" y="990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-66" value="..." style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="LEzOs3IW3RDwebMgTtXX-65">
          <mxGeometry x="0.7415" relative="1" as="geometry">
            <mxPoint x="6" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-98" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="VcwutDj3bW0QsIIaURAk-12" target="LEzOs3IW3RDwebMgTtXX-97">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-101" value="..." style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="LEzOs3IW3RDwebMgTtXX-98">
          <mxGeometry x="-0.571" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-106" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VcwutDj3bW0QsIIaURAk-12" target="LEzOs3IW3RDwebMgTtXX-105">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="570" y="830" />
              <mxPoint x="570" y="1230" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-115" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VcwutDj3bW0QsIIaURAk-12" target="LEzOs3IW3RDwebMgTtXX-114">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="570" y="830" />
              <mxPoint x="570" y="1310" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-118" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VcwutDj3bW0QsIIaURAk-12" target="LEzOs3IW3RDwebMgTtXX-116">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="570" y="830" />
              <mxPoint x="570" y="1390" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-122" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VcwutDj3bW0QsIIaURAk-12" target="LEzOs3IW3RDwebMgTtXX-121">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="570" y="830" />
              <mxPoint x="570" y="1470" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-12" value="&lt;b&gt;invokeBeanFactoryPostProcessors&lt;/b&gt;(&lt;br&gt;beanFactory);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;主要是针对 BeanDefinition&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="360" y="800" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="VcwutDj3bW0QsIIaURAk-15" target="VcwutDj3bW0QsIIaURAk-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-15" value="自动配置&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;一些自动配置类&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="200" y="1920" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="VcwutDj3bW0QsIIaURAk-17" target="VcwutDj3bW0QsIIaURAk-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-17" value="服务发现" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="200" y="2020" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-18" value="@EnableDubbo" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="360" y="1920" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-19" value="&amp;nbsp;@DubboReference" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="360" y="2020" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-31" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" parent="1" source="VcwutDj3bW0QsIIaURAk-22" target="VcwutDj3bW0QsIIaURAk-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-22" value="dubbo-spring-boot-starter&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;核心功能配置&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="360" y="220" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-72" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="VcwutDj3bW0QsIIaURAk-24" target="VcwutDj3bW0QsIIaURAk-71" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-24" value="dubbo-nacos-spring-boot-starter&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;服务发现功能配置，支持Nacos、ZK、Consul、ETCD, 这里以Nacos为例&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="360" y="460" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-28" value="远程调用" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="200" y="2120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" parent="1" source="VcwutDj3bW0QsIIaURAk-30" target="VcwutDj3bW0QsIIaURAk-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-38" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VcwutDj3bW0QsIIaURAk-30" target="VcwutDj3bW0QsIIaURAk-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-39" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VcwutDj3bW0QsIIaURAk-30" target="VcwutDj3bW0QsIIaURAk-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-30" value="dubbo-spring-boot-autoconfigure&lt;br&gt;内部依赖&amp;nbsp;&lt;br&gt;dubbo-spring-boot-autoconfigure-compatible" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="600" y="220" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-41" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="VcwutDj3bW0QsIIaURAk-32" target="VcwutDj3bW0QsIIaURAk-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-44" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VcwutDj3bW0QsIIaURAk-32" target="VcwutDj3bW0QsIIaURAk-42" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1060" y="250" />
              <mxPoint x="1060" y="330" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-32" value="DubboRelaxedBinding2AutoConfiguration&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;@ConditionalOnProperty 属性条件：dubbo.enabled = true, 默认就是true&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="840" y="220" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-46" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="VcwutDj3bW0QsIIaURAk-34" target="VcwutDj3bW0QsIIaURAk-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-48" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VcwutDj3bW0QsIIaURAk-34" target="VcwutDj3bW0QsIIaURAk-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-53" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="VcwutDj3bW0QsIIaURAk-34" target="VcwutDj3bW0QsIIaURAk-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-34" value="DubboAutoConfiguration" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="840" y="380" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-36" value="DubboRelaxedBindingAutoConfiguration&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;DubboRelaxedBinding2AutoConfiguration&lt;br&gt;存在的话此配置类不会起作用&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="840" y="300" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-59" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" source="VcwutDj3bW0QsIIaURAk-40" target="VcwutDj3bW0QsIIaURAk-51" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1290" y="250" />
              <mxPoint x="1290" y="560" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-40" value="@Bean(name = BASE_PACKAGES_BEAN_NAME)&lt;br style=&quot;font-size: 10px;&quot;&gt;Set&amp;lt;String&amp;gt; dubboBasePackages(...)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;内部通过PropertyResolver读取base-packages&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1080" y="220" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-42" value="&lt;div style=&quot;font-size: 9px;&quot;&gt;@Bean(RELAXED_DUBBO_CONFIG&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;_BINDER_BEAN_NAME)&lt;/div&gt;&lt;div style=&quot;font-size: 8px;&quot;&gt;&lt;span style=&quot;font-size: 9px;&quot;&gt;&amp;nbsp; &amp;nbsp; @Scope(scopeName = &lt;/span&gt;&lt;font style=&quot;font-size: 8px;&quot;&gt;SCOPE_PROTOTYPE&lt;/font&gt;)&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;&lt;b style=&quot;font-size: 9px;&quot;&gt;ConfigurationBeanBinder&lt;/b&gt; relaxedDubboConfigBinder()&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1080" y="300" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-45" value="@EnableConfigurationProperties({&lt;br&gt;&lt;b&gt;DubboConfigurationProperties&lt;/b&gt;.class})&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;Dubbo配置属性类&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1080" y="380" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-50" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="VcwutDj3bW0QsIIaURAk-47" target="VcwutDj3bW0QsIIaURAk-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="VcwutDj3bW0QsIIaURAk-47" target="LEzOs3IW3RDwebMgTtXX-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-47" value="@EnableDubboConfig" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1080" y="460" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="VcwutDj3bW0QsIIaURAk-49" target="LEzOs3IW3RDwebMgTtXX-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-49" value="@Import({&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;b style=&quot;font-size: 9px;&quot;&gt;DubboConfigConfigurationRegistrar&lt;/b&gt;.class})" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1320" y="460" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-51" value="创建 &lt;b&gt;ServiceAnnotationPostProcessor&lt;/b&gt;&amp;nbsp;类型Bean通过&amp;nbsp;@Qualifier(BASE_PACKAGES_BEAN_NAME) 注入依赖&amp;nbsp;dubboBasePackages&lt;br&gt;&lt;font style=&quot;font-size: 9px;&quot; color=&quot;#007fff&quot;&gt;如果没有设置 dubbo.scan.base-packages 属性不会创建，测试DEMO没有配置此属性&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1080" y="540" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-58" value="&lt;font color=&quot;#007fff&quot; style=&quot;&quot;&gt;创建了一个Bean dubboBasePackages&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;span style=&quot;font-size: 10px;&quot;&gt;内容是Dubbo base-packages 列表&lt;/span&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1300" y="230" width="190" height="40" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-60" value="&lt;font color=&quot;#007fff&quot; style=&quot;&quot;&gt;创建了一个Bean relaxedDubboConfigBinder&lt;br style=&quot;font-size: 10px;&quot;&gt;TODO 用途&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1300" y="310" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-63" value="后面忽略一些ApplicationListener &lt;br style=&quot;font-size: 10px;&quot;&gt;和 应用上下文初始化器" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#007FFF;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="615" y="280" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-68" value="&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1770" y="475" width="20" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-71" value="依赖 nacos-client" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="600" y="460" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-77" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="VcwutDj3bW0QsIIaURAk-73" target="VcwutDj3bW0QsIIaURAk-76" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-73" value="&lt;div&gt;@EnableDubboConfig&lt;/div&gt;&lt;div&gt;&lt;b&gt;@DubboComponentScan&lt;/b&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="600" y="700" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-79" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="VcwutDj3bW0QsIIaURAk-76" target="VcwutDj3bW0QsIIaURAk-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-76" value="@Import(&lt;br&gt;&lt;b&gt;DubboComponentScanRegistrar&lt;/b&gt;.class)&lt;br&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px;&quot;&gt;主要是扫描 @DubboComponentScan basePakcages、basePackageClasses，&lt;/font&gt;&lt;span style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;@EnableDubbo scanBasePackages、scanBasePackageClasses 注册Bean定义&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="840" y="690" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-52" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="VcwutDj3bW0QsIIaURAk-78" target="LEzOs3IW3RDwebMgTtXX-22">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1780" y="730" />
              <mxPoint x="1780" y="505" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-54" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="VcwutDj3bW0QsIIaURAk-78" target="LEzOs3IW3RDwebMgTtXX-53">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-63" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;" edge="1" parent="1" source="VcwutDj3bW0QsIIaURAk-78" target="LEzOs3IW3RDwebMgTtXX-4">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1540" y="715" />
              <mxPoint x="1540" y="505" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-78" value="&lt;div&gt;DubboSpringInitializer.initialize(registry);&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;前面已经执行过一次了，这次就不会再初始化了&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1080" y="700" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-84" value="&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;如果想研究Dubbo服务一步步怎么启动的可以参考&lt;br&gt;日志输出，给对应的类加断点一步步调试，也可以顺着自动配置类一步步深入&lt;br&gt;&lt;br&gt;如果只想看关键点实现原理，可以通过注解类、NacosClient&amp;nbsp;&lt;br&gt;接口等找到相应代码加端点调试&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="200" y="290" width="280" height="90" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-85" value="&lt;b&gt;Spring refresh()&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="405" y="770" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-50" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" edge="1" parent="1" source="VcwutDj3bW0QsIIaURAk-86" target="VcwutDj3bW0QsIIaURAk-76">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="830" y="830" />
              <mxPoint x="830" y="750" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-51" value="2" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="LEzOs3IW3RDwebMgTtXX-50">
          <mxGeometry x="-0.346" y="1" relative="1" as="geometry">
            <mxPoint y="-9" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-86" value="&lt;div style=&quot;font-size: 9px;&quot;&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;&lt;b&gt;registrars&lt;/b&gt;.forEach((registrar, metadata) -&amp;gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;&lt;font style=&quot;font-size: 9px;&quot;&gt;registrar.registerBeanDefinitions(metadata, this.registry,this.importBeanNameGenerator));&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px;&quot;&gt;遍历所有ImportBeanDefinitionRegistrar实例注册BeanDefinition，这里只关注Dubbo的&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="600" y="800" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VcwutDj3bW0QsIIaURAk-89" value="&lt;font style=&quot;font-size: 10px;&quot;&gt;ConfigurationClassBeanDefinitionReader&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="595" y="770" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-2" value="boolean &lt;b&gt;multiple&lt;/b&gt;() default true;&lt;br&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;用于选择Bean实现 DubboConfigConfiguration.&lt;b&gt;Single&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;或 DubboConfigConfiguration.&lt;b&gt;Multiple&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1320" y="380" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-7" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-22" target="LEzOs3IW3RDwebMgTtXX-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-4" value="&lt;b&gt;DubboSpringInitializer&lt;/b&gt;.initialize(registry);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;registry是Bean工厂&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="1560" y="460" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-6" target="LEzOs3IW3RDwebMgTtXX-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-6" target="LEzOs3IW3RDwebMgTtXX-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-6" value="customize(context);&lt;br style=&quot;font-size: 10px;&quot;&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="2040" y="460" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-21" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;endArrow=diamondThin;endFill=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-12" target="LEzOs3IW3RDwebMgTtXX-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-12" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center; font-size: 10px;&quot;&gt;&lt;b style=&quot;font-size: 10px;&quot;&gt;DubboSpringInitializer &lt;/b&gt;&lt;span style=&quot;font-size: 10px;&quot;&gt;Dubbo初始化上下文的容器&lt;/span&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//Dubbo初始化上下文Map&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;private static final Map&amp;lt;BeanDefinitionRegistry, DubboSpringInitContext&amp;gt; &lt;b&gt;contextMap&lt;/b&gt; =&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;&amp;nbsp; new ConcurrentHashMap&amp;lt;&amp;gt;();&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;public static void initialize(BeanDefinitionRegistry registry)&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="-440" y="680" width="400" height="100" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-27" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;endArrow=diamondThin;endFill=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-13" target="LEzOs3IW3RDwebMgTtXX-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-13" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;DubboSpringInitContext&lt;/b&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;private BeanDefinitionRegistry registry;&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private ConfigurableListableBeanFactory beanFactory;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private ApplicationContext applicationContext;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private &lt;b&gt;ModuleModel&lt;/b&gt; moduleModel;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 9px;&quot;&gt;private final Map&amp;lt;String, Object&amp;gt; &lt;b&gt;moduleAttributes&lt;/b&gt; = new HashMap&amp;lt;&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 9px;&quot;&gt;&lt;font style=&quot;font-size: 9px;&quot; color=&quot;#007fff&quot;&gt;//这里绑定的意思是DubboSpringInitContext、ApplicationModel、ModuleModel是否已经注册到Spring Bean容器&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private volatile boolean &lt;b&gt;bound&lt;/b&gt;;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="-920" y="680" width="440" height="160" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-43" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-14" target="LEzOs3IW3RDwebMgTtXX-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-14" value="applicationModel = ApplicationModel.defaultModel();&lt;br style=&quot;font-size: 10px;&quot;&gt;moduleModel = applicationModel.getDefaultModule();&lt;br style=&quot;font-size: 10px;&quot;&gt;context.setModuleModel(moduleModel);" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" vertex="1" parent="1">
          <mxGeometry x="2040" y="620" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-16" target="LEzOs3IW3RDwebMgTtXX-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-41" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-16" target="LEzOs3IW3RDwebMgTtXX-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-16" value="&lt;div style=&quot;font-size: 9px;&quot;&gt;Set&amp;lt;DubboSpringInitCustomizer&amp;gt; customizers = FrameworkModel.&lt;b&gt;defaultModel&lt;/b&gt;()&lt;/div&gt;&lt;div style=&quot;&quot;&gt;.getExtensionLoader(&lt;font style=&quot;font-size: 8px;&quot;&gt;&lt;b&gt;DubboSpringInitCustomizer&lt;/b&gt;&lt;/font&gt;.class)&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;.getSupportedExtensionInstances();&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;SPI 加载&amp;nbsp;&lt;b&gt;DubboSpringInitCustomizer&lt;/b&gt; 并遍历执行&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=left;" vertex="1" parent="1">
          <mxGeometry x="2270" y="460" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-18" target="LEzOs3IW3RDwebMgTtXX-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-18" value="defaultInstance = new &lt;b&gt;FrameworkModel&lt;/b&gt;();&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;初始化了很多内部的组件，TODO 后面用到再回来看，需要结合业务理解&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="2520" y="460" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-25" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;endArrow=block;endFill=0;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-20" target="LEzOs3IW3RDwebMgTtXX-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-20" value="&lt;p style=&quot;margin: 4px 0px 0px; text-align: center;&quot;&gt;&lt;b&gt;FrameworkModel &lt;/b&gt;框架模型, 单例模式&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;public static final String NAME = &quot;FrameworkModel&quot;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private static final AtomicLong index = new AtomicLong(1);&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private static final Object globalLock = new Object();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private &lt;b&gt;static&lt;/b&gt; volatile FrameworkModel &lt;b&gt;defaultInstance&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private &lt;b&gt;static&lt;/b&gt; final List&amp;lt;FrameworkModel&amp;gt; &lt;b&gt;allInstances&lt;/b&gt; = new CopyOnWriteArrayList&amp;lt;&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final AtomicLong appIndex = new AtomicLong(0);&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private volatile ApplicationModel &lt;b&gt;defaultAppModel&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final List&amp;lt;ApplicationModel&amp;gt; &lt;b&gt;applicationModels&lt;/b&gt; = new CopyOnWriteArrayList&amp;lt;&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final List&amp;lt;ApplicationModel&amp;gt; &lt;b&gt;pubApplicationModels&lt;/b&gt; = new CopyOnWriteArrayList&amp;lt;&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final FrameworkServiceRepository &lt;b&gt;serviceRepository&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final ApplicationModel &lt;b&gt;internalApplicationModel&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final ReentrantLock destroyLock = new ReentrantLock();&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;public ApplicationModel getApplicationModel()&amp;nbsp;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-1400" y="400" width="440" height="220" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-4" target="LEzOs3IW3RDwebMgTtXX-22">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1760" y="490" as="sourcePoint" />
            <mxPoint x="2040" y="490" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-22" value="创建初始化上下文 &lt;b&gt;DubboSpringInitContext&lt;/b&gt; 实例，然后执行初始化" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1800" y="460" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-24" value="&lt;div style=&quot;text-align: center;&quot;&gt;&lt;b&gt;ScopeModel &lt;/b&gt;(A)&lt;/div&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private String internalId;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private String modelName;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private String desc;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final Set&amp;lt;ClassLoader&amp;gt; classLoaders = new ConcurrentHashSet&amp;lt;&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final ScopeModel parent;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final ExtensionScope scope;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private volatile ExtensionDirector extensionDirector;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private volatile ScopeBeanFactory beanFactory;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final List&amp;lt;ScopeModelDestroyListener&amp;gt; destroyListeners = new CopyOnWriteArrayList&amp;lt;&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final List&amp;lt;ScopeClassLoaderListener&amp;gt; classLoaderListeners = new CopyOnWriteArrayList&amp;lt;&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final Map&amp;lt;String, Object&amp;gt; attributes = new ConcurrentHashMap&amp;lt;&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final AtomicBoolean destroyed = new AtomicBoolean(false);&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final boolean internalScope;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;protected final Object instLock = new Object();&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-920" y="120" width="440" height="220" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-28" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;endArrow=block;endFill=0;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-26" target="LEzOs3IW3RDwebMgTtXX-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-26" value="&lt;div style=&quot;text-align: center;&quot;&gt;&lt;b&gt;ModuleModel&amp;nbsp; &lt;/b&gt;单例模式&lt;/div&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;public static final String NAME = &quot;FrameworkModel&quot;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private static final AtomicLong index = new AtomicLong(1);&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private static final Object globalLock = new Object();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private &lt;b&gt;static&lt;/b&gt; volatile FrameworkModel &lt;b&gt;defaultInstance&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private &lt;b&gt;static&lt;/b&gt; final List&amp;lt;FrameworkModel&amp;gt; &lt;b&gt;allInstances&lt;/b&gt; = new CopyOnWriteArrayList&amp;lt;&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final AtomicLong appIndex = new AtomicLong(0);&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private volatile ApplicationModel &lt;b&gt;defaultAppModel&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final List&amp;lt;ApplicationModel&amp;gt; &lt;b&gt;applicationModels&lt;/b&gt; = new CopyOnWriteArrayList&amp;lt;&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final List&amp;lt;ApplicationModel&amp;gt; &lt;b&gt;pubApplicationModels&lt;/b&gt; = new CopyOnWriteArrayList&amp;lt;&amp;gt;();&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final FrameworkServiceRepository &lt;b&gt;serviceRepository&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final ApplicationModel &lt;b&gt;internalApplicationModel&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private final ReentrantLock destroyLock = new ReentrantLock();&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-920" y="400" width="440" height="220" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-29" target="LEzOs3IW3RDwebMgTtXX-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-29" value="initialize();" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="2760" y="460" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-31" target="LEzOs3IW3RDwebMgTtXX-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-31" value="TypeDefinitionBuilder.initBuilders(this);" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="2760" y="540" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-33" target="LEzOs3IW3RDwebMgTtXX-35">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2860" y="690" />
              <mxPoint x="2900" y="690" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-33" value="serviceRepository = new FrameworkServiceRepository(this);" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="2760" y="620" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-35" target="LEzOs3IW3RDwebMgTtXX-37">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2900" y="790" />
              <mxPoint x="2960" y="790" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-35" value="&lt;div&gt;ExtensionLoader&amp;lt;ScopeModelInitializer&amp;gt; initializerExtensionLoader =&lt;/div&gt;&lt;div&gt;this.getExtensionLoader(&lt;b&gt;ScopeModelInitializer&lt;/b&gt;.class);&lt;/div&gt;&lt;div&gt;Set&amp;lt;ScopeModelInitializer&amp;gt; &lt;b&gt;initializers&lt;/b&gt; = initializerExtensionLoader.getSupportedExtensionInstances();&lt;/div&gt;&lt;div&gt;for (ScopeModelInitializer initializer : &lt;b&gt;initializers&lt;/b&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; initializer.&lt;b&gt;initializeFrameworkModel&lt;/b&gt;(this);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=left;arcSize=7;" vertex="1" parent="1">
          <mxGeometry x="2760" y="700" width="280" height="80" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-37" value="&lt;div&gt;internalApplicationModel = new ApplicationModel(this, true);&lt;/div&gt;&lt;div&gt;internalApplicationModel&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; .getApplicationConfigManager()&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; .setApplication(new ApplicationConfig(&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; internalApplicationModel, CommonConstants.DUBBO_INTERNAL_APPLICATION));&lt;/div&gt;&lt;div&gt;internalApplicationModel.setModelName(CommonConstants.DUBBO_INTERNAL_APPLICATION);&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=left;arcSize=7;" vertex="1" parent="1">
          <mxGeometry x="2760" y="800" width="400" height="80" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-39" value="initializers = {LinkedHashSet@5781}  size = 14&#xa; 0 = {CertScopeModelInitializer@5784} &#xa; 1 = {ClusterScopeModelInitializer@5788} &#xa; 2 = {CommonScopeModelInitializer@5789} &#xa; 3 = {ConfigScopeModelInitializer@5790} &#xa; 4 = {SpringScopeModelInitializer@5791} &#xa; 5 = {MetadataScopeModelInitializer@5792} &#xa; 6 = {MetricsScopeModelInitializer@5793} &#xa; 7 = {RegistryScopeModelInitializer@5794} &#xa; 8 = {RemotingScopeModelInitializer@5795} &#xa; 9 = {Fastjson2ScopeModelInitializer@5796} &#xa; 10 = {Hessian2ScopeModelInitializer@5797} &#xa; 11 = {QosScopeModelInitializer@5798} &#xa; 12 = {RpcScopeModelInitializer@5799} &#xa; 13 = {XdsScopeModelInitializer@5800}" style="text;whiteSpace=wrap;fontSize=10;fontColor=#007FFF;" vertex="1" parent="1">
          <mxGeometry x="3050" y="600" width="280" height="190" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-40" value="&lt;div&gt;DubboSpringInitCustomizerHolder customizerHolder = DubboSpringInitCustomizerHolder.get();&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;customizers = customizerHolder.getCustomizers();&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;&lt;/div&gt;&lt;font color=&quot;#007fff&quot;&gt;从 DubboSpringInitCustomizerHolder 读取&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;DubboSpringInitCustomizer&lt;/b&gt; 并遍历执行&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=left;" vertex="1" parent="1">
          <mxGeometry x="2270" y="540" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-45" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-42" target="LEzOs3IW3RDwebMgTtXX-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-48" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-42" target="LEzOs3IW3RDwebMgTtXX-104">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2280" y="840" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2260" y="730" />
              <mxPoint x="2260" y="840" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-42" value="&lt;div style=&quot;font-size: 9px;&quot;&gt;&lt;b style=&quot;font-size: 9px;&quot;&gt;registerContextBeans&lt;/b&gt;(beanFactory, context);&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;context.markAsBound();&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;moduleModel.setLifeCycleManagedExternally(true);&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;DubboBeanUtils.&lt;b style=&quot;font-size: 9px;&quot;&gt;registerCommonBeans&lt;/b&gt;(registry);&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="2030" y="700" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-44" value="&lt;div style=&quot;font-size: 10px;&quot;&gt;&lt;div&gt;registerSingleton(beanFactory, &lt;b&gt;context&lt;/b&gt;);&lt;/div&gt;&lt;div&gt;registerSingleton(beanFactory, &lt;br&gt;&amp;nbsp; context.&lt;b&gt;getApplicationModel&lt;/b&gt;());&lt;/div&gt;&lt;div&gt;registerSingleton(beanFactory, &lt;br&gt;&amp;nbsp; context.&lt;b&gt;getModuleModel&lt;/b&gt;());&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="2280" y="700" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-46" value="&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;将DubboSpringInitContext、ApplicationModel、&lt;br&gt;ModuleModel 实例注册到Spring容器&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="2481" y="710" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-56" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-53" target="LEzOs3IW3RDwebMgTtXX-55">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-53" value="Set&amp;lt;String&amp;gt; packagesToScan = getPackagesToScan(&lt;br&gt;importingClassMetadata);&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px;&quot;&gt;从注解中提取需要扫描的包路径，测试DEMO中就是“org.apache.dubbo.springboot.demo.provider”&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1080" y="780" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-58" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-55" target="LEzOs3IW3RDwebMgTtXX-57">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-55" value="registerServiceAnnotationPostProcessor(&lt;br&gt;packagesToScan, registry);" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1080" y="860" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-60" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-57" target="LEzOs3IW3RDwebMgTtXX-59">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1420" y="950" />
              <mxPoint x="705" y="950" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-57" value="BeanDefinitionBuilder builder = rootBeanDefinition(&lt;br&gt;&lt;b&gt;&amp;nbsp; ServiceAnnotationPostProcessor&lt;/b&gt;.class);&lt;br&gt;AbstractBeanDefinition beanDefinition = &lt;br&gt;&amp;nbsp; builder.getBeanDefinition();&lt;br style=&quot;font-size: 9px;&quot;&gt;BeanDefinitionReaderUtils.registerWithGeneratedName(&lt;br&gt;&amp;nbsp; beanDefinition, registry);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;注册了ServiceAnnotationPostProcessor 这个后置处理器BeanDefinition&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=left;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1300" y="840" width="240" height="100" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-68" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-59" target="LEzOs3IW3RDwebMgTtXX-67">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-72" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-59" target="LEzOs3IW3RDwebMgTtXX-71">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-96" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-59" target="LEzOs3IW3RDwebMgTtXX-95">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-59" value="&lt;b style=&quot;font-size: 10px;&quot;&gt;ServiceAnnotationPostProcessor&lt;/b&gt;&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;也是 BeanDefinitionRegistryPostProcessor 类型后置处理器，用于扫描Dubbo服务的BeanDefinition&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="600" y="960" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-70" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-67" target="LEzOs3IW3RDwebMgTtXX-69">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-67" value="ServiceAnnotationPostProcessor#&lt;br&gt;&lt;b&gt;afterPropertiesSet&lt;/b&gt;()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;前面定义了此后置处理器的Bean定义，此后置处理器也需要先创建自身的Bean，然后为其他Bean执行后置处理，自身的Bean初始化后执行此方法&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=center;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="840" y="960" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-69" value="this.&lt;b&gt;resolvedPackagesToScan&lt;/b&gt; = resolvePackagesToScan(packagesToScan);" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=center;" vertex="1" parent="1">
          <mxGeometry x="1080" y="960" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-74" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-71" target="LEzOs3IW3RDwebMgTtXX-73">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-71" value="ServiceAnnotationPostProcessor#&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;b style=&quot;font-size: 10px;&quot;&gt;postProcessBeanDefinitionRegistry&lt;/b&gt;(&lt;br style=&quot;font-size: 10px;&quot;&gt;BeanDefinitionRegistry registry)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="840" y="1040" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-79" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-73" target="LEzOs3IW3RDwebMgTtXX-78">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-73" value="this.registry = registry;&lt;br&gt;&lt;b&gt;scanServiceBeans&lt;/b&gt;(&lt;br&gt;resolvedPackagesToScan, registry);" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=center;" vertex="1" parent="1">
          <mxGeometry x="1080" y="1040" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-75" value="&lt;div style=&quot;text-align: center;&quot;&gt;&lt;b&gt;ServiceAnnotationPostProcessor&lt;/b&gt;&lt;/div&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;&lt;/p&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;nbsp;实现了BeanDefinitionRegistryPostProcessor，此后置处理器用于扫描Dubbo服务并注册BeanDefinition&lt;br&gt;&lt;br&gt;&lt;/font&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;public static final String BEAN_NAME = &quot;dubboServiceAnnotationPostProcessor&quot;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;// 扫描的注解类型，Dubbo服务定义注解是 @DubboService @Service (不是Spring的 @Service)&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private static final List&amp;lt;Class&amp;lt;? extends Annotation&amp;gt;&amp;gt; &lt;b&gt;serviceAnnotationTypes&lt;/b&gt; = &lt;br&gt;&amp;nbsp; loadServiceAnnotationTypes();&lt;/p&gt;&amp;nbsp; &lt;font color=&quot;#007fff&quot;&gt;//原始需要扫描的包路径，可以通过配置文件、注解修改&lt;/font&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;protected final Set&amp;lt;String&amp;gt; &lt;b&gt;packagesToScan&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//经过处理后最终需要扫描的包路径（比如原始包路径可能有多个使用分隔符连接）&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private Set&amp;lt;String&amp;gt; &lt;b&gt;resolvedPackagesToScan&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private Environment environment;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private ResourceLoader resourceLoader;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private ClassLoader classLoader;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private BeanDefinitionRegistry &lt;b&gt;registry&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//已经扫描过的包和类的记录器，用于ExcludeFilter防止重复扫描&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private ServicePackagesHolder &lt;b&gt;servicePackagesHolder&lt;/b&gt;;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//是否已经开始扫描BeanDefinition&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px;&quot;&gt;private volatile boolean &lt;b&gt;scanned&lt;/b&gt; = false;&lt;/p&gt;&lt;hr style=&quot;font-size: 10px;&quot;&gt;&lt;p style=&quot;margin: 0px 0px 0px 4px; font-size: 10px;&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=10;fontFamily=Helvetica;html=1;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="-440" y="880" width="400" height="280" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-81" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-78" target="LEzOs3IW3RDwebMgTtXX-80">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-78" value="&lt;div&gt;DubboClassPathBeanDefinitionScanner scanner =&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;new&amp;nbsp;&lt;b&gt;DubboClassPathBeanDefinitionScanner&lt;/b&gt;(&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;registry, environment, resourceLoader);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;Dubbo 重写了BeanDefinition扫描器用于扫描Dubbo服务&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=center;" vertex="1" parent="1">
          <mxGeometry x="1320" y="1040" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-83" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-80" target="LEzOs3IW3RDwebMgTtXX-82">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-80" value="&lt;div&gt;for (Class&amp;lt;? extends Annotation&amp;gt; annotationType &lt;br&gt;&amp;nbsp; &amp;nbsp; : &lt;b&gt;serviceAnnotationTypes&lt;/b&gt;) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; scanner.&lt;b&gt;addIncludeFilter&lt;/b&gt;(new &lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;AnnotationTypeFilter(annotationType));&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;给每个注解类型注册了一个过滤器&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;即用于过滤 &lt;b&gt;@DubboService&lt;/b&gt; &lt;b&gt;@Service&lt;/b&gt;注解的类&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=left;arcSize=9;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="1320" y="1120" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-85" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-82" target="LEzOs3IW3RDwebMgTtXX-84">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-82" value="&lt;div&gt;&lt;div&gt;ScanExcludeFilter scanExcludeFilter = new ScanExcludeFilter();&lt;/div&gt;&lt;div&gt;scanner.addExcludeFilter(scanExcludeFilter);&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;还注册了一个排除过滤器，看实现是防止重复扫描的&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=left;arcSize=9;" vertex="1" parent="1">
          <mxGeometry x="1320" y="1220" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-87" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-84" target="LEzOs3IW3RDwebMgTtXX-86">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-84" value="&lt;div&gt;for (String packageToScan : packagesToScan)：&lt;br&gt;&lt;/div&gt;&lt;div&gt;scanner.&lt;b&gt;scan&lt;/b&gt;(packageToScan);&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;遍历所有包路径执行扫描，扫描到的类的BeanDefinition 注册到Spring Bean容器，在 &lt;b&gt;beanDefinitionMap&lt;/b&gt; 中可以查到&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=left;arcSize=9;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="1320" y="1320" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-89" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-86" target="LEzOs3IW3RDwebMgTtXX-88">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-86" value="&lt;div style=&quot;font-size: 9px;&quot;&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;Set&amp;lt;BeanDefinitionHolder&amp;gt; beanDefinitionHolders =&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;findServiceBeanDefinitionHolders(scanner, packageToScan, registry, beanNameGenerator);&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px;&quot;&gt;又扫描了一次，这次将BeanDefinition和BeanName封装成了BeanDefinitionHolder&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=left;arcSize=9;" vertex="1" parent="1">
          <mxGeometry x="1315" y="1400" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-91" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-88" target="LEzOs3IW3RDwebMgTtXX-90">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-88" value="&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;for &lt;b&gt;beanDefinitionHolders&lt;/b&gt;:&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;processScannedBeanDefinition&lt;/b&gt;(&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&amp;nbsp; beanDefinitionHolder);&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;遍历第二次扫描获取的BeanDefinitionHolder，依次&lt;b&gt;创建&lt;/b&gt;并注册RootBeanDefinition实例到Spring容器&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=left;arcSize=9;" vertex="1" parent="1">
          <mxGeometry x="1315" y="1480" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-90" value="&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;registry.&lt;b&gt;registerBeanDefinition&lt;/b&gt;(&lt;/div&gt;&lt;div style=&quot;&quot;&gt;serviceBeanName, serviceBeanDefinition);&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;如果已经注册且是同一BeanDefinition就直接返回，不是同一个就抛异常，没有注册就重新注册&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=center;arcSize=9;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="1560" y="1480" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-93" value="这一步注册的是&amp;nbsp;ScannedGenericBeanDefinition&lt;br&gt;beanName是类名首字母小写，比如 demoServiceImpl" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" vertex="1" parent="1">
          <mxGeometry x="1520" y="1330" width="260" height="40" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-94" value="这一步注册的是&amp;nbsp;RootBeanDefinition&lt;br&gt;beanName是 “ServiceBean:&amp;lt;接口全限定名&amp;gt;::” , &lt;br&gt;比如&amp;nbsp;ServiceBean:org.apache.dubbo.springboot.demo.DemoService::" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" vertex="1" parent="1">
          <mxGeometry x="1760" y="1485" width="330" height="50" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-95" value="ServiceAnnotationPostProcessor#&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;b style=&quot;font-size: 9px;&quot;&gt;postProcessBeanFactory&lt;/b&gt;(&lt;br style=&quot;font-size: 9px;&quot;&gt;ConfigurableListableBeanFactory beanFactory)&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;font style=&quot;font-weight: bold; font-size: 9px;&quot; color=&quot;#007fff&quot;&gt;处理配置类中 @Bean方法的 Dubbo Service注解&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=center;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="840" y="1120" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-100" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-97" target="LEzOs3IW3RDwebMgTtXX-99">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-109" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-97" target="LEzOs3IW3RDwebMgTtXX-107">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-123" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-97" target="LEzOs3IW3RDwebMgTtXX-120">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-97" value="&lt;div&gt;&lt;b&gt;finishBeanFactoryInitialization&lt;/b&gt;(&lt;/div&gt;&lt;div&gt;beanFactory)&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;Bean创建与初始化&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="360" y="1520" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-111" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-99" target="LEzOs3IW3RDwebMgTtXX-110">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-124" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="LEzOs3IW3RDwebMgTtXX-99" target="LEzOs3IW3RDwebMgTtXX-112">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-99" value="&lt;div&gt;&lt;b&gt;finishRefresh()&lt;/b&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="360" y="1680" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-104" value="&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;又往Spring容器注册了几个&lt;b&gt;BeanDefinition&lt;/b&gt;:&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;ServicePackagesHolder&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;ReferenceBeanManager&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;ReferenceAnnotationBeanPostProcessor&lt;br style=&quot;font-size: 9px;&quot;&gt;DubboConfigAliasPostProcessor&lt;br style=&quot;font-size: 9px;&quot;&gt;DubboDeployApplicationListener&lt;br style=&quot;font-size: 9px;&quot;&gt;DubboConfigApplicationListener&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 8px;&quot;&gt;DubboConfigDefaultPropertyValueBeanPostProcessor&lt;/font&gt;&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;DubboConfigBeanInitializer&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px;&quot;&gt;DubboInfraBeanRegisterPostProcessor&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;align=center;fillColor=#ffe6cc;strokeColor=#d79b00;arcSize=4;" vertex="1" parent="1">
          <mxGeometry x="2280" y="780" width="201" height="120" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-105" value="&lt;b style=&quot;font-size: 10px;&quot;&gt;ReferenceAnnotationBeanPostProcessor&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="600" y="1200" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-107" value="&lt;b style=&quot;font-size: 10px;&quot;&gt;DubboConfigBeanInitializer&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="600" y="1520" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-110" value="&lt;b style=&quot;font-size: 10px;&quot;&gt;DubboDeployApplicationListener&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="600" y="1680" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-112" value="&lt;b style=&quot;font-size: 10px;&quot;&gt;DubboConfigApplicationListener&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="600" y="1760" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-114" value="&lt;b style=&quot;font-size: 10px;&quot;&gt;DubboConfigAliasPostProcessor&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="600" y="1280" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-116" value="&lt;b style=&quot;font-size: 10px;&quot;&gt;DubboConfigDefaultPropertyValue&lt;br&gt;BeanPostProcessor&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="600" y="1360" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-120" value="&lt;b style=&quot;font-size: 10px;&quot;&gt;ReferenceAnnotationBeanPostProcessor&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="600" y="1595" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="LEzOs3IW3RDwebMgTtXX-121" value="&lt;b&gt;DubboInfraBeanRegisterPostProcessor&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="600" y="1440" width="200" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
