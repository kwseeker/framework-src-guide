<mxfile host="Electron" modified="2024-11-22T08:21:17.758Z" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.6.5 Chrome/114.0.5735.243 Electron/25.3.1 Safari/537.36" etag="lVT9oCpaRenpg7s6oSh_" version="21.6.5" type="device" pages="2">
  <diagram id="0HNwkS7FgDSCqjm2yuAo" name="AnnotationConfigApplicationContext">
    <mxGraphModel dx="2716" dy="624" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-193" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="8LBShHvxASLETnbLwJq8-55" target="q_IlW1Jl21nTmUL6hJaz-192" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1390" y="3500" />
              <mxPoint x="1390" y="4460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-183" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-181" target="8LBShHvxASLETnbLwJq8-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-109" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#00CC66;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-61" target="K2lkUtP0yNImSPrxmu6i-61" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3830" y="4250" />
              <mxPoint x="3830" y="2640" />
              <mxPoint x="1070" y="2640" />
              <mxPoint x="1070" y="960" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-37" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-33" target="K2lkUtP0yNImSPrxmu6i-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-44" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;strokeColor=#82b366;fillColor=#d5e8d4;dashed=1;" parent="1" source="8LBShHvxASLETnbLwJq8-20" target="K2lkUtP0yNImSPrxmu6i-37" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1460" y="3000" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-1" value="&lt;h1 style=&quot;font-size: 18px&quot;&gt;&lt;font style=&quot;font-size: 18px&quot;&gt;Spring AnnotationConfigApplicationContext 工作原理（5.0.7）&lt;/font&gt;&lt;/h1&gt;&lt;div&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;基于注解的Bean容器，和基于XML的Bean容器区别主要是在于BeanDefinition的扫描和注册。&lt;br&gt;蓝色节点为重要节点，浅黄色节点为用户拓展点。&lt;/font&gt;&lt;/div&gt;&lt;p&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;前置知识：&lt;/font&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Ant风格的路径匹配规则（Spring借鉴Ant实现了AntPathMatcher实现路径匹配）&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;classpath和classpath*区别&lt;/font&gt;&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="40" y="19" width="760" height="181" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" parent="1" source="K2lkUtP0yNImSPrxmu6i-3" target="K2lkUtP0yNImSPrxmu6i-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-3" value="start" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="200" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" parent="1" source="K2lkUtP0yNImSPrxmu6i-4" target="K2lkUtP0yNImSPrxmu6i-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" parent="1" source="K2lkUtP0yNImSPrxmu6i-4" target="K2lkUtP0yNImSPrxmu6i-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-4" value="ApplicationContext context = new AnnotationConfigApplicationContext(&quot;./&quot;)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="40" y="280" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" parent="1" source="K2lkUtP0yNImSPrxmu6i-5" target="K2lkUtP0yNImSPrxmu6i-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-5" value="bizService = context.getBean(BizService.class)&lt;br&gt;&lt;font style=&quot;font-size: 8px&quot; color=&quot;#007fff&quot;&gt;getBean和finishBeanFactoryInitialization阶段的一样&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="40" y="7040" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-7" target="FClDIIbTZ8RpvBB4YRfq-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-7" value="bizService.doBiz()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="40" y="7120" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;curved=1;" parent="1" source="K2lkUtP0yNImSPrxmu6i-9" target="K2lkUtP0yNImSPrxmu6i-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;curved=1;" parent="1" source="K2lkUtP0yNImSPrxmu6i-9" target="K2lkUtP0yNImSPrxmu6i-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-9" value="AnnotationConfigApplicationContext()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="320" y="280" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" parent="1" source="K2lkUtP0yNImSPrxmu6i-11" target="K2lkUtP0yNImSPrxmu6i-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;" parent="1" source="K2lkUtP0yNImSPrxmu6i-11" target="K2lkUtP0yNImSPrxmu6i-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-11" value="scan(basePackages)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="320" y="840" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-5" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-13" target="gvBZubv_brZhLsD8OsxQ-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-13" value="&lt;div&gt;&lt;span&gt;refresh()&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;IOC主流程&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="320" y="2360" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-15" target="K2lkUtP0yNImSPrxmu6i-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-15" target="K2lkUtP0yNImSPrxmu6i-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-34" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-15" target="K2lkUtP0yNImSPrxmu6i-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-15" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;this.reader = new AnnotatedBeanDefinitionReader(this);&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="560" y="280" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-60" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-18" target="K2lkUtP0yNImSPrxmu6i-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-18" value="this.scanner.scan(basePackages)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="560" y="840" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-20" value="org.springframework.context.annotation.AnnotationConfigApplicationContext" style="swimlane;startSize=20;" parent="1" vertex="1">
          <mxGeometry x="-600" y="300" width="560" height="1260" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-21" value="&lt;div&gt;&lt;b&gt;reader&lt;/b&gt; = {AnnotatedBeanDefinitionReader@1146}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;registry = {AnnotationConfigApplicationContext@480}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;beanNameGenerator = {AnnotationBeanNameGenerator@1313}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;scopeMetadataResolver = {AnnotationScopeMetadataResolver@1314}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;conditionEvaluator = {ConditionEvaluator@1315}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;b&gt;scanner&lt;/b&gt; = {ClassPathBeanDefinitionScanner@1229}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;b&gt;registry&lt;/b&gt; = {AnnotationConfigApplicationContext@480}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;beanDefinitionDefaults = {BeanDefinitionDefaults@1249}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;autowireCandidatePatterns = null&lt;/div&gt;&lt;div&gt;&amp;nbsp;beanNameGenerator = {AnnotationBeanNameGenerator@1250}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;scopeMetadataResolver = {AnnotationScopeMetadataResolver@1251}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;includeAnnotationConfig = true&lt;/div&gt;&lt;div&gt;&amp;nbsp;logger = {LogFactory$Slf4jLocationAwareLog@1252}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;resourcePattern = &quot;**/*.class&quot;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;b&gt;includeFilters&lt;/b&gt; = {LinkedList@1254}&amp;nbsp; size = 1&lt;/div&gt;&lt;div&gt;&amp;nbsp;excludeFilters = {LinkedList@1255}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;environment = {StandardEnvironment@1147}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;conditionEvaluator = null&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;b&gt;resourcePatternResolver&lt;/b&gt; = {AnnotationConfigApplicationContext@480}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;metadataReaderFactory = {CachingMetadataReaderFactory@1256}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;componentsIndex = null&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;父类的字段：&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;beanFactory&lt;/b&gt; = {DefaultListableBeanFactory@944}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;serializationId = null&lt;span&gt;&#x9;&lt;span&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;/&lt;/font&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;/类名+&quot;@&quot;+identityHashCode&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;allowBeanDefinitionOverriding = true&lt;/div&gt;&lt;div&gt;&amp;nbsp;allowEagerClassLoading = true&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;b&gt;dependencyComparator&lt;/b&gt; = {AnnotationAwareOrderComparator@1264}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;b&gt;autowireCandidateResolver&lt;/b&gt; = {ContextAnnotationAutowireCandidateResolver@1265}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;resolvableDependencies = {ConcurrentHashMap@1266}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;b&gt;beanDefinitionMap&lt;/b&gt; = {ConcurrentHashMap@1263}&amp;nbsp; size = 6&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;//包括RootBeanDefintion(Bean工厂后置处理器，Bean后置处理器、事件监听工厂)，配置类的BeanDefinition, 普通类的BeanDefinition&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;b&gt;allBeanNamesByType&lt;/b&gt; = {ConcurrentHashMap@1267}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;b&gt;singletonBeanNamesByType&lt;/b&gt; = {ConcurrentHashMap@1268}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;b&gt;beanDefinitionNames&lt;/b&gt; = {ArrayList@1269}&amp;nbsp; size = 6&lt;/div&gt;&lt;div&gt;&amp;nbsp;manualSingletonNames = {LinkedHashSet@1270}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;frozenBeanDefinitionNames = null&lt;/div&gt;&lt;div&gt;&amp;nbsp;configurationFrozen = false&lt;/div&gt;&lt;div&gt;&amp;nbsp;instantiationStrategy = {CglibSubclassingInstantiationStrategy@1271}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;parameterNameDiscoverer = {DefaultParameterNameDiscoverer@1272}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;allowCircularReferences = true&lt;/div&gt;&lt;div&gt;&amp;nbsp;allowRawInjectionDespiteWrapping = false&lt;/div&gt;&lt;div&gt;&amp;nbsp;ignoredDependencyTypes = {HashSet@1273}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;ignoredDependencyInterfaces = {HashSet@1274}&amp;nbsp; size = 3&lt;/div&gt;&lt;div&gt;&amp;nbsp;currentlyCreatedBean = {NamedThreadLocal@1275} &quot;Currently created bean&quot;&lt;/div&gt;&lt;div&gt;&amp;nbsp;factoryBeanInstanceCache = {ConcurrentHashMap@1276}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;filteredPropertyDescriptorsCache = {ConcurrentHashMap@1277}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;parentBeanFactory = null&lt;/div&gt;&lt;div&gt;&amp;nbsp;beanClassLoader = {Launcher$AppClassLoader@460}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;tempClassLoader = null&lt;/div&gt;&lt;div&gt;&amp;nbsp;cacheBeanMetadata = true&lt;/div&gt;&lt;div&gt;&amp;nbsp;beanExpressionResolver = null&lt;/div&gt;&lt;div&gt;&amp;nbsp;conversionService = null&amp;nbsp;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;//类型转换器&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;propertyEditorRegistrars = {LinkedHashSet@1278}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;customEditors = {HashMap@1279}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;typeConverter = null&lt;/div&gt;&lt;div&gt;&amp;nbsp;embeddedValueResolvers = {LinkedList@1280}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;beanPostProcessors = {ArrayList@1281}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;hasInstantiationAwareBeanPostProcessors = false&lt;/div&gt;&lt;div&gt;&amp;nbsp;hasDestructionAwareBeanPostProcessors = false&lt;/div&gt;&lt;div&gt;&amp;nbsp;scopes = {LinkedHashMap@1282}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;securityContextProvider = null&lt;/div&gt;&lt;div&gt;&amp;nbsp;mergedBeanDefinitions = {ConcurrentHashMap@1283}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;alreadyCreated = {Collections$SetFromMap@1284}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;prototypesCurrentlyInCreation = {NamedThreadLocal@1285} &quot;Prototype beans currently in creation&quot;&lt;/div&gt;&lt;div&gt;&amp;nbsp;factoryBeanObjectCache = {ConcurrentHashMap@1286}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;singletonObjects = {ConcurrentHashMap@1287}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;singletonFactories = {HashMap@1288}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;earlySingletonObjects = {HashMap@1289}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;registeredSingletons = {LinkedHashSet@1290}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;singletonsCurrentlyInCreation = {Collections$SetFromMap@1291}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;inCreationCheckExclusions = {Collections$SetFromMap@1292}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;suppressedExceptions = null&lt;/div&gt;&lt;div&gt;&amp;nbsp;singletonsCurrentlyInDestruction = false&lt;/div&gt;&lt;div&gt;&amp;nbsp;disposableBeans = {LinkedHashMap@1293}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;containedBeanMap = {ConcurrentHashMap@1294}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;dependentBeanMap = {ConcurrentHashMap@1295}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;dependenciesForBeanMap = {ConcurrentHashMap@1296}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&amp;nbsp;logger = {LogFactory$Slf4jLocationAwareLog@1297}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;aliasMap = {ConcurrentHashMap@1298}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;&lt;b&gt;resourceLoader&lt;/b&gt; = null&lt;/div&gt;&lt;div&gt;customClassLoader = false&lt;/div&gt;&lt;div&gt;refreshed = {AtomicBoolean@945} &quot;false&quot;&lt;/div&gt;&lt;div&gt;logger = {LogFactory$Slf4jLocationAwareLog@946}&amp;nbsp;&lt;/div&gt;&lt;div&gt;id = &quot;org.springframework.context.annotation.AnnotationConfigApplicationContext@26aa12dd&quot;&lt;/div&gt;&lt;div&gt;displayName = &quot;org.springframework.context.annotation.AnnotationConfigApplicationContext@26aa12dd&quot;&lt;/div&gt;&lt;div&gt;parent = null&lt;/div&gt;&lt;div&gt;environment = {StandardEnvironment@1147}&amp;nbsp;&lt;/div&gt;&lt;div&gt;beanFactoryPostProcessors = {ArrayList@949}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;startupDate = 0&lt;/div&gt;&lt;div&gt;active = {AtomicBoolean@950} &quot;false&quot;&lt;span&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;//prepareRefresh()中设置true,TODO&lt;/font&gt;&lt;/div&gt;&lt;div&gt;closed = {AtomicBoolean@951} &quot;false&quot;&lt;span&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;//prepareRefresh() 中设置false,TODO&lt;/font&gt;&lt;/div&gt;&lt;div&gt;startupShutdownMonitor = {Object@952}&amp;nbsp;&lt;/div&gt;&lt;div&gt;shutdownHook = null&lt;/div&gt;&lt;div&gt;&lt;b&gt;resourcePatternResolver&lt;/b&gt; = {PathMatchingResourcePatternResolver@953}&amp;nbsp;&lt;/div&gt;&lt;div&gt;lifecycleProcessor = null&lt;/div&gt;&lt;div&gt;messageSource = null&lt;/div&gt;&lt;div&gt;applicationEventMulticaster = null&lt;/div&gt;&lt;div&gt;applicationListeners = {LinkedHashSet@954}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;earlyApplicationEvents = null&lt;/div&gt;&lt;div&gt;classLoader = {Launcher$AppClassLoader@460}&amp;nbsp;&lt;/div&gt;&lt;div&gt;protocolResolvers = {LinkedHashSet@955}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;resourceCaches = {ConcurrentHashMap@956}&amp;nbsp; size = 1&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="K2lkUtP0yNImSPrxmu6i-20" vertex="1">
          <mxGeometry y="20" width="560" height="1240" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-48" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-23" target="K2lkUtP0yNImSPrxmu6i-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-23" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;this.scanner = new ClassPathBeanDefinitionScanner(this);&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="560" y="640" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-28" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-25" target="K2lkUtP0yNImSPrxmu6i-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-25" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;this(registry, getOrCreateEnvironment(registry))&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;创建StandardEnvironment实例&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="840" y="280" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-30" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-27" target="K2lkUtP0yNImSPrxmu6i-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-27" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;((EnvironmentCapable) registry).getEnvironment()&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1120.5" y="280" width="159.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-50" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-29" target="gvBZubv_brZhLsD8OsxQ-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-29" value="&lt;div&gt;&lt;font&gt;&lt;font size=&quot;1&quot;&gt;this.environment = createEnvironment()&lt;/font&gt;&lt;br&gt;&lt;font size=&quot;1&quot;&gt;return this.environment&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1320" y="280" width="159.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-31" value="org.springframework.context.annotation.ScannedGenericBeanDefinition" style="swimlane;startSize=20;" parent="1" vertex="1">
          <mxGeometry x="-1240" y="640" width="560" height="420" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-32" value="&lt;div&gt;&lt;b&gt;metadata&lt;/b&gt; = {AnnotationMetadataReadingVisitor@1432}&amp;nbsp;&lt;/div&gt;&lt;div&gt;parentName = null&lt;/div&gt;&lt;div&gt;beanClass = &quot;top.kwseeker.spring.annotation.anno01.BaseService&quot;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;//bean类名&lt;/font&gt;&lt;/div&gt;&lt;div&gt;scope = &quot;&quot;&lt;/div&gt;&lt;div&gt;abstractFlag = false&lt;/div&gt;&lt;div&gt;lazyInit = false&lt;/div&gt;&lt;div&gt;autowireMode = 0&lt;/div&gt;&lt;div&gt;dependencyCheck = 0&lt;/div&gt;&lt;div&gt;dependsOn = null&lt;/div&gt;&lt;div&gt;autowireCandidate = true&lt;/div&gt;&lt;div&gt;primary = false&lt;/div&gt;&lt;div&gt;qualifiers = {LinkedHashMap@1572}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;instanceSupplier = null&lt;/div&gt;&lt;div&gt;nonPublicAccessAllowed = true&lt;/div&gt;&lt;div&gt;lenientConstructorResolution = true&lt;/div&gt;&lt;div&gt;factoryBeanName = null&lt;/div&gt;&lt;div&gt;factoryMethodName = null&lt;/div&gt;&lt;div&gt;constructorArgumentValues = null&lt;/div&gt;&lt;div&gt;propertyValues = null&lt;/div&gt;&lt;div&gt;methodOverrides = null&lt;/div&gt;&lt;div&gt;initMethodName = null&lt;/div&gt;&lt;div&gt;destroyMethodName = null&lt;/div&gt;&lt;div&gt;enforceInitMethod = true&lt;/div&gt;&lt;div&gt;enforceDestroyMethod = true&lt;/div&gt;&lt;div&gt;synthetic = false&lt;/div&gt;&lt;div&gt;role = 0&lt;/div&gt;&lt;div&gt;description = null&lt;/div&gt;&lt;div&gt;resource = {FileSystemResource@1135}&lt;font color=&quot;#007fff&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;//bean的class文件资源&lt;/font&gt;&lt;/div&gt;&lt;div&gt;source = {FileSystemResource@1135}&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;//bean的class文件资源&lt;/font&gt;&lt;/div&gt;&lt;div&gt;attributes = {LinkedHashMap@1573}&amp;nbsp; size = 0&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="K2lkUtP0yNImSPrxmu6i-31" vertex="1">
          <mxGeometry y="20" width="560" height="400" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-36" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-33" target="K2lkUtP0yNImSPrxmu6i-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-33" value="&lt;div&gt;&lt;font size=&quot;1&quot;&gt;this.conditionEvaluator = new ConditionEvaluator(registry, environment, null)&lt;/font&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="840" y="340" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-38" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-35" target="K2lkUtP0yNImSPrxmu6i-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-35" value="&lt;div&gt;&lt;font size=&quot;1&quot;&gt;AnnotationConfigUtils&lt;br&gt;.registerAnnotationConfigProcessors(this.registry)&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;主要是注册(５个BeanPostProcessor和&lt;/font&gt;&lt;/div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;DefaultEventListenerFactory)&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;font-size: 8px ; color: rgb(0 , 127 , 255)&quot;&gt;的根RootBeanDefinition&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="840" y="395" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-40" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-37" target="K2lkUtP0yNImSPrxmu6i-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-37" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font size=&quot;1&quot; style=&quot;font-size: 9px&quot;&gt;RootBeanDefinition def = new &lt;b&gt;RootBeanDefinition&lt;/b&gt;(&lt;b&gt;ConfigurationClassPostProcessor&lt;/b&gt;.class)&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;创建&lt;b&gt;ConfigurationClassPostProcessor&lt;/b&gt;的RootBeanDefitnition　beanName是&lt;/font&gt;&lt;/div&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;org.springframework.context.annotation.&lt;b&gt;internalConfigurationAnnotationProcessor&lt;/b&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1121" y="390" width="339" height="50" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-42" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-39" target="K2lkUtP0yNImSPrxmu6i-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-44" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-39" target="K2lkUtP0yNImSPrxmu6i-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-39" value="&lt;font size=&quot;1&quot;&gt;registerPostProcessor(registry, def, CONFIGURATION_ANNOTATION_PROCESSOR_BEAN_NAME)&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;将ConfigurationClassPostProcessor的根Bean定义注册到Bean容器&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1130" y="460" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-41" value="&lt;div&gt;&lt;font size=&quot;1&quot;&gt;this.&lt;b&gt;beanDefinitionMap&lt;/b&gt;.put(beanName, beanDefinition);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;1&quot;&gt;this.&lt;b&gt;beanDefinitionNames&lt;/b&gt;.add(beanName);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;1&quot;&gt;this.manualSingletonNames.remove(beanName);&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1490" y="460" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-43" value="&lt;font size=&quot;1&quot;&gt;和上面一样如法炮制注册&lt;br&gt;&lt;/font&gt;AutowiredAnnotationBeanPostProcessor、RequiredAnnotationBeanPostProcessor、CommonAnnotationBeanPostProcessor、&lt;br&gt;EventListenerMethodProcessor、&lt;br&gt;DefaultEventListenerFactory" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1130" y="520" width="320" height="80" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-46" value="&lt;div&gt;&quot;org.springframework.context.annotation.internalConfigurationAnnotationProcessor&quot; -&amp;gt; {RootBeanDefinition@1240} &quot;Root bean: class [org.springframework.context.annotation.ConfigurationClassPostProcessor];&quot;&lt;/div&gt;&lt;div&gt;&quot;org.springframework.context.event.internalEventListenerFactory&quot; -&amp;gt; {RootBeanDefinition@1432} &quot;Root bean: class [org.springframework.context.event.DefaultEventListenerFactory];&quot;&lt;/div&gt;&lt;div&gt;&quot;org.springframework.context.event.internalEventListenerProcessor&quot; -&amp;gt; {RootBeanDefinition@1434} &quot;Root bean: class [org.springframework.context.event.EventListenerMethodProcessor];&quot;&lt;/div&gt;&lt;div&gt;&quot;org.springframework.context.annotation.internalAutowiredAnnotationProcessor&quot; -&amp;gt; {RootBeanDefinition@1343} &quot;Root bean: class [org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor];&quot;&lt;/div&gt;&lt;div&gt;&quot;org.springframework.context.annotation.internalCommonAnnotationProcessor&quot; -&amp;gt; {RootBeanDefinition@1436} &quot;Root bean: class [org.springframework.context.annotation.CommonAnnotationBeanPostProcessor];&quot;&lt;/div&gt;&lt;div&gt;&quot;org.springframework.context.annotation.internalRequiredAnnotationProcessor&quot; -&amp;gt; {RootBeanDefinition@1437} &quot;Root bean: class [org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor];&quot;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1450" y="525" width="890" height="70" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-50" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-47" target="K2lkUtP0yNImSPrxmu6i-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-47" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;this(registry, useDefaultFilters, getOrCreateEnvironment(registry))&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="840" y="640" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-52" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-49" target="K2lkUtP0yNImSPrxmu6i-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-54" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-49" target="K2lkUtP0yNImSPrxmu6i-53" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-49" value="&lt;div&gt;&lt;font&gt;&lt;font size=&quot;1&quot;&gt;registerDefaultFilters()&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1080" y="640" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-51" value="&lt;div&gt;&lt;font&gt;&lt;font size=&quot;1&quot;&gt;this.&lt;b&gt;includeFilters&lt;/b&gt;.add(new AnnotationTypeFilter(Component.class))&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;font size=&quot;1&quot; color=&quot;#007fff&quot;&gt;用于后面筛选Bean class&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1320" y="640" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-56" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-53" target="K2lkUtP0yNImSPrxmu6i-55" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-53" value="&lt;div&gt;&lt;font&gt;&lt;font size=&quot;1&quot;&gt;setEnvironment(environment)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1080" y="700" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-58" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-55" target="K2lkUtP0yNImSPrxmu6i-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-55" value="&lt;div&gt;&lt;font&gt;&lt;font size=&quot;1&quot;&gt;setResourceLoader(resourceLoader)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1080" y="760" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-57" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;&lt;div&gt;this.&lt;b&gt;resourcePatternResolver&lt;/b&gt; = ResourcePatternUtils&lt;br&gt;.getResourcePatternResolver(resourceLoader);&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;this.&lt;b&gt;metadataReaderFactory&lt;/b&gt; = new CachingMetadataReaderFactory(resourceLoader);&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;this.&lt;b&gt;componentsIndex&lt;/b&gt; = CandidateComponentsIndexLoader&lt;br&gt;.loadIndex(this.resourcePatternResolver.getClassLoader());&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;" parent="1" vertex="1">
          <mxGeometry x="1320" y="745" width="280" height="70" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-62" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-59" target="K2lkUtP0yNImSPrxmu6i-61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-59" value="beanCountAtScanStart = this.registry.getBeanDefinitionCount()&lt;br&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#007fff&quot;&gt;前面应用上下文初始化阶段有添加６个根RootBeanDefinition&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="800" y="830" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-64" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-61" target="K2lkUtP0yNImSPrxmu6i-63" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-66" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-61" target="K2lkUtP0yNImSPrxmu6i-65" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-61" value="doScan(basePackages)&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;扫描包下注解了@Component且没有@Conditional的类，创建BeanDefinition&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="800" y="920" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-72" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-63" target="K2lkUtP0yNImSPrxmu6i-71" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-63" value="Set&amp;lt;BeanDefinitionHolder&amp;gt; beanDefinitions = new LinkedHashSet&amp;lt;&amp;gt;()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1080" y="920" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-70" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-65" target="K2lkUtP0yNImSPrxmu6i-69" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;dashed=1;fillColor=#d5e8d4;strokeColor=#82b366;curved=1;" parent="1" source="K2lkUtP0yNImSPrxmu6i-65" target="K2lkUtP0yNImSPrxmu6i-35" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1040" y="980" />
              <mxPoint x="1040" y="710" />
              <mxPoint x="1080" y="710" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-65" value="AnnotationConfigUtils&lt;br&gt;.registerAnnotationConfigProcessors(this.registry)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;AnnotatedBeanDefinitionReader初始化已经执行过了，这里又检查下&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="780" y="980" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-69" value="return (this.registry.getBeanDefinitionCount() - beanCountAtScanStart)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;返回实际扫描到的BeanDefinition数量&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="800" y="1060" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-74" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-71" target="K2lkUtP0yNImSPrxmu6i-73" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1180" y="1010" />
              <mxPoint x="1341" y="1010" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-71" value="for (String basePackage : basePackages)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1080" y="980" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-77" value="else" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-73" target="K2lkUtP0yNImSPrxmu6i-76" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-125" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-73" target="K2lkUtP0yNImSPrxmu6i-124" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-73" value="Set&amp;lt;BeanDefinition&amp;gt; candidates = findCandidateComponents(basePackage)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;查找包下的Bean类，创建BeanDefinition&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1241" y="1030" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-146" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-75" target="K2lkUtP0yNImSPrxmu6i-145" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-75" value="for end" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1079.5" y="2245" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-79" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-76" target="K2lkUtP0yNImSPrxmu6i-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-76" value="scanCandidateComponents(basePackage)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1479.5" y="1030" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-82" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="K2lkUtP0yNImSPrxmu6i-78" target="K2lkUtP0yNImSPrxmu6i-83" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1860" y="1120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-97" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-78" target="K2lkUtP0yNImSPrxmu6i-96" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-78" value="&lt;div&gt;String packageSearchPath = ResourcePatternResolver.CLASSPATH_ALL_URL_PREFIX +&lt;/div&gt;&lt;div&gt;resolveBasePackage(basePackage) + &#39;/&#39; + this.resourcePattern;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;测试中传的&quot;./&quot;转成&quot;//&quot; classpath*:///**/*.class, 这里三个斜杠和一个斜杠没什么区别&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1720" y="1010" width="280" height="80" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-80" value="resourcePatternResolver是AnnotationConfigApplicationContext本身&lt;br&gt;（实现了resourcePatternResolver接口）" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1600" y="765" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-86" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-83" target="K2lkUtP0yNImSPrxmu6i-85" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-107" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-83" target="K2lkUtP0yNImSPrxmu6i-106" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-83" value="Resource[] resources = getResourcePatternResolver()&lt;br&gt;.getResources(packageSearchPath)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;这里获取resourcePatternResolver是 PathMatchingResourcePatternResolver&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1760" y="1120" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-89" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-85" target="K2lkUtP0yNImSPrxmu6i-88" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-85" value="this.getPathMatcher().isPattern(locationPattern&lt;br&gt;.substring(&quot;classpath*:&quot;.length()))" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2000" y="1130" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-87" value="PathMatchingResourcePatternResolver" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="2015" y="1110" width="190" height="20" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-91" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-88" target="K2lkUtP0yNImSPrxmu6i-90" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-88" value="this.findPathMatchingResources(locationPattern)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2000" y="1190" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-93" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-90" target="K2lkUtP0yNImSPrxmu6i-92" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-90" value="this.findPathMatchingResources(locationPattern)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2260" y="1190" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-95" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-92" target="K2lkUtP0yNImSPrxmu6i-94" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-92" value="rootDirPath = this.determineRootDir(locationPattern)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;classpath*:///&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2520" y="1190" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-99" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-94" target="K2lkUtP0yNImSPrxmu6i-98" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-94" value="String subPattern = locationPattern.substring(rootDirPath.length())&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;**/*.class&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2520" y="1250" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-96" value="ClassUtils.convertClassNameToResourcePath(&lt;br&gt;getEnvironment().resolveRequiredPlaceholders(basePackage))" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2040" y="1030" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-101" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-98" target="K2lkUtP0yNImSPrxmu6i-100" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-105" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-98" target="K2lkUtP0yNImSPrxmu6i-104" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-98" value="Resource[] rootDirResources = this.getResources(rootDirPath)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;根据rootDirPath获取要扫描的class文件资源路径&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2520" y="1310" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-103" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-100" target="K2lkUtP0yNImSPrxmu6i-102" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-100" value="this.findAllClassPathResources(&lt;br&gt;locationPattern.substring(&quot;classpath*:&quot;.length()))" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2780" y="1310" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-102" value="&lt;div&gt;ClassLoader cl = this.getClassLoader();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Enumeration resourceUrls = cl != null ? cl.getResources(path) : ClassLoader.getSystemResources(path);&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="3040" y="1300" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-104" value="Resource rootDirResource = this.resolveRootDirResource(rootDirResource);&lt;br&gt;this.doFindPathMatchingFileResources(&lt;br&gt;(Resource)rootDirResource, subPattern)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;遍历rootDirResources,并按subPattern(**/*.class&lt;br&gt;)过滤, 获取class文件Resource数组&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2520" y="1370" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-109" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#007FFF;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="K2lkUtP0yNImSPrxmu6i-106" target="K2lkUtP0yNImSPrxmu6i-108" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1860" y="1270" />
              <mxPoint x="2060" y="1270" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-106" value="for (Resource resource : resources)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1760" y="1240" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-117" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-108" target="K2lkUtP0yNImSPrxmu6i-116" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-108" value="MetadataReader metadataReader = getMetadataReaderFactory()&lt;br&gt;.getMetadataReader(resource)" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1960" y="1290" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-115" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-110" target="K2lkUtP0yNImSPrxmu6i-114" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-110" value="&lt;font style=&quot;font-size: 9px&quot;&gt;ScannedGenericBeanDefinition sbd = new ScannedGenericBeanDefinition(metadataReader)&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1960" y="1420" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-120" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-114" target="K2lkUtP0yNImSPrxmu6i-119" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-114" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;isCandidateComponent(sbd)&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;检查是否是外部类、具象类或者抽象方法标注有@Lookup的抽象类&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1980" y="1480" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-118" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-116" target="K2lkUtP0yNImSPrxmu6i-110" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-116" value="isCandidateComponent(metadataReader)&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;读取resouce判断是否注解@Component且没有@Conditional注解&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1960" y="1360" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-123" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-119" target="K2lkUtP0yNImSPrxmu6i-122" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2060" y="1590" />
              <mxPoint x="1860" y="1590" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-119" value="&lt;font style=&quot;font-size: 9px&quot;&gt;candidates.add(sbd)&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1980" y="1540" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-142" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-143" target="K2lkUtP0yNImSPrxmu6i-76" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-144" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-122" target="K2lkUtP0yNImSPrxmu6i-143" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-122" value="for end" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1760" y="1610" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-128" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=8;fontColor=#007FFF;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="K2lkUtP0yNImSPrxmu6i-124" target="K2lkUtP0yNImSPrxmu6i-127" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1341" y="1675" />
              <mxPoint x="1500" y="1675" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-124" value="&lt;font style=&quot;font-size: 9px&quot;&gt;for (BeanDefinition candidate : candidates)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1241" y="1645" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-131" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-127" target="K2lkUtP0yNImSPrxmu6i-130" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-127" value="ScopeMetadata scopeMetadata = this.scopeMetadataResolver.resolveScopeMetadata(candidate);&lt;br&gt;candidate.setScope(scopeMetadata.getScopeName())&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;读取注解元数据中作用域属性的值（＠scope注解指定，为空默认是单例）&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1360" y="1695" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-129" value="进一步完善BeanDefinition定义" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1441" y="1640" width="119" height="30" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-134" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-130" target="K2lkUtP0yNImSPrxmu6i-133" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-130" value="String beanName = this.beanNameGenerator&lt;br&gt;.generateBeanName(candidate, this.registry)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;生成Bean Name, @Component没有指定value就将类名转成Java变量格式作为Bean名（通常是将首个大写之母转小写）&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1360" y="1775" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-132" value="&lt;font style=&quot;font-size: 10px&quot;&gt;ClassPathBeanDefinitionScanner&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="820" y="810" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-136" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-133" target="K2lkUtP0yNImSPrxmu6i-135" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-133" value="postProcessBeanDefinition((AbstractBeanDefinition) candidate, beanName)&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;BeanDefinition后置处理（注意区分和Bean的后置处理）只是初始化BeanDefinition的lazyInit、autowireMode、dependencyCheck、initMethodName、enforceInitMethod、destroyMethodName、enforceDestroyMethod等字段，还是为后面Bean初始化做准备&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1360.5" y="1855" width="280" height="70" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-138" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-135" target="K2lkUtP0yNImSPrxmu6i-137" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-158" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-135" target="K2lkUtP0yNImSPrxmu6i-154" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-159" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-135" target="K2lkUtP0yNImSPrxmu6i-156" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-161" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-135" target="K2lkUtP0yNImSPrxmu6i-160" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-162" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-135" target="K2lkUtP0yNImSPrxmu6i-152" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-135" value="AnnotationConfigUtils.processCommonDefinitionAnnotations(&lt;br&gt;(AnnotatedBeanDefinition) candidate)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;处理Bean上的公共注解，如@Lazy、＠Primary、＠DependsOn、＠Role、＠Description&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1340" y="1945" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-149" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-137" target="K2lkUtP0yNImSPrxmu6i-148" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-137" value="&lt;div&gt;BeanDefinitionHolder &lt;b&gt;definitionHolder&lt;/b&gt; = new BeanDefinitionHolder(candidate, beanName);&lt;/div&gt;&lt;div&gt;&lt;b&gt;definitionHolder&lt;/b&gt; = AnnotationConfigUtils&lt;/div&gt;&lt;div&gt;.applyScopedProxyMode(scopeMetadata, definitionHolder, this.registry);&lt;/div&gt;&lt;div&gt;beanDefinitions.add(definitionHolder);&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1330" y="2025" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-141" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-139" target="K2lkUtP0yNImSPrxmu6i-75" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1340.5" y="2225" />
              <mxPoint x="1179.5" y="2225" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-139" value="for end" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1240.5" y="2185" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-143" value="return candidates;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1760" y="1650" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-147" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-145" target="K2lkUtP0yNImSPrxmu6i-61" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1060" y="2305" />
              <mxPoint x="1060" y="950" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-145" value="return beanDefinitions" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1079.5" y="2285" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-150" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="K2lkUtP0yNImSPrxmu6i-148" target="K2lkUtP0yNImSPrxmu6i-139" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1500.5" y="2165" />
              <mxPoint x="1340.5" y="2165" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-148" value="&lt;b&gt;registerBeanDefinition&lt;/b&gt;(definitionHolder, this.registry)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;将BeanDefinition注册到Bean容器的&lt;b&gt;beanDefinitionMap&lt;/b&gt;，如果有设置别名，就将别名加入到aliasMap&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1360" y="2105" width="280" height="50" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-152" value="＠Lazy&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;对应boolean lazyInit，是否开启懒加载&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1720" y="1867.5" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-154" value="＠Primary&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;对应boolean primary，当一个接口有多个Bean使用通过设置primary=true设置某个Bean作为默认选择&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1720" y="1927.5" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-156" value="＠Role&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;对应int role，没用过，TODO:作用？&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1720" y="2047.5" width="200" height="35" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-160" value="@DependsOn&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;对应String[] dependsOn，定义Bean初始化顺序，用于代码上没有先后顺序，但是逻辑上与先后顺序的场景&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1720" y="1987.5" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="K2lkUtP0yNImSPrxmu6i-163" value="对比@Order、@Priority，@Order只能控制组件的初始化顺序，&lt;br&gt;不能控制注入的优先级。但是能控制Bean List 里面存放的的顺序;&amp;nbsp;&lt;br&gt;@Priority和@Order类似，是JSR 250标准比@Order更高" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1920" y="1987.5" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-7" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-4" target="gvBZubv_brZhLsD8OsxQ-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-39" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-4" target="gvBZubv_brZhLsD8OsxQ-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-4" value="prepareRefresh()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="600" y="2360" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-9" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-6" target="gvBZubv_brZhLsD8OsxQ-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-4" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="gvBZubv_brZhLsD8OsxQ-6" target="8LBShHvxASLETnbLwJq8-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-6" value="ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="600" y="2440" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-11" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-8" target="gvBZubv_brZhLsD8OsxQ-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-8" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#330000;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="gvBZubv_brZhLsD8OsxQ-8" target="8LBShHvxASLETnbLwJq8-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="840" y="2690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-8" value="prepareBeanFactory(beanFactory)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;beanFactory成员初始化；&lt;br&gt;注册３个单实例Bean&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="600" y="2670" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-13" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-10" target="gvBZubv_brZhLsD8OsxQ-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-10" value="postProcessBeanFactory(beanFactory)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;测试中未用到，暂略，由子类实现&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="580" y="2860" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-15" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-12" target="gvBZubv_brZhLsD8OsxQ-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-14" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="gvBZubv_brZhLsD8OsxQ-12" target="8LBShHvxASLETnbLwJq8-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-12" value="&lt;b&gt;invokeBeanFactoryPostProcessors&lt;/b&gt;(&lt;br&gt;beanFactory)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;执行BeanFactory后置处理&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="580" y="2940" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-17" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-14" target="gvBZubv_brZhLsD8OsxQ-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-25" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-14" target="C93iktiuMzNYxlLwOgFX-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-14" value="registerBeanPostProcessors(beanFactory)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;BeanPostProcessor后置处理在创建Bean时才会使用到，这里只是是创建BeanPostProcessor Bean实例并注册到工厂的beanPostProcessor容器&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="580" y="4710" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-19" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-16" target="gvBZubv_brZhLsD8OsxQ-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-60" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-16" target="3LwLyZj85QIxDYa8zrth-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-16" value="initMessageSource()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;初始化国际化资源处理&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="580" y="5280" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-21" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-18" target="gvBZubv_brZhLsD8OsxQ-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-66" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-18" target="3LwLyZj85QIxDYa8zrth-65" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-18" value="initApplicationEventMulticaster()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;初始化事件广播器（事件源）&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="580" y="5440" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-23" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-20" target="gvBZubv_brZhLsD8OsxQ-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-20" value="onRefresh()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;由子类容器自行定制，默认为空&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="620" y="5640" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-25" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-22" target="gvBZubv_brZhLsD8OsxQ-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-77" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-22" target="3LwLyZj85QIxDYa8zrth-76" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-22" value="registerListeners()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;注册事件监听器&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="600" y="5720" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-27" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-24" target="gvBZubv_brZhLsD8OsxQ-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-88" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-24" target="3LwLyZj85QIxDYa8zrth-87" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-24" value="finishBeanFactoryInitialization(beanFactory)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;实例化所有剩余的非懒加载的单例Bean&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="570" y="6080" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-31" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-26" target="gvBZubv_brZhLsD8OsxQ-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-147" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="gvBZubv_brZhLsD8OsxQ-26" target="fxcZrqCvbWanZoaIqKKB-146" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-26" value="finishRefresh()&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;资源缓存清理、生命周期处理器启动、发布Refreshed事件等&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="620" y="6520" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-36" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-28" target="gvBZubv_brZhLsD8OsxQ-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-28" value="destroyBeans()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="821" y="6840" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-32" value="Y" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-30" target="gvBZubv_brZhLsD8OsxQ-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-34" value="N" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-30" target="gvBZubv_brZhLsD8OsxQ-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-30" value="产生异常" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="6840" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-33" value="resetCommonCaches()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;清理了一堆再也没用途的缓存&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="580" y="6960" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-35" value="cancelRefresh(ex)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="821" y="6900" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-42" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-38" target="gvBZubv_brZhLsD8OsxQ-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-38" value="&lt;div&gt;this.closed.set(false);&lt;/div&gt;&lt;div&gt;this.active.set(true);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;状态设置一下&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1119.5" y="2360" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-40" value="&lt;font style=&quot;font-size: 12px&quot;&gt;AbstractApplicationContext&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="340" y="2340" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-44" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-41" target="gvBZubv_brZhLsD8OsxQ-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-41" value="initPropertySources()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;由子类实现，这里没用到，暂略&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1119.5" y="2420" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-46" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-43" target="gvBZubv_brZhLsD8OsxQ-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-43" value="getEnvironment()&lt;br&gt;.validateRequiredProperties()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;没有，暂略&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1099.5" y="2480" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-45" value="this.earlyApplicationEvents = new LinkedHashSet&amp;lt;&amp;gt;();" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1099.5" y="2540" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-47" value="org.springframework.core.env.StandardEnvironment" style="swimlane;startSize=20;" parent="1" vertex="1">
          <mxGeometry x="-1240" y="300" width="560" height="300" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-48" value="&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;属性都继承自AbstractEnvironment&lt;/font&gt;&lt;/div&gt;&lt;div&gt;activeProfiles = {LinkedHashSet@1665}&amp;nbsp; size = 0&lt;/div&gt;&lt;div&gt;defaultProfiles = {LinkedHashSet@1666}&amp;nbsp; size = 1&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;//不配置的话默认有个“default”&lt;/font&gt;&lt;/div&gt;&lt;div&gt;propertySources = {MutablePropertySources@1667}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;logger = {LogFactory$Slf4jLocationAwareLog@1664}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;propertySourceList = {CopyOnWriteArrayList@1672}&amp;nbsp; size = 2&lt;/div&gt;&lt;div&gt;&lt;b&gt;propertyResolver&lt;/b&gt; = {&lt;b&gt;PropertySourcesPropertyResolver&lt;/b&gt;@1668}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;propertySources = {MutablePropertySources@1667}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;logger = {LogFactory$Slf4jLocationAwareLog@1845}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;conversionService = null&lt;/div&gt;&lt;div&gt;&amp;nbsp;nonStrictHelper = null&lt;/div&gt;&lt;div&gt;&amp;nbsp;strictHelper = {PropertyPlaceholderHelper@1846}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;ignoreUnresolvableNestedPlaceholders = false&lt;/div&gt;&lt;div&gt;&amp;nbsp;placeholderPrefix = &quot;${&quot;&lt;/div&gt;&lt;div&gt;&amp;nbsp;placeholderSuffix = &quot;}&quot;&lt;/div&gt;&lt;div&gt;&amp;nbsp;valueSeparator = &quot;:&quot;&lt;/div&gt;&lt;div&gt;&amp;nbsp;requiredProperties = {LinkedHashSet@1850}&amp;nbsp; size = 0&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="gvBZubv_brZhLsD8OsxQ-47" vertex="1">
          <mxGeometry y="20" width="560" height="280" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-52" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-49" target="gvBZubv_brZhLsD8OsxQ-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-49" value="&lt;div&gt;&lt;font&gt;&lt;font size=&quot;1&quot;&gt;new &lt;b&gt;StandardEnvironment&lt;/b&gt;()&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1520" y="280" width="159.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-54" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontColor=#007FFF;" parent="1" source="gvBZubv_brZhLsD8OsxQ-51" target="gvBZubv_brZhLsD8OsxQ-53" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-51" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;&lt;font size=&quot;1&quot;&gt;propertySources.addLast(new &lt;b&gt;MapPropertySource&lt;/b&gt;(&quot;systemProperties&quot;, this.getSystemProperties()));&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;Java程序启动时自带的一堆JVM系统属性，从&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;Hashtable移到&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 127 , 255)&quot;&gt;propertiesSources容器&lt;/span&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1760" y="270" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="gvBZubv_brZhLsD8OsxQ-53" value="&lt;div&gt;&lt;font&gt;&lt;font size=&quot;1&quot;&gt;propertySources.addLast(new &lt;b&gt;SystemEnvironmentPropertySource&lt;/b&gt;(&quot;systemEnvironment&quot;, this.getSystemEnvironment()))&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;获取环境变量（包括系统环境变量和用户环境变量）从HashMap移到propertiesSources容器&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1720" y="350" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-6" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-3" target="8LBShHvxASLETnbLwJq8-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-3" value="this.refreshed.compareAndSet(false, true)&lt;br&gt;this.beanFactory.setSerializationId(this.getId())&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;序列化ID是用的类名+&quot;@&quot;+identityHashCode&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="840" y="2440" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-5" value="ConfigurableListableBeanFactory beanFactory = this.getBeanFactory()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="840" y="2500" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-9" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.setBeanClassLoader(this.getClassLoader());&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.setBeanExpressionResolver(new StandardBeanExpressionResolver(beanFactory.getBeanClassLoader()));&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.addPropertyEditorRegistrar(new ResourceEditorRegistrar(this, this.getEnvironment()));&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.&lt;b&gt;addBeanPostProcessor&lt;/b&gt;(new ApplicationContextAwareProcessor(this));&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.ignoreDependencyInterface(EnvironmentAware.class);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.ignoreDependencyInterface(EmbeddedValueResolverAware.class);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.ignoreDependencyInterface(ResourceLoaderAware.class);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.ignoreDependencyInterface(ApplicationEventPublisherAware.class);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.ignoreDependencyInterface(MessageSourceAware.class);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.ignoreDependencyInterface(ApplicationContextAware.class);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.registerResolvableDependency(BeanFactory.class, beanFactory);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.registerResolvableDependency(ResourceLoader.class, this);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.registerResolvableDependency(ApplicationEventPublisher.class, this);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.registerResolvableDependency(ApplicationContext.class, this);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;font size=&quot;1&quot;&gt;beanFactory.addBeanPostProcessor(new ApplicationListenerDetector(this));&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;font size=&quot;1&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;//将StandardEnvironment实例、系统属性、环境变量，注册到单实例Bean容器（这三个是最初始的Bean了）&lt;/font&gt;&lt;br&gt;beanFactory.registerSingleton(&quot;environment&quot;, this.getEnvironment());&lt;br&gt;&lt;/font&gt;beanFactory.registerSingleton(&quot;systemProperties&quot;, this.getEnvironment().getSystemProperties());&lt;br&gt;beanFactory.registerSingleton(&quot;systemEnvironment&quot;, this.getEnvironment().getSystemEnvironment());&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=3;" parent="1" vertex="1">
          <mxGeometry x="841" y="2600" width="520" height="220" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-16" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-13" target="8LBShHvxASLETnbLwJq8-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-13" value="PostProcessorRegistrationDelegate&lt;br&gt;.invokeBeanFactoryPostProcessors(&lt;br&gt;beanFactory, this.getBeanFactoryPostProcessors())&lt;br&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="840" y="2940" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-21" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-15" target="8LBShHvxASLETnbLwJq8-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-15" value="获取用户定制的BeanFactoryPostProcessor&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;测试中没有定制BeanFactoryPostProcessor，暂略&lt;br&gt;这里是一个拓展点&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1121" y="2940" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-17" value="&lt;font style=&quot;font-size: 10px&quot;&gt;PostProcessorRegistrationDelegate&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1151" y="2920" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-23" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-20" target="8LBShHvxASLETnbLwJq8-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-46" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-20" target="8LBShHvxASLETnbLwJq8-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-20" value="&lt;div&gt;String[] postProcessorNames = beanFactory.getBeanNamesForType(&lt;/div&gt;&lt;div&gt;&lt;b&gt;BeanDefinitionRegistryPostProcessor&lt;/b&gt;.class, true, false);&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;获取Spring默认注册的 BeanFactoryPostProcessor的名字&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;，此测试只找到ConfigurationClassPostProcessor&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1101" y="3000.01" width="280" height="59.99" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-26" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-22" target="8LBShHvxASLETnbLwJq8-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-22" value="this.doGetBeanNamesForType(ResolvableType.forRawClass(type), includeNonSingletons, allowEagerInit)&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;遍历BeanDefinitionNames，从beanDefinitionMap筛选&lt;b&gt;BeanDefinitionRegistryPostProcessor&lt;/b&gt;类型的BeanDefinition的beanName；&lt;br&gt;遍历manualSingletonNames，从singletonObjects筛选&lt;b&gt;BeanDefinitionRegistryPostProcessor&lt;/b&gt;类型单例Bean的beanName&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1419.5" y="2980.01" width="340.5" height="80" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-24" value="DefaultListableBeanFactory" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1509.5" y="2960.01" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-31" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-25" target="8LBShHvxASLETnbLwJq8-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2420.5" y="3040" />
              <mxPoint x="2560.5" y="3040" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-25" value="for (String beanName : this.beanDefinitionNames)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2320" y="3008.13" width="200.5" height="23.75" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-30" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-27" target="8LBShHvxASLETnbLwJq8-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-27" value="RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName)&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;从beanDefinitionMap取出beanName对应BeanDefinition，如果为RootBeanDefinition就克隆一份，以beanName为key，克隆出来的BeanDefinition（非RootBeanDefinition就用原BeanDefinition）为value，插入mergedBeanDefinitions&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2420.5" y="3060" width="280" height="80" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-36" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-29" target="8LBShHvxASLETnbLwJq8-34" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2560.5" y="3210" />
              <mxPoint x="2420.5" y="3210" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-29" value="boolean isFactoryBean = isFactoryBean(beanName, mbd)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;根据BeanDefinition beanClass判断是否是工厂Bean&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2420.5" y="3160" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-40" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=8;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-32" target="8LBShHvxASLETnbLwJq8-39" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2560.5" y="3370" />
              <mxPoint x="2420.5" y="3370" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-32" value="&lt;div&gt;if (isTypeMatch(beanName, type)) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; result.add(beanName);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="2460.5" y="3320" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-37" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-34" target="8LBShHvxASLETnbLwJq8-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-34" value="for end" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2320" y="3230" width="200.5" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-38" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-35" target="8LBShHvxASLETnbLwJq8-32" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2420.5" y="3300" />
              <mxPoint x="2560.5" y="3300" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-35" value="for (String beanName : this.manualSingletonNames)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2320" y="3270" width="200.5" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-42" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-39" target="8LBShHvxASLETnbLwJq8-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-39" value="for end" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2320" y="3390" width="200.5" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-43" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-41" target="8LBShHvxASLETnbLwJq8-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2280" y="3450" />
              <mxPoint x="2280" y="3040" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-41" value="return StringUtils.toStringArray(result)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2320" y="3430" width="200.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-48" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-45" target="8LBShHvxASLETnbLwJq8-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-50" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-45" target="8LBShHvxASLETnbLwJq8-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-45" value="&lt;font style=&quot;font-size: 10px&quot;&gt;for：&lt;br&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;currentRegistryProcessors.add(beanFactory.getBean(&lt;br&gt;ppName, BeanDefinitionRegistryPostProcessor.class));&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&#x9;&#x9;&#x9;&#x9;&#x9;processedBeans.add(ppName)&lt;/font&gt;&lt;br&gt;&lt;font style=&quot;font-size: 8px&quot; color=&quot;#007fff&quot;&gt;for遍历postProcessorNames，获取对应BeanDefinitionRegistryPostProcessor类型Bean实例(没有就创建)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1101" y="3080.01" width="280" height="79.99" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-47" value="AbstractBeanFactory$doGetBean(name, requiredType, null, false)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;后面详解, 参考finishBeanFactoryInitialization()&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1419.5" y="3095.01" width="200.5" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-52" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-49" target="8LBShHvxASLETnbLwJq8-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-198" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="8LBShHvxASLETnbLwJq8-49" target="q_IlW1Jl21nTmUL6hJaz-184" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-49" value="&lt;b&gt;invokeBeanDefinitionRegistryPostProcessors&lt;/b&gt;(&lt;br&gt;currentRegistryProcessors, registry)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;第１次执行实现了BeanDefinitionRegistryPostProcessor和PriorityOrdered的接口的后置处理器的后置处理&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1119" y="3240" width="240" height="59.99" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-54" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-51" target="8LBShHvxASLETnbLwJq8-53" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-51" value="&lt;b&gt;ConfigurationClassPostProcessor&lt;/b&gt;&lt;br&gt;$&lt;b&gt;postProcessBeanDefinitionRegistry&lt;/b&gt;(&lt;br&gt;BeanDefinitionRegistry registry)&lt;br&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;&lt;b&gt;BeanDefinitionRegistryPostProcessor&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;后置处理就是扫描所有BeanDefintion获取候选配置类&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#e3c800;fontColor=#000000;strokeColor=#B09500;" parent="1" vertex="1">
          <mxGeometry x="1419.5" y="3240" width="220.5" height="59.99" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#CCCC00;" parent="1" source="8LBShHvxASLETnbLwJq8-53" target="eoa80S1cHevG2SspZYGu-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-53" value="int registryId = System.identityHashCode(registry);&lt;br&gt;this.&lt;b&gt;registriesPostProcessed&lt;/b&gt;.add(registryId);" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1679.5" y="3250" width="220.25" height="39.99" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-58" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-55" target="8LBShHvxASLETnbLwJq8-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-55" value="&lt;b&gt;invokeBeanFactoryPostProcessors&lt;/b&gt;(&lt;br&gt;registryProcessors, beanFactory)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;执行Spring自带的BeanFactoryPostProcessor&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1119" y="3480.01" width="240" height="39.99" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-21" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="8LBShHvxASLETnbLwJq8-57" target="C93iktiuMzNYxlLwOgFX-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-57" value="&lt;b&gt;invokeBeanFactoryPostProcessors&lt;/b&gt;(&lt;br&gt;regularPostProcessors, beanFactory)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;执行用户自定义的BeanFactoryPostProcessor&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1119" y="3540" width="240" height="39.99" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-64" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-61" target="8LBShHvxASLETnbLwJq8-63" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-61" value="invokeBeanFactoryPostProcessors(&lt;br&gt;priorityOrderedPostProcessors, beanFactory)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;先执行实现priorityOrdered接口的后置处理器&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1119" y="3660.01" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-66" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#330000;" parent="1" source="8LBShHvxASLETnbLwJq8-63" target="8LBShHvxASLETnbLwJq8-65" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-63" value="invokeBeanFactoryPostProcessors(&lt;br&gt;orderedPostProcessors, beanFactory)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;再执行实现Ordered接口的后置处理器&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1119" y="3730.01" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-65" value="invokeBeanFactoryPostProcessors(&lt;br&gt;nonOrderedPostProcessors, beanFactory)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;最后执行未实现Ordered接口的后置处理器&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1119" y="3800.01" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-68" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;fontSize=10;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1079.5" y="3000" width="20.5" height="460" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-69" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;获取用户定制以及Spring默认注册的所有&lt;/span&gt;&lt;b style=&quot;font-size: 10px&quot;&gt;BeanDefinitionRegistryPostProcessor&lt;/b&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;，获取对应Bean，并执行后置处理&amp;nbsp;&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;BeanDefinitionRegistryPostProcessor是BeanFactoryPostProcessor的子类&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="879" y="3200" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-70" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;fontSize=10;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1079" y="3480" width="20" height="370" as="geometry" />
        </mxCell>
        <mxCell id="8LBShHvxASLETnbLwJq8-71" value="&lt;font style=&quot;font-size: 10px&quot;&gt;类似上面获取BeanDefinitionRegistryPostProcessor&amp;nbsp; Bean并执行的逻辑，获取前用户定制的以及Spring默认注册的非BeanDefinitionRegistryPostProcessor类型&lt;br&gt;的&amp;nbsp;&lt;b&gt;BeanFactoryPostProcessor&lt;/b&gt; Bean并执行后置处理&lt;br&gt;本测试没有BeanFactoryPostProcessor，这里并不会执行&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="879" y="3579.99" width="200" height="110" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="eoa80S1cHevG2SspZYGu-1" target="eoa80S1cHevG2SspZYGu-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-1" value="&lt;div style=&quot;font-size: 9px&quot;&gt;sortPostProcessors(currentRegistryProcessors, beanFactory);&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&#x9;&#x9;&#x9;registryProcessors.addAll(currentRegistryProcessors);&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;多个Registry后置处理器的先通过是否实现PriorityOrdered接口排，然后再根据是否实现Ordered接口排序，getOrder()值越小优先级越高&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1100" y="3180" width="280" height="39.99" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-2" value="&lt;font color=&quot;#000000&quot;&gt;postProcessors.sort(comparatorToUse)&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;默认是按AnnotationAwareOrderComparator排序&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#CCCC00;" parent="1" vertex="1">
          <mxGeometry x="1420" y="3180" width="200" height="39.99" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#CCCC00;curved=1;" parent="1" source="eoa80S1cHevG2SspZYGu-4" target="eoa80S1cHevG2SspZYGu-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-4" value="processConfigBeanDefinitions(registry)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1699.75" y="3310" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-21" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#000000;" parent="1" source="eoa80S1cHevG2SspZYGu-6" target="eoa80S1cHevG2SspZYGu-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-6" value="String[] candidateNames = registry.getBeanDefinitionNames()&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;registry是BeanFactory实例，这里即获取所有BeanDefinition名称&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1919.75" y="3305" width="220.25" height="50" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#CCCC00;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="eoa80S1cHevG2SspZYGu-8" target="eoa80S1cHevG2SspZYGu-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2030.1000000000004" y="3470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-8" value="&lt;font style=&quot;font-size: 10px&quot;&gt;BeanDefinition beanDef = registry.getBeanDefinition(beanName)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="1940" y="3410.01" width="180" height="39.99" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-14" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#000000;" parent="1" source="eoa80S1cHevG2SspZYGu-12" target="eoa80S1cHevG2SspZYGu-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-18" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="eoa80S1cHevG2SspZYGu-12" target="eoa80S1cHevG2SspZYGu-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2150" y="3500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-12" value="&lt;font color=&quot;#000000&quot;&gt;&lt;b&gt;Full模式&lt;/b&gt; || &lt;b&gt;Lite模式&lt;/b&gt;？&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=8;fontColor=#CCCC00;" parent="1" vertex="1">
          <mxGeometry x="1980" y="3480" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-26" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;fontColor=#000000;" parent="1" source="eoa80S1cHevG2SspZYGu-13" target="eoa80S1cHevG2SspZYGu-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-28" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" parent="1" source="eoa80S1cHevG2SspZYGu-13" target="eoa80S1cHevG2SspZYGu-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-13" value="&lt;font color=&quot;#000000&quot;&gt;ConfigurationClassUtils&lt;br&gt;.checkConfigurationClassCandidate(beanDef, this.metadataReaderFactory)&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=8;fontColor=#CCCC00;" parent="1" vertex="1">
          <mxGeometry x="1940" y="3560" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-16" value="&lt;font color=&quot;#007fff&quot;&gt;Full模式：&lt;br&gt;BeanDefinition中attributes中“&amp;lt;类名&amp;gt;.configurationClass”属性的值为“full”;&lt;br&gt;Lite模式：&lt;br&gt;BeanDefinition中&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 127 , 255)&quot;&gt;attributes中“&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;&amp;lt;类名&amp;gt;.configurationClass”属性的值为“lite”;&lt;br&gt;这个属性在后面赋值，如果这里不为空说明这个后置处理已经执行过了，不用继续执行&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="1690" y="3469.99" width="290.13" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-19" value="说明已经执行过了" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2119.75" y="3480" width="120.25" height="39.99" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-22" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=8;fontColor=#000000;" parent="1" source="eoa80S1cHevG2SspZYGu-20" target="eoa80S1cHevG2SspZYGu-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-20" value="for -&amp;gt; candidateNames" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1950.13" y="3370.01" width="159.99" height="19.99" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-25" value="&lt;font style=&quot;font-size: 9px&quot;&gt;configCandidates.add(new &lt;b&gt;BeanDefinitionHolder&lt;/b&gt;(beanDef, beanName))&lt;br&gt;&lt;font style=&quot;font-size: 9px&quot; color=&quot;#007fff&quot;&gt;将符合条件的配置类BeanDefintion加入候选配置类BeanDefintion容器&lt;/font&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2160" y="3555" width="200" height="49.99" as="geometry" />
        </mxCell>
        <mxCell id="pmHgX_p49bybqUAEl16l-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="eoa80S1cHevG2SspZYGu-27" target="pmHgX_p49bybqUAEl16l-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-27" value="for end" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1950.13" y="3620.01" width="159.99" height="19.99" as="geometry" />
        </mxCell>
        <mxCell id="eoa80S1cHevG2SspZYGu-29" value="&lt;font color=&quot;#007fff&quot;&gt;先读取元数据信息，&lt;br&gt;判断是否是候选的配置类（候选配置类条件）：&lt;br&gt;０）没有工厂方法；&lt;br&gt;１）被@Configuration注解的BeanDefinition（Full模式）&lt;br&gt;２）被@Component @ComponentScan @Import @ImportResource 注解的BeanDefinition（Lite模式）&lt;br&gt;３）没有上面注解，但是有被＠Bean注解的方法的BeanDefinition (Lite模式)&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="1689.87" y="3540" width="250.13" height="70.99" as="geometry" />
        </mxCell>
        <mxCell id="pmHgX_p49bybqUAEl16l-1" value="&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;这里ConfigurationClassPostProcessor实例就是注册的第４个Bean&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="770" y="3269.9900000000002" width="310" height="20" as="geometry" />
        </mxCell>
        <mxCell id="pmHgX_p49bybqUAEl16l-3" value="1) 加载JVM系统属性、操作系统环境变量（存储在&lt;span style=&quot;font-size: x-small ; text-align: center&quot;&gt;propertySources&lt;/span&gt;）&lt;br&gt;2) 注册６个RootBeanDefinition&lt;br&gt;3) 创建ClassPathBeanDefinitionScanner" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="420" y="325" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="pmHgX_p49bybqUAEl16l-4" value="1) 扫描basePackages下面的class文件，查找@Component注解且没有被＠Conditional注解的外部类、具象类或者抽象方法标注有@Lookup的抽象类作为候选Bean, 创建BeanDefintion；&lt;br&gt;&lt;br&gt;2) 对BeanDefinition进行后置处理（详细见后面流程图），然后将BeanDefinition加入到BeanFactory容器的beanDefinitionMap" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="430" y="890" width="290" height="90" as="geometry" />
        </mxCell>
        <mxCell id="pmHgX_p49bybqUAEl16l-5" value="１）给BeanFactory赋值了很多工具；&lt;br&gt;２）注册了３个Bean" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="325" y="2670" width="190" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pmHgX_p49bybqUAEl16l-6" value="前两步是环境准备" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="370.5" y="2440" width="99" height="40" as="geometry" />
        </mxCell>
        <mxCell id="pmHgX_p49bybqUAEl16l-7" value="１）执行&lt;b&gt;BeanFactoryPostProcessor&lt;/b&gt;&lt;br&gt;首先先从beanDefinitionMap及singletonObjects中查找&lt;b&gt;BeanDefinitionRegistryPostProcessor&lt;/b&gt;类型的BeanDefinition, 然后获取Bean实例（没有就创建），排序，执行后置处理(主要是递归扫描加载更多的BeanDefinition)；&lt;br&gt;然后获取&lt;b style=&quot;font-size: 9px&quot;&gt;BeanFactoryPostProcessor&lt;/b&gt;依次执行后置处理(主要是修改BeanDefintion属性，比如代理增强)。" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="259" y="2940" width="310" height="70" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="pmHgX_p49bybqUAEl16l-8" target="q_IlW1Jl21nTmUL6hJaz-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="pmHgX_p49bybqUAEl16l-8" value="configCandidates.sort(...) &lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;通过Ordered接口的getOrder()值排序，值越小优先级越高&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1949.88" y="3660.01" width="159.99" height="39.99" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-1" target="q_IlW1Jl21nTmUL6hJaz-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-1" value="&lt;font style=&quot;font-size: 9px&quot;&gt;generator = (BeanNameGenerator) sbr.getSingleton(&lt;br&gt;CONFIGURATION_BEAN_NAME_GENERATOR)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1920" y="3720.01" width="220" height="39.99" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-3" target="q_IlW1Jl21nTmUL6hJaz-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-3" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;parser = new &lt;b&gt;ConfigurationClassParser&lt;/b&gt;(&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;this.metadataReaderFactory, this.problemReporter, this.environment,&lt;/font&gt;&lt;span&gt;this.resourceLoader, this.componentScanBeanNameGenerator, registry);&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1920" y="3780" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-5" target="q_IlW1Jl21nTmUL6hJaz-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-5" value="&lt;div&gt;while(!candidates.isEmpty()) start&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1950" y="3860" width="160" height="10" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-182" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-8" target="q_IlW1Jl21nTmUL6hJaz-181" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-8" value="&lt;div&gt;&lt;font size=&quot;1&quot;&gt;while end&lt;/font&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1950.1299999999999" y="4290" width="160" height="10" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;curved=1;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-9" target="q_IlW1Jl21nTmUL6hJaz-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2150" y="3910" />
              <mxPoint x="2150" y="3835" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-163" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-9" target="q_IlW1Jl21nTmUL6hJaz-162" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-9" value="&lt;div&gt;&lt;font size=&quot;1&quot;&gt;parser.parse(candidates)&lt;/font&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1949.8700000000001" y="3890" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-14" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-11" target="q_IlW1Jl21nTmUL6hJaz-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-11" value="&lt;div&gt;&lt;font size=&quot;1&quot;&gt;for(candidates) start&lt;/font&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2180" y="3830" width="160" height="10" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-16" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-13" target="q_IlW1Jl21nTmUL6hJaz-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-13" value="&lt;div&gt;&lt;font size=&quot;1&quot;&gt;bd = holder.getBeanDefinition()&lt;/font&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2180" y="3860" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-18" value="&lt;font style=&quot;font-size: 8px&quot; color=&quot;#007fff&quot;&gt;AnnotatedBeanDefinition&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-15" target="q_IlW1Jl21nTmUL6hJaz-17" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2360" y="4000" />
              <mxPoint x="2360" y="3940" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-24" value="其他" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-15" target="q_IlW1Jl21nTmUL6hJaz-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-159" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-15" target="q_IlW1Jl21nTmUL6hJaz-158" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-15" value="&lt;font style=&quot;font-size: 9px&quot;&gt;bd 类型？&lt;br&gt;右边是是if...else,,,&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="2220" y="3980" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-28" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-17" target="q_IlW1Jl21nTmUL6hJaz-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-157" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-17" target="q_IlW1Jl21nTmUL6hJaz-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-17" value="parse(((AnnotatedBeanDefinition) bd).getMetadata(), holder.getBeanName())" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="2420.5" y="3920" width="179.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-19" value="暂略" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="2420.5" y="3980" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-21" value="暂略" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="2420.5" y="4040" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-26" value="测试中配置类的bd的类型是ScannedGenericBeanDefinition，&lt;br&gt;实现了AnnotatedBeanDefintion接口" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="2350.5" y="3890" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-23" value="AbstractBeanDefinition&lt;br&gt;&amp;amp;&amp;amp;&amp;nbsp;bd.hasBeanClass()" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-15" target="q_IlW1Jl21nTmUL6hJaz-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-31" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-27" target="q_IlW1Jl21nTmUL6hJaz-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-27" value="&lt;b&gt;processConfigurationClass&lt;/b&gt;(new &lt;b&gt;ConfigurationClass&lt;/b&gt;(metadata, beanName))&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;看配置类内部有没有引入其他Bean定义，有的话就解析并加载&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#ffcd28;gradientColor=#ffa500;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="2640" y="3910" width="179.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-29" value="ConfigurationClassParser" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="2669.75" y="3895" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-33" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-30" target="q_IlW1Jl21nTmUL6hJaz-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-36" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-30" target="q_IlW1Jl21nTmUL6hJaz-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-30" value="this.conditionEvaluator.shouldSkip(...)&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;检查是否需要跳过添加了@Conditional的配置类，测试用例没涉及暂略&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="2860.5" y="3920" width="179.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-32" value="TODO&lt;br&gt;&lt;font style=&quot;font-size: 8px&quot; color=&quot;#007fff&quot;&gt;有条件注解的配置类处理也很复杂，在SpringBoot自动装配更常见，后面再看&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="3080" y="3920" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-34" value="ConditionEvaluator" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="3110" y="3900" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-38" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-35" target="q_IlW1Jl21nTmUL6hJaz-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-35" value="SourceClass sourceClass = asSourceClass(configClass)" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="2860.5" y="3980" width="179.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-40" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-37" target="q_IlW1Jl21nTmUL6hJaz-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-42" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-37" target="q_IlW1Jl21nTmUL6hJaz-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-37" value="&lt;font style=&quot;font-size: 9px&quot;&gt;while:&lt;br&gt;sourceClass = &lt;b&gt;doProcessConfigurationClass&lt;/b&gt;(&lt;br&gt;configClass, sourceClass)&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="2840" y="4040" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-39" value="&lt;font size=&quot;1&quot;&gt;this.configurationClasses&lt;br&gt;.put(configClass, configClass)&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;缓存一下，防重复处理&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="2860.5" y="4100" width="179.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-44" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=7;fontColor=#007FFF;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-41" target="q_IlW1Jl21nTmUL6hJaz-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-41" value="&lt;font size=&quot;1&quot;&gt;processMemberClasses(configClass, sourceClass)&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 7px&quot;&gt;处理嵌套类，如果配置类里包配置类会执行这里的逻辑&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="3080" y="4040" width="179.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-46" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-43" target="q_IlW1Jl21nTmUL6hJaz-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-43" value="&lt;font style=&quot;font-size: 9px&quot;&gt;for:&lt;br&gt;processPropertySource(propertySource)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;处理@PropertySource注解，加载属性资源&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="3080" y="4100" width="179.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-141" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-45" target="q_IlW1Jl21nTmUL6hJaz-140" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-45" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;处理&lt;b&gt;@ComponentScan&lt;/b&gt;、&lt;br&gt;&lt;b&gt;@ComponentScans&lt;/b&gt;注解&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3100" y="4200" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-53" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-47" target="q_IlW1Jl21nTmUL6hJaz-52" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-58" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;curved=1;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-47" target="q_IlW1Jl21nTmUL6hJaz-57" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3590" y="4200" />
              <mxPoint x="3590" y="4130" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-47" value="&lt;div&gt;scannedBeanDefinitions =&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/span&gt;this.&lt;b&gt;componentScanParser&lt;/b&gt;.parse(componentScan, sourceClass.getMetadata().getClassName())&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;遍历解析注解，扫描创建BeanDefinition&lt;/font&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="3320" y="4175" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;fontSize=9;fontColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-52" target="q_IlW1Jl21nTmUL6hJaz-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3580" y="4260" />
              <mxPoint x="3580" y="3890" />
              <mxPoint x="2620" y="3890" />
              <mxPoint x="2620" y="3925" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-52" value="parse(bdCand.getBeanClassName(), holder.getBeanName())&lt;br&gt;&lt;font style=&quot;font-size: 9px&quot; color=&quot;#007fff&quot;&gt;相当于递归解析配置类BeanDefinition&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="3340" y="4240" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-116" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-55" target="q_IlW1Jl21nTmUL6hJaz-115" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-160" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#97D077;dashed=1;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-55" target="q_IlW1Jl21nTmUL6hJaz-158" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3340" y="4240" />
              <mxPoint x="2720" y="4240" />
              <mxPoint x="2720" y="4180" />
              <mxPoint x="2310" y="4180" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-55" value="&lt;font size=&quot;1&quot;&gt;processImports(configClass, sourceClass, getImports(sourceClass), true)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;处理＠Import注解&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3340" y="4320" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-60" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-57" target="q_IlW1Jl21nTmUL6hJaz-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-57" value="scanner = new &lt;b&gt;ClassPathBeanDefinitionScanner&lt;/b&gt;(...)" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="3602" y="4110" width="198" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-62" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-59" target="q_IlW1Jl21nTmUL6hJaz-61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-59" value="&lt;font style=&quot;font-size: 9px&quot;&gt;读取注解中nameGenerator、scopedProxy、scopeResolver、resourcePattern、includeFilters、excludeFilters、lazyInit、basePackages、basePackageClasses等属性，设置到scanner&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3602" y="4170" width="198" height="60" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-101" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-61" target="q_IlW1Jl21nTmUL6hJaz-47" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3590" y="4270" />
              <mxPoint x="3590" y="4213" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-61" value="&lt;font style=&quot;font-size: 9px&quot;&gt;return scanner.doScan(&lt;br&gt;StringUtils.toStringArray(basePackages))&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3602" y="4250" width="198" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-110" value="this.componentsIndex != null &lt;br&gt;&amp;amp;&amp;amp; indexSupportsIncludeFilters()" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="K2lkUtP0yNImSPrxmu6i-73" target="q_IlW1Jl21nTmUL6hJaz-111" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1357.75" y="990" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="1460" y="1050" />
              <mxPoint x="1460" y="950" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-111" value="candidates = findCandidateComponents(basePackage)&lt;br&gt;&lt;font style=&quot;font-size: 9px&quot; color=&quot;#007fff&quot;&gt;这里使用CandidateComponentsIndexLoader读取并加载BeanDefinition，暂略&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="1479.75" y="920" width="198" height="60" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-112" value="为了提升组件加载速度，在Spring5.0引入的机制，配合@Indexed注解使用，依赖spring-context-indexer包；&lt;br&gt;&lt;span&gt;项目编译打包时，会在自动生成META-INF/spring.components文件，文件包含被@Indexed注释的类的模式解析结果。当Spring应用上下文进行组件扫描时，META-INF/spring.components会被org.springframework.context.index.CandidateComponentsIndexLoader读取并加载，转换为CandidateComponentsIndex对象，此时组件扫描会读取CandidateComponentsIndex，而不进行实际扫描，从而提高组件扫描效率，减少应用启动时间。&lt;br&gt;源码注释有一句：（貌似主要是给框架内部使用的）&lt;br&gt;Candidate components index loading mechanism for internal use within the framework.&lt;br&gt;&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1677.75" y="910" width="442" height="80" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-113" value="这里的流程前面已经分析过了" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="3810" y="4250" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-120" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-115" target="q_IlW1Jl21nTmUL6hJaz-119" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-115" value="for(importCandidates)" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="3600" y="4320" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-118" value="" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="3890.25" y="4360" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-121" value="ImportSelector" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-119" target="q_IlW1Jl21nTmUL6hJaz-118" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-123" value="ImportBeanDefinitionRegistrar" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-119" target="q_IlW1Jl21nTmUL6hJaz-122" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-125" value="其他" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-119" target="q_IlW1Jl21nTmUL6hJaz-124" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-119" value="candidate类型？" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="3660" y="4420" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-122" value="" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="3890.25" y="4420" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-124" value="" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="3892.25" y="4480" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-129" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-126" target="q_IlW1Jl21nTmUL6hJaz-128" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-148" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-126" target="q_IlW1Jl21nTmUL6hJaz-147" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-126" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;处理&lt;b&gt;＠ImportResource&lt;/b&gt;注解&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3099.62" y="4520" width="140.25" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-135" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-128" target="q_IlW1Jl21nTmUL6hJaz-134" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-150" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-128" target="q_IlW1Jl21nTmUL6hJaz-149" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-128" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;处理&lt;b&gt;@Bean&lt;/b&gt;方法&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3099.62" y="4600" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-137" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-134" target="q_IlW1Jl21nTmUL6hJaz-136" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-152" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-134" target="q_IlW1Jl21nTmUL6hJaz-151" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-134" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;处理接口default 方法&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3099.62" y="4680" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-155" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-136" target="q_IlW1Jl21nTmUL6hJaz-153" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-136" value="&lt;font size=&quot;1&quot;&gt;处理父类&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3099.62" y="4760" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-139" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-138" target="q_IlW1Jl21nTmUL6hJaz-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-138" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;componentScans = AnnotationConfigUtils.attributesForRepeatable(&lt;/div&gt;&lt;div&gt;sourceClass.getMetadata(),&lt;/div&gt;&lt;div&gt;ComponentScans.class,ComponentScan.class)&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;获取元数据信息中&lt;b&gt;@ComponentScans、@ComponentScan&lt;/b&gt;注解的属性值，放到不可变的Set集合,　&lt;b&gt;如果没有跳过&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3320" y="4080" width="240" height="80" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-142" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-140" target="q_IlW1Jl21nTmUL6hJaz-55" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-143" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-140" target="q_IlW1Jl21nTmUL6hJaz-126" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-140" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;处理&lt;b&gt;@Imports&lt;/b&gt;注解&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3100" y="4320" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-145" value="看这部分真是哪里都能引入新的Bean定义" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="2950" y="4480" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-146" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="3070" y="4200" width="20" height="600" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-147" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;TODO&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="3319.87" y="4520" width="140.25" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-149" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;TODO&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="3319.87" y="4600" width="140.25" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-151" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;TODO&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="3320" y="4680" width="140.25" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-153" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;TODO&lt;/div&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="3320" y="4760" width="140.25" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-158" value="processDeferredImportSelectors()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2160" y="4100" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-164" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-162" target="q_IlW1Jl21nTmUL6hJaz-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-166" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-162" target="q_IlW1Jl21nTmUL6hJaz-165" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-162" value="&lt;div&gt;&lt;font size=&quot;1&quot;&gt;this.reader = new ConfigurationClassBeanDefinitionReader(...)&lt;br&gt;this.reader&lt;br&gt;.&lt;b&gt;loadBeanDefinitions&lt;/b&gt;(configClasses)&lt;/font&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1930" y="4210" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-178" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-165" target="q_IlW1Jl21nTmUL6hJaz-174" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-165" value="&lt;div&gt;&lt;/div&gt;&lt;font size=&quot;1&quot;&gt;for(configurationModel):&lt;br&gt;loadBeanDefinitionsForConfigurationClass(&lt;br&gt;configClass, trackedConditionEvaluato&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2160" y="4210" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-167" value="ConfigurationClassBeanDefinitionReader" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="2170.5" y="4190" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-171" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-168" target="q_IlW1Jl21nTmUL6hJaz-170" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-168" value="&lt;div&gt;&lt;/div&gt;&lt;font size=&quot;1&quot;&gt;for(configClass.getBeanMethods()):&lt;br&gt;loadBeanDefinitionsForBeanMethod(beanMethod)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;用于将前面@Bean注解的方法注册为Bean定义&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2410" y="4290" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-173" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-170" target="q_IlW1Jl21nTmUL6hJaz-172" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-170" value="&lt;div&gt;&lt;/div&gt;&lt;font size=&quot;1&quot;&gt;loadBeanDefinitionsFromImportedResources(&lt;br&gt;configClass.getImportedResources())&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;用于将前面通过＠ImportResouce导入的ConfigurationClass注册为Bean定义&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2410" y="4360" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-180" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-172" target="q_IlW1Jl21nTmUL6hJaz-165" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-172" value="&lt;div&gt;&lt;/div&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;loadBeanDefinitionsFromRegistrars(&lt;br&gt;configClass.getImportBeanDefinitionRegistrars())&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;用于将前面通过＠Import 的ImportBeanDefinitionRegistrar注册的ConfigurationClass注册为Bean定义&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2410" y="4430" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-177" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" target="q_IlW1Jl21nTmUL6hJaz-168" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2530" y="4290.000000000001" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-179" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-174" target="q_IlW1Jl21nTmUL6hJaz-168" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-174" value="&lt;div&gt;&lt;/div&gt;&lt;font size=&quot;1&quot;&gt;&lt;div style=&quot;text-align: left&quot;&gt;&amp;nbsp;if (configClass.isImported()) {&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&amp;nbsp;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;registerBeanDefinitionForImportedConfigurationClass(&lt;br&gt;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;configClass);&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&amp;nbsp;}&lt;/div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;用于将前面通过＠Import导入的ConfigurationClass注册为Bean定义&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2400" y="4200" width="260" height="70" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-181" value="&lt;div&gt;&lt;font size=&quot;1&quot;&gt;sbr.registerSingleton(&lt;br&gt;IMPORT_REGISTRY_BEAN_NAME, parser.getImportRegistry())&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;往beanFactory注册了个名为“org.springframework.context.annotation.&lt;br&gt;ConfigurationClassPostProcessor.importRegistry”的单例Bean&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1920" y="4320" width="220" height="80" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-189" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-184" target="8LBShHvxASLETnbLwJq8-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-199" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-184" target="q_IlW1Jl21nTmUL6hJaz-185" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-184" value="&lt;b&gt;invokeBeanDefinitionRegistryPostProcessors&lt;/b&gt;(&lt;br&gt;currentRegistryProcessors, registry)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;第２次执行实现了BeanDefinitionRegistryPostProcessor和Ordered的接口的后置处理器的后置处理&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1119" y="3320" width="240" height="59.99" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-186" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-185" target="8LBShHvxASLETnbLwJq8-55" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-190" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-185" target="8LBShHvxASLETnbLwJq8-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-185" value="&lt;b&gt;invokeBeanDefinitionRegistryPostProcessors&lt;/b&gt;(&lt;br&gt;currentRegistryProcessors, registry)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;第１次执行其他实现了BeanDefinitionRegistryPostProcessor接口的后置处理器的后置处理&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1119" y="3400.01" width="240" height="59.99" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-191" value="&lt;b&gt;BeanDefinitionRegistryPostProcessor 侧重于扫描配置类&lt;br&gt;加载更多的BeanDefinition；&lt;br&gt;BeanFactoryPostProcessor侧重于增加、修改BeanDefinition的属性。&lt;/b&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="790" y="3360" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-195" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-192" target="q_IlW1Jl21nTmUL6hJaz-194" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-192" value="for(postProcessors):&lt;br&gt;postProcessor&lt;br&gt;.&lt;b&gt;postProcessBeanFactory&lt;/b&gt;(beanFactory)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;测试案例这里postProcessor只有ConfigurationClassPostProcessor&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#e3c800;fontColor=#000000;strokeColor=#B09500;" parent="1" vertex="1">
          <mxGeometry x="1419.5" y="4430" width="219.75" height="59.99" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-197" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-194" target="q_IlW1Jl21nTmUL6hJaz-196" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" parent="1" source="q_IlW1Jl21nTmUL6hJaz-194" target="C93iktiuMzNYxlLwOgFX-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-194" value="&lt;b&gt;enhanceConfigurationClasses&lt;/b&gt;(beanFactory)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1680" y="4440.01" width="220" height="39.99" as="geometry" />
        </mxCell>
        <mxCell id="q_IlW1Jl21nTmUL6hJaz-196" value="beanFactory.&lt;b&gt;addBeanPostProcessor&lt;/b&gt;(new ImportAwareBeanPostProcessor(beanFactory))" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1670" y="4500" width="240" height="39.99" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-4" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C93iktiuMzNYxlLwOgFX-1" target="C93iktiuMzNYxlLwOgFX-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-1" value="遍历beanFactory中的BeanDefinition,筛选Full类型的配置类的Bean定义&lt;br&gt;configBeanDefs.put(beanName, (AbstractBeanDefinition) beanDef)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1940" y="4435.01" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-6" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C93iktiuMzNYxlLwOgFX-3" target="C93iktiuMzNYxlLwOgFX-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-3" value="enhancer = new &lt;b&gt;ConfigurationClassEnhancer&lt;/b&gt;()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1940" y="4500" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-13" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="C93iktiuMzNYxlLwOgFX-5" target="C93iktiuMzNYxlLwOgFX-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-5" value="&lt;font style=&quot;font-size: 8px&quot;&gt;for:&lt;br&gt;beanDef.setAttribute(AutoProxyUtils&lt;br&gt;.PRESERVE_TARGET_CLASS_ATTRIBUTE,Boolean.TRUE);&lt;br&gt;configClass = beanDef.&lt;b&gt;resolveBeanClass&lt;/b&gt;(this.beanClassLoader);&lt;br&gt;enhancedClass = enhancer.&lt;b&gt;enhance&lt;/b&gt;(configClass, this.beanClassLoader);&lt;br&gt;beanDef.setBeanClass(enhancedClass);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;从Full配置类BeanDefinition读取beanClass, 然后增强生成Cglib代理类，覆盖BeanDefinition的beanClass&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1920" y="4560" width="260" height="110" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-7" value="这里可以看到经过BeanFactory后置处理阶段，所有Full配置类都变成了Cglib代理类；&lt;br&gt;后面创建Bean的时候才会用到。&lt;br&gt;&lt;br&gt;比如测试anno02:&lt;br&gt;&lt;div&gt;beanClass原本是：top.kwseeker.spring.annotation.anno02.MyConfig&lt;/div&gt;&lt;div&gt;增强后变为：top.kwseeker.spring.annotation.anno02.MyConfig$$EnhancerBySpringCGLIB$$4c786335&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="2180.5" y="4550" width="459.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-8" value="ConfigurationClassPostProcessor" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1720" y="4420.01" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-17" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="C93iktiuMzNYxlLwOgFX-11" target="C93iktiuMzNYxlLwOgFX-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-11" value="ConfigurationClassEnhancer#&lt;b&gt;enhance&lt;/b&gt;(Class&amp;lt;?&amp;gt; configClass, @Nullable ClassLoader classLoader)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2220" y="4630" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-19" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="C93iktiuMzNYxlLwOgFX-16" target="C93iktiuMzNYxlLwOgFX-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-16" value="enhancedClass = &lt;b&gt;createClass&lt;/b&gt;(&lt;b&gt;newEnhancer&lt;/b&gt;(configClass, classLoader))&lt;br&gt;&lt;font color=&quot;#cc0066&quot;&gt;TODO&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;: 需要理解org.springframework.cglib.proxy.Enhancer的原理&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2481" y="4620" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-18" value="&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;Enhancer enhancer = new Enhancer();&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;enhancer.setSuperclass(configSuperClass);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;enhancer.setInterfaces(new Class&amp;lt;?&amp;gt;[] {&lt;b&gt;EnhancedConfiguration&lt;/b&gt;.class});&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;enhancer.setUseFactory(false);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;enhancer.setNamingPolicy(&lt;b&gt;SpringNamingPolicy.INSTANCE&lt;/b&gt;);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;enhancer.setStrategy(new &lt;b&gt;BeanFactoryAwareGeneratorStrategy&lt;/b&gt;(classLoader));&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;enhancer.setCallbackFilter(&lt;b&gt;CALLBACK_FILTER&lt;/b&gt;);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;enhancer.setCallbackTypes(&lt;b&gt;CALLBACK_FILTER.getCallbackTypes()&lt;/b&gt;);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&#x9;&#x9;return enhancer;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=4;" parent="1" vertex="1">
          <mxGeometry x="2740" y="4590" width="280" height="120" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-22" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="C93iktiuMzNYxlLwOgFX-20" target="8LBShHvxASLETnbLwJq8-61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-20" value="&lt;div&gt;postProcessorNames =&lt;/div&gt;&lt;div&gt;&#x9;&#x9;&#x9;&#x9;beanFactory.&lt;b&gt;getBeanNamesForType&lt;/b&gt;(&lt;br&gt;&lt;b&gt;BeanFactoryPostProcessor&lt;/b&gt;.class, true, false)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1119" y="3600" width="240" height="39.99" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-23" value="&lt;font style=&quot;font-size: 10px&quot;&gt;前面解析配置类时有可能解析出来一些新的BeanFactoryPostProcessor, 所以这里getBeanNamesForType再查一次，并运行&lt;br&gt;TODO: 测试&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1359" y="3594.99" width="219" height="50.01" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="C93iktiuMzNYxlLwOgFX-24" target="3LwLyZj85QIxDYa8zrth-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="C93iktiuMzNYxlLwOgFX-24" value="PostProcessorRegistrationDelegate&lt;br&gt;.registerBeanPostProcessors(beanFactory, this)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="840" y="4720" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="3LwLyZj85QIxDYa8zrth-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1320" y="4740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-1" target="3LwLyZj85QIxDYa8zrth-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-1" value="postProcessorNames = beanFactory.getBeanNamesForType(&lt;br&gt;BeanPostProcessor.class, true, false)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1080" y="4720" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#007FFF;curved=1;" parent="1" source="3LwLyZj85QIxDYa8zrth-3" target="3LwLyZj85QIxDYa8zrth-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-3" value="doGetBeanNamesForType(&lt;br&gt;ResolvableType.forRawClass(type), includeNonSingletons, allowEagerInit)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1320" y="4720" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-5" value="&lt;font color=&quot;#007fff&quot;&gt;DefaultListableBeanFactory&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1099" y="4700" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-10" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-6" target="3LwLyZj85QIxDYa8zrth-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-6" value="for(this.&lt;b&gt;beanDefinitionNames&lt;/b&gt;):" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1560" y="4730" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-8" target="3LwLyZj85QIxDYa8zrth-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-8" value="for end" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1560" y="4980" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-12" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-9" target="3LwLyZj85QIxDYa8zrth-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-9" value="RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName);&lt;br&gt;&lt;font style=&quot;font-size: 8px&quot; color=&quot;#007fff&quot;&gt;获取合并的BeanDefinition，合并的BeanDefinition是指spring整合了父BeanDefinition的属性，将其他类型的BeanDefinition变成了RootBeanDefinition&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1560" y="4770" width="200" height="70" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-15" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-11" target="3LwLyZj85QIxDYa8zrth-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-11" value="筛选规则：&lt;br&gt;规则优点多后面再看" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1560" y="4860" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-16" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-14" target="3LwLyZj85QIxDYa8zrth-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-14" value="&lt;div&gt;if (matchFound) {&lt;/div&gt;&lt;div&gt;result.add(beanName);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="1560" y="4920" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-27" value="for(this.&lt;b&gt;manualSingletonNames&lt;/b&gt;):" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1800" y="4730" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-28" value="for end" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1800" y="4890" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-29" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#007FFF;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="3LwLyZj85QIxDYa8zrth-27" target="3LwLyZj85QIxDYa8zrth-32" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1900" y="4770" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-31" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-32" target="3LwLyZj85QIxDYa8zrth-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-32" value="筛选规则：&lt;br&gt;规则有点多后面再看" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1800" y="4770" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-33" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-34" target="3LwLyZj85QIxDYa8zrth-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-34" value="&lt;div&gt;if (matchFound) {&lt;/div&gt;&lt;div&gt;result.add(beanName);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="1800" y="4830" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-36" value="&lt;div style=&quot;font-size: 7px&quot;&gt;&lt;font style=&quot;font-size: 7px&quot;&gt;测试DEMO中没有额外手动注册BeanPostProcessor, 所以只获取到Spring默认自带的3个BeanPostProcessor&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 7px&quot;&gt;&lt;font style=&quot;font-size: 7px&quot;&gt;&lt;span&gt;&quot;org.springframework.context.annotation.internalAutowiredAnnotationProcessor&quot; -&amp;gt; &lt;br&gt;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;{RootBeanDefinition@1343} &quot;Root bean: class [org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor];&quot;&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 7px&quot;&gt;&lt;font style=&quot;font-size: 7px&quot;&gt;&quot;org.springframework.context.annotation.internalCommonAnnotationProcessor&quot; -&amp;gt; &lt;br&gt;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;{RootBeanDefinition@1436} &quot;Root bean: class [org.springframework.context.annotation.CommonAnnotationBeanPostProcessor];&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 7px&quot;&gt;&lt;font style=&quot;font-size: 7px&quot;&gt;&quot;org.springframework.context.annotation.internalRequiredAnnotationProcessor&quot; -&amp;gt; &lt;br&gt;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;{RootBeanDefinition@1437} &quot;Root bean: class [org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor];&quot;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1080" y="4760" width="460" height="80" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-40" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=7;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-37" target="3LwLyZj85QIxDYa8zrth-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-37" value="beanFactory.&lt;b&gt;addBeanPostProcessor&lt;/b&gt;(new BeanPostProcessorChecker(beanFactory, beanProcessorTargetCount))" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1080" y="4840" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-42" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=7;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-39" target="3LwLyZj85QIxDYa8zrth-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-39" value="for(postProcessorNames):&lt;br&gt;按照是否实现PriorityOrdered、Ordered、MergedBeanDefinitionPostProcessor接口将后置处理器分为四类并注册&lt;br&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1080" y="4900" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-44" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-41" target="3LwLyZj85QIxDYa8zrth-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-41" value="&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;sortPostProcessors(priorityOrderedPostProcessors, beanFactory);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;b&gt;registerBeanPostProcessors&lt;/b&gt;&lt;span&gt;(beanFactory, priorityOrderedPostProcessors)&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1060" y="4970" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-46" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-43" target="3LwLyZj85QIxDYa8zrth-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-43" value="&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;div&gt;sortPostProcessors(orderedPostProcessors, beanFactory);&lt;/div&gt;&lt;div&gt;&lt;b&gt;registerBeanPostProcessors&lt;/b&gt;(beanFactory, orderedPostProcessors);&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1060" y="5030" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-48" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-45" target="3LwLyZj85QIxDYa8zrth-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-45" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;span style=&quot;font-size: 9px&quot;&gt;&lt;b&gt;registerBeanPostProcessors&lt;/b&gt;(beanFactory, nonOrderedPostProcessors)&lt;/span&gt;&lt;br style=&quot;font-size: 9px&quot;&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1060" y="5090" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-50" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-47" target="3LwLyZj85QIxDYa8zrth-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-47" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;div&gt;sortPostProcessors(internalPostProcessors, beanFactory);&lt;/div&gt;&lt;div&gt;&lt;b&gt;registerBeanPostProcessors&lt;/b&gt;(beanFactory, internalPostProcessors);&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1060" y="5150" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-49" value="&lt;div&gt;beanFactory.&lt;b&gt;addBeanPostProcessor&lt;/b&gt;(new ApplicationListenerDetector(applicationContext))&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;创建一个新的ApplicationListenerDetector，替换之前的&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1060" y="5210" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-51" value="&lt;div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;这里注册之前就已经有了三个BeanPostProcessor, TODO 前面哪里注册的？&lt;br&gt;0 = {ApplicationContextAwareProcessor@1931}&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;1 = {ApplicationListenerDetector@1932}&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;2 = {ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor@1933}&amp;nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;经过这一步最终（测试中没有自定义BeanPostProcess, 这些都是Spring默认添加的）：&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;0 = {ApplicationContextAwareProcessor@1931}&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;1 = {ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor@1933}&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;2 = {PostProcessorRegistrationDelegate$BeanPostProcessorChecker@3062}&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;3 = {CommonAnnotationBeanPostProcessor@3219}&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;4 = {AutowiredAnnotationBeanPostProcessor@3181}&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;5 = {RequiredAnnotationBeanPostProcessor@3220}&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;6 = {ApplicationListenerDetector@3221}&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="690" y="4770" width="320" height="150" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-54" value="官方文档：1.15.1. Internationalization using MessageSource&lt;br&gt;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#context-functionality-messagesource" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="610" y="5325" width="420" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-57" value="this.&lt;b&gt;messageSource&lt;/b&gt; = beanFactory.getBean(&lt;br&gt;MESSAGE_SOURCE_BEAN_NAME, &lt;b&gt;MessageSource&lt;/b&gt;.class);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;即这里创建名为“messageSource”的Bean&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1069.5" y="5275" width="219" height="50" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-61" value="Y" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-59" target="3LwLyZj85QIxDYa8zrth-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-64" value="N" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-59" target="3LwLyZj85QIxDYa8zrth-62" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-59" value="&lt;font&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;beanFactory.containsLocalBean(&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;MESSAGE_SOURCE_BEAN_NAME) ?&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;messageSource&lt;/font&gt;&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="840" y="5270" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-62" value="&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;DelegatingMessageSource dms = new &lt;b&gt;DelegatingMessageSource&lt;/b&gt;();&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;dms.setParentMessageSource(getInternalParentMessageSource());&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;this.&lt;b&gt;messageSource&lt;/b&gt; = dms;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;beanFactory.registerSingleton(MESSAGE_SOURCE_BEAN_NAME, this.messageSource);&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;使用默认的&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1049" y="5345" width="260" height="70" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-72" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-65" target="3LwLyZj85QIxDYa8zrth-71" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-65" value="ConfigurableListableBeanFactory beanFactory = getBeanFactory()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="841" y="5440" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-67" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;this.applicationEventMulticaster =&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;beanFactory.getBean(APPLICATION_EVENT_MULTICASTER_BEAN_NAME,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;ApplicationEventMulticaster.class)&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1080.5" y="5510" width="339.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-69" value="&lt;div&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;this.applicationEventMulticaster = new &lt;b&gt;SimpleApplicationEventMulticaster&lt;/b&gt;(beanFactory);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&#x9;&#x9;&#x9;beanFactory.&lt;b&gt;registerSingleton&lt;/b&gt;(APPLICATION_EVENT_MULTICASTER_BEAN_NAME, this.applicationEventMulticaster)&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1080.5" y="5580" width="399.5" height="50" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-73" value="Y" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-71" target="3LwLyZj85QIxDYa8zrth-67" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-74" value="N" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-71" target="3LwLyZj85QIxDYa8zrth-69" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-71" value="&lt;span style=&quot;font-size: 8px&quot;&gt;beanFactory.containsLocalBean(&lt;/span&gt;&lt;br&gt;&lt;font style=&quot;font-size: 6px&quot;&gt;APPLICATION_EVENT_MULTICASTER_BEAN_NAME&lt;/font&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;&quot;&lt;font color=&quot;#007fff&quot;&gt;applicationEventMulticaster&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;&quot;&lt;/span&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="860" y="5500" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-75" value="containsLocalBean() 判断本地工厂是否包含某名字的单例Bean或BeanDefintion" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="989" y="5490" width="370" height="20" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-79" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-76" target="3LwLyZj85QIxDYa8zrth-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-76" value="&lt;font style=&quot;font-size: 9px&quot;&gt;for(getApplicationListeners()):&lt;br&gt;getApplicationEventMulticaster().&lt;b&gt;addApplicationListener&lt;/b&gt;(listener)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;先注册静态指定（即通过接口添加的）的监听器到事件广播器的监听器列表&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="840" y="5715" width="260" height="50" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-81" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-78" target="3LwLyZj85QIxDYa8zrth-80" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-78" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;listenerBeanNames = getBeanNamesForType(&lt;br&gt;ApplicationListener.class, true, false)&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;扫描通过＠EventListener注解等指定的&lt;span style=&quot;font-size: x-small&quot;&gt;ApplicationListener类型的Bean&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="840" y="5790" width="260" height="50" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-83" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-80" target="3LwLyZj85QIxDYa8zrth-82" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-80" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;for(listenerBeanNames):&lt;/font&gt;&lt;br&gt;&lt;font&gt;&lt;font size=&quot;1&quot;&gt;getApplicationEventMulticaster()&lt;br&gt;.&lt;b&gt;addApplicationListenerBean&lt;/b&gt;(listenerBeanName)&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot; size=&quot;1&quot;&gt;再注册Spring默认添加或通过注解指定的监听器到事件广播器的监听器列表&lt;/font&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="840" y="5860" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-85" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-82" target="3LwLyZj85QIxDYa8zrth-84" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-82" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;Set&amp;lt;ApplicationEvent&amp;gt; earlyEventsToProcess = this.earlyApplicationEvents;&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;测试DEMO这里为空&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="860" y="5940" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-84" value="&lt;font style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;for (earlyEventsToProcess)：&lt;br&gt;&lt;/font&gt;getApplicationEventMulticaster().multicastEvent(earlyEvent)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;发布早期事件&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="840" y="6000" width="260" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-86" value="官方文档：1.15.2. Standard and Custom Events" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="620" y="5770" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontColor=#007FFF;" parent="1" source="3LwLyZj85QIxDYa8zrth-87" target="dxBHXkDJcLthnHCvqOZJ-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3LwLyZj85QIxDYa8zrth-87" value="先判断BeanFactory中是否包含名为conversionService的Bean或BeanDefinition（即用户是否有指定ConversionService的Bean），包含则创建Bean实例，并赋值给BeanFactory的conversionService成员" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="841" y="6070" width="259" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-2" value="&lt;font style=&quot;font-size: 10px&quot;&gt;这个是类型转换器，可以将某类型值转换为其他类型&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1100" y="6070" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;curved=1;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-3" target="dxBHXkDJcLthnHCvqOZJ-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-3" value="beanFactory.addEmbeddedValueResolver(strVal -&amp;gt; getEnvironment().resolvePlaceholders(strVal))&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;往BeanFactory#embeddedValueResolvers添加了个StringValueResolver，可以用于解析属性文件中属性值&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="841" y="6160" width="259" height="50" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-6" value="&lt;font style=&quot;font-size: 10px&quot;&gt;这里是间接调用的StandardEnvironment的propertyResolver的resolvePlaceholders()方法, 即 PropertySourcePropetyResolver&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1101" y="6160" width="239" height="50" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-13" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-7" target="dxBHXkDJcLthnHCvqOZJ-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-7" value="weaverAwareNames = beanFactory.getBeanNamesForType(&lt;br&gt;&lt;b&gt;LoadTimeWeaverAware&lt;/b&gt;.class, false, false)&lt;br&gt;for(weaverAwareNames):&lt;br&gt;getBean(weaverAwareName)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;获取实现了LoadTimeWeaverAware接口的Bean名称，并实例化&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="821" y="6240" width="299" height="70" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-9" value="&lt;div style=&quot;text-align: left&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;1 Spring在解析环境变量系统属性时创建了3个Bean；&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;2&amp;nbsp; 在registerBeanPostProcessors() 阶段创建了一些Bean；调的getBean()&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;3&amp;nbsp; 在初始国际化处理和初始化时间广播器时分别创建了Bean:“messageSource”和“applicationEventMulticaster”&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;除了上面的Bean外,LoadTimeWeaverAware是最早被创建的Bean&lt;br&gt;名字上是“加载时织入”，应该是AOP相关的&lt;/span&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1130" y="6240" width="350" height="70" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-15" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-11" target="dxBHXkDJcLthnHCvqOZJ-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-17" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-11" target="dxBHXkDJcLthnHCvqOZJ-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-11" value="beanFactory.freezeConfiguration()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;冻结所有修改（包括后置处理）已注册BeanDefinition的操作&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="850.5" y="6337" width="239" height="53" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-14" value="&lt;font style=&quot;font-size: 9px&quot;&gt;this.configurationFrozen = true;&lt;br&gt;this.frozenBeanDefinitionNames = StringUtils.toStringArray(this.beanDefinitionNames)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1160.25" y="6337" width="240" height="53" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-16" target="dxBHXkDJcLthnHCvqOZJ-20" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1520" y="6446" />
              <mxPoint x="1520" y="6094" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-16" value="beanFactory.preInstantiateSingletons()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;初始化所有非懒加载单例Bean&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="850.5" y="6420" width="239" height="53" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-23" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;dashed=1;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-20" target="dxBHXkDJcLthnHCvqOZJ-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-20" target="dxBHXkDJcLthnHCvqOZJ-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-20" value="&lt;font style=&quot;font-size: 8px&quot;&gt;beanNames = new ArrayList&amp;lt;&amp;gt;(this.beanDefinitionNames)&lt;br&gt;for (String beanName : beanNames)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1560" y="6079" width="239" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-29" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-22" target="dxBHXkDJcLthnHCvqOZJ-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-22" value="&lt;span style=&quot;font-size: 8px&quot;&gt;for end&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1561" y="6280" width="239" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-24" value="第一次循环：初始化所有非懒加载单例Bean" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1561" y="6111.5" width="111" height="27" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-25" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;dashed=1;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-26" target="dxBHXkDJcLthnHCvqOZJ-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-142" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;fontSize=8;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-26" target="fxcZrqCvbWanZoaIqKKB-140" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1740" y="6360" />
              <mxPoint x="1840" y="6360" />
              <mxPoint x="1840" y="6300" />
              <mxPoint x="1979" y="6300" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-26" value="&lt;font style=&quot;font-size: 8px&quot;&gt;for (String beanName : beanNames)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1561" y="6320" width="239" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-27" target="dxBHXkDJcLthnHCvqOZJ-16" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1520" y="6470" />
              <mxPoint x="1520" y="6460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-27" value="&lt;span style=&quot;font-size: 8px&quot;&gt;for end&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1561" y="6460" width="239" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-28" value="第二次循环：执行后置初始化回调&lt;br&gt;对实现了SmartInitializingSingletonj接口的非懒加载的单例Bean执行&lt;br&gt;&lt;br&gt;存在一些必须等全部单例实例化后才能做的场景？&lt;br&gt;官网只是说：&lt;br&gt;保证在实例化了所有常规单例bean后调用。此方法中的ListableBeanFactory#getBeansOfType调用不会在引导过程中触发意外的副作用。（？副作用）" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1560" y="6352" width="240" height="78" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-31" value="DefaultListableBeanFactory" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1619.5" y="6059" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-37" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-34" target="dxBHXkDJcLthnHCvqOZJ-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-34" value="&lt;span style=&quot;font-size: 8px&quot;&gt;RootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1881" y="6000" width="199" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-42" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-36" target="dxBHXkDJcLthnHCvqOZJ-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-36" value="&lt;span style=&quot;font-size: 8px&quot;&gt;bd校验：非抽象类 &amp;amp;&amp;amp; 单例 &amp;amp;&amp;amp;&amp;nbsp; 非懒加载&lt;br&gt;不满足条件的直接跳过&lt;br&gt;&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1881" y="6059" width="199" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-46" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-41" target="dxBHXkDJcLthnHCvqOZJ-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-48" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-41" target="dxBHXkDJcLthnHCvqOZJ-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-41" value="&lt;font style=&quot;font-size: 9px&quot;&gt;isFactoryBean(&lt;br&gt;beanName)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;工厂Bean?&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=8;" parent="1" vertex="1">
          <mxGeometry x="1930" y="6120" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-45" value="&lt;span style=&quot;font-size: 8px&quot;&gt;TODO&lt;br&gt;&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2101" y="6130" width="159" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-50" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-47" target="dxBHXkDJcLthnHCvqOZJ-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-47" value="&lt;font style=&quot;font-size: 10px&quot;&gt;getBean(beanName)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="2101" y="6230" width="159" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-53" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;curved=1;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-49" target="dxBHXkDJcLthnHCvqOZJ-52" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-49" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;doGetBean&lt;/b&gt;(name, null, null, false)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="2300" y="6230" width="159" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-51" value="AbstractBeanFactory" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="2329.5" y="6210" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-55" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;curved=1;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-52" target="dxBHXkDJcLthnHCvqOZJ-54" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-52" value="&lt;span&gt;beanName = transformedBeanName(name)&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;如果name是工厂Bean Name, 去掉前面的&quot;&amp;amp;&quot;, 如果是别名，从aliasMap获取真实的名字&lt;/font&gt;&lt;br&gt;&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2501" y="6230" width="219" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-57" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-54" target="dxBHXkDJcLthnHCvqOZJ-56" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-59" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-54" target="dxBHXkDJcLthnHCvqOZJ-58" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-54" value="&lt;font&gt;Object sharedInstance = getSingleton(beanName);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;按beanName尝试获取单例Bean&lt;br&gt;如果beanName指向的Bean是FactoryBean, 获取的就是FacotryBean的Bean实例&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2500" y="6290" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-76" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-56" target="dxBHXkDJcLthnHCvqOZJ-75" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-56" value="&lt;font&gt;Object singletonObject = this.&lt;b&gt;singletonObjects&lt;/b&gt;.get(beanName)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2780" y="6300" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-61" value="Y，sharedInstance不为空" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-58" target="dxBHXkDJcLthnHCvqOZJ-62" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2780" y="6630" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-64" value="N，sharedInstance为空&lt;br&gt;即之前没有尝试过创建Bean" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-58" target="dxBHXkDJcLthnHCvqOZJ-63" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-66" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-58" target="dxBHXkDJcLthnHCvqOZJ-65" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-58" value="&lt;font style=&quot;font-size: 8px&quot;&gt;sharedInstance != null &lt;br&gt;&amp;amp;&amp;amp; args == null&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;args指构造器传参&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=10;" parent="1" vertex="1">
          <mxGeometry x="2560.5" y="6629" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-99" value="如果是工厂Bean" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-62" target="dxBHXkDJcLthnHCvqOZJ-98" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-62" value="&lt;font&gt;bean = &lt;b&gt;getObjectForBeanInstance&lt;/b&gt;(sharedInstance, name, beanName, null)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;如果sharedInstance是FactoryBean需要调用工厂方法创建Bean并返回，如果不是工厂Bean就直接返回sharedInstance&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2780" y="6600" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-24" value="&lt;font style=&quot;font-size: 8px&quot;&gt;没有parentBeanFactory&amp;nbsp;|| 当前beanFactory包含此Bean定义&lt;br&gt;&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-63" target="fxcZrqCvbWanZoaIqKKB-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-63" value="&lt;font style=&quot;font-size: 8px&quot;&gt;是否存在父BeanFactory&lt;br&gt;且当前BeanFactory没有此beanName指定的BeanDefinition, 就交给父BeanFactory创建&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2780" y="6680" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-68" value="N" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-65" target="dxBHXkDJcLthnHCvqOZJ-67" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-103" value="Y" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-65" target="dxBHXkDJcLthnHCvqOZJ-102" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-65" value="&lt;font style=&quot;font-size: 8px&quot;&gt;requiredType != null &amp;amp;&amp;amp; !requiredType.isInstance(bean)&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=10;" parent="1" vertex="1">
          <mxGeometry x="2530" y="7280" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-67" value="&lt;font&gt;return (T) bean;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2560" y="7381" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-70" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;下面这块逻辑主要是为了解决循环依赖：&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;singletonObjects：被称作一级缓存&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;earlySingletonObjects：被称作二级缓存，存储&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;singletonFactories： 被称作三级缓存&lt;/span&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="2780" y="6230" width="380" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-78" value="Y" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-75" target="dxBHXkDJcLthnHCvqOZJ-77" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-80" value="N, 返回一级缓存中的完整态的bean" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-75" target="dxBHXkDJcLthnHCvqOZJ-79" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-75" value="&lt;font style=&quot;font-size: 8px&quot;&gt;singletonObject == null &amp;amp;&amp;amp; isSingletonCurrentlyInCreation(beanName)&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=6;" parent="1" vertex="1">
          <mxGeometry x="2780" y="6360" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-82" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-77" target="dxBHXkDJcLthnHCvqOZJ-81" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-77" value="&lt;font style=&quot;font-size: 9px&quot;&gt;singletonObject = this.&lt;b&gt;earlySingletonObjects&lt;/b&gt;.get(beanName)&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=16;" parent="1" vertex="1">
          <mxGeometry x="3040" y="6370" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-97" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-79" target="dxBHXkDJcLthnHCvqOZJ-54" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2760" y="6560" />
              <mxPoint x="2760" y="6335" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-79" value="return singletonObject;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=10;" parent="1" vertex="1">
          <mxGeometry x="2830" y="6540" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-83" value="N, 返回二级缓存中的纯洁态的bean" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-81" target="dxBHXkDJcLthnHCvqOZJ-79" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3140" y="6500" />
              <mxPoint x="2890" y="6500" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-85" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-81" target="dxBHXkDJcLthnHCvqOZJ-84" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-81" value="&lt;font style=&quot;font-size: 8px&quot;&gt;singletonObject == null &lt;br&gt;&amp;amp;&amp;amp; allowEarlyReference&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=16;" parent="1" vertex="1">
          <mxGeometry x="3060" y="6430" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-87" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-84" target="dxBHXkDJcLthnHCvqOZJ-86" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-84" value="&lt;font size=&quot;1&quot;&gt;ObjectFactory&amp;lt;?&amp;gt; singletonFactory = this.&lt;b&gt;singletonFactories&lt;/b&gt;.get(beanName)&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=16;" parent="1" vertex="1">
          <mxGeometry x="3259.5" y="6435" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-92" value="Y" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-86" target="dxBHXkDJcLthnHCvqOZJ-91" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-93" value="N, 返回null" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-86" target="dxBHXkDJcLthnHCvqOZJ-79" edge="1">
          <mxGeometry x="-0.229" y="-10" relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3360" y="6580" />
              <mxPoint x="3140" y="6580" />
              <mxPoint x="3140" y="6520" />
              <mxPoint x="2890" y="6520" />
            </Array>
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-86" value="singletonFactory != null" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=10;" parent="1" vertex="1">
          <mxGeometry x="3299.5" y="6500" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-96" value="返回三级缓存的早期包装对象创建的纯洁态的bean" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-91" target="dxBHXkDJcLthnHCvqOZJ-79" edge="1">
          <mxGeometry x="-0.6098" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-91" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;singletonObject = singletonFactory.getObject();&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;this.&lt;b&gt;earlySingletonObjects&lt;/b&gt;.put(beanName, singletonObject);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&gt;&lt;font size=&quot;1&quot;&gt;this.&lt;b&gt;singletonFactories&lt;/b&gt;.remove(beanName)&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;使用三级缓存的早期包装对象创建的纯洁态的bean并存入二级缓存&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=16;align=left;" parent="1" vertex="1">
          <mxGeometry x="3480" y="6500" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-101" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="dxBHXkDJcLthnHCvqOZJ-98" target="dxBHXkDJcLthnHCvqOZJ-100" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-98" value="&lt;font&gt;&lt;div&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;FactoryBean&amp;lt;?&amp;gt; factory = (FactoryBean&amp;lt;?&amp;gt;) beanInstance;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;mbd = getMergedLocalBeanDefinition(beanName);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;boolean synthetic = (mbd != null &amp;amp;&amp;amp; mbd.isSynthetic());&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;object = getObjectFromFactoryBean(factory, beanName, !synthetic);&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="3140" y="6600" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-100" value="&lt;font color=&quot;#007fff&quot;&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;TODO&amp;nbsp; 工厂Bean创建Bean流程&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3440" y="6610" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-102" value="&lt;font&gt;Bean数据类型转换，没有指定的话就用默认的SimpleTypeConverter&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2740" y="7290" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dxBHXkDJcLthnHCvqOZJ-104" value="参考官网：3.5. Spring Type Conversion&lt;br&gt;类型转换的使用案例：https://www.jianshu.com/p/0a484d887b75" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="2740" y="7330" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-1" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;上一步结果：&lt;br&gt;１）完整态Bean &lt;br&gt;注意：可能是FactoryBean所以需要额外处理；&lt;br&gt;２）两种半成品Bean&lt;br&gt;３）null&lt;br&gt;&lt;/span&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="2430" y="6629" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;curved=1;" parent="1" source="fxcZrqCvbWanZoaIqKKB-4" target="fxcZrqCvbWanZoaIqKKB-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2870" y="6800" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-4" value="&lt;font&gt;RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2760" y="6820" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" parent="1" source="fxcZrqCvbWanZoaIqKKB-9" target="fxcZrqCvbWanZoaIqKKB-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;" parent="1" source="fxcZrqCvbWanZoaIqKKB-9" target="fxcZrqCvbWanZoaIqKKB-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-9" value="dependsOn = mbd.getDependsOn();&lt;br&gt;dependsOn &lt;br&gt;!= null ?" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="2800" y="6880" width="140" height="70" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-16" value="&lt;font color=&quot;#007fff&quot;&gt;单例&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;" parent="1" source="fxcZrqCvbWanZoaIqKKB-11" target="fxcZrqCvbWanZoaIqKKB-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-18" value="原型" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontColor=#007FFF;curved=1;" parent="1" source="fxcZrqCvbWanZoaIqKKB-11" target="fxcZrqCvbWanZoaIqKKB-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-20" value="其他" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontColor=#007FFF;" parent="1" source="fxcZrqCvbWanZoaIqKKB-11" target="fxcZrqCvbWanZoaIqKKB-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-11" value="mbd&lt;br&gt;.isSingleton()?" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="1" vertex="1">
          <mxGeometry x="2810" y="7080" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-29" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="fxcZrqCvbWanZoaIqKKB-13" target="fxcZrqCvbWanZoaIqKKB-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-13" value="&lt;font&gt;dependsOn = mbd.&lt;b&gt;getDependsOn&lt;/b&gt;()&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="3000" y="6895" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-35" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;" parent="1" source="fxcZrqCvbWanZoaIqKKB-15" target="fxcZrqCvbWanZoaIqKKB-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-15" target="fxcZrqCvbWanZoaIqKKB-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-15" value="&lt;font&gt;sharedInstance = getSingleton(beanName, singletonFactory)&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;创建单例Bean其实就是通过临时用lambda创建的单例工厂创建的&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="3000" y="7014" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-17" value="&lt;font&gt;dependsOn = mbd.getDependsOn()&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="3010" y="7170" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-19" value="&lt;font&gt;dependsOn = mbd.getDependsOn()&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="3010" y="7250" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="fxcZrqCvbWanZoaIqKKB-22" target="fxcZrqCvbWanZoaIqKKB-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-25" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontColor=#007FFF;" parent="1" source="fxcZrqCvbWanZoaIqKKB-22" target="fxcZrqCvbWanZoaIqKKB-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-22" value="&lt;font&gt;markBeanAsCreated(beanName)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2780" y="6760" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-23" value="&lt;font&gt;&lt;div&gt;clearMergedBeanDefinition(beanName);&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/span&gt;this.alreadyCreated.add(beanName);&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="3000" y="6760" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-26" value="交给父BeanFactory处理和下面流程一样" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="2960" y="6689" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-28" value="&lt;font&gt;for (String dep : dependsOn):&lt;br&gt;registerDependentBean(dep, beanName);&lt;br&gt;&lt;b&gt;getBean&lt;/b&gt;(dep);&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="2980" y="6950" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-30" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="3219.62" y="6895" width="20" height="95" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-32" value="&lt;div&gt;如果有依赖先处理依赖的Bean的创建&lt;/div&gt;&lt;div&gt;是个递归操作&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="3239.62" y="6927.5" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-36" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;dashed=1;strokeColor=#00CC66;" parent="1" source="fxcZrqCvbWanZoaIqKKB-34" target="dxBHXkDJcLthnHCvqOZJ-62" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3210" y="7080" />
              <mxPoint x="3210" y="6660" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-34" value="&lt;font&gt;getObjectForBeanInstance(sharedInstance, name, beanName, mbd)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3000" y="7080" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-40" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-37" target="fxcZrqCvbWanZoaIqKKB-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-37" value="&lt;font style=&quot;font-size: 8px&quot;&gt;1. 查询一级缓存singletonObjects是否已经存在此Bean&lt;br&gt;2.&amp;nbsp;beforeSingletonCreation(beanName)&lt;br&gt;3.&amp;nbsp;singletonObject = &lt;b&gt;singletonFactory.getObject&lt;/b&gt;()&amp;nbsp;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;//通过lambda单例工厂创建Bean&lt;br&gt;4.&amp;nbsp;afterSingletonCreation(beanName)&lt;br&gt;5.&amp;nbsp;addSingleton(beanName, singletonObject)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=8;" parent="1" vertex="1">
          <mxGeometry x="3240" y="7006" width="320" height="66" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-42" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-39" target="fxcZrqCvbWanZoaIqKKB-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-39" value="&lt;font&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;其中第３步&lt;/span&gt;&lt;br&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;createBean&lt;/b&gt;(beanName, mbd, args)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3602" y="7022" width="168" height="34" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-44" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-41" target="fxcZrqCvbWanZoaIqKKB-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-41" value="&lt;font&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;先是为mbd创建了个副本mbdToUse&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="3800" y="7022" width="180" height="34" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-46" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-43" target="fxcZrqCvbWanZoaIqKKB-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-43" value="&lt;font&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;mbdToUse.prepareMethodOverrides();&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="3800" y="7072" width="180" height="34" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-48" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-45" target="fxcZrqCvbWanZoaIqKKB-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-50" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-45" target="fxcZrqCvbWanZoaIqKKB-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-45" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;Object bean = &lt;b&gt;resolveBeforeInstantiation&lt;/b&gt;(&lt;br&gt;beanName, mbdToUse);&lt;br&gt;&lt;/font&gt;if (bean != null) return bean;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="3790" y="7130" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-59" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-47" target="fxcZrqCvbWanZoaIqKKB-58" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-47" value="&lt;font&gt;Object beanInstance = &lt;b&gt;doCreateBean&lt;/b&gt;(&lt;br&gt;beanName, mbdToUse, args);&lt;br&gt;return beanInstance&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;Bean生命周期控制&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="3790" y="7395" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-52" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-49" target="fxcZrqCvbWanZoaIqKKB-51" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-54" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-49" target="fxcZrqCvbWanZoaIqKKB-53" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-49" value="&lt;font&gt;bean = applyBeanPostProcessorsBeforeInstantiation(&lt;br&gt;targetType, beanName)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4040" y="7130" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-57" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-51" target="fxcZrqCvbWanZoaIqKKB-56" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-51" value="&lt;font&gt;if (bean != null):&amp;nbsp;&lt;br&gt;bean = applyBeanPostProcessorsAfterInitialization(&lt;br&gt;bean, beanName);&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4040" y="7190" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-53" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;执行所有InstantiationAwareBeanPostProcessor类型后置处理器的&amp;nbsp;&lt;b&gt;postProcessBeforeInstantiation&lt;/b&gt;(beanClass, beanName) 方法&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4300" y="7125" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-55" value="Spring内置的后置处理器只有&lt;br&gt;ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor有实现" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="4520" y="7135" width="340" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-56" value="&lt;font&gt;执行所有后置处理器的&lt;br&gt;&lt;b&gt;postProcessAfterInitialization&lt;/b&gt;(result, beanName)&lt;br&gt;方法&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4300" y="7190" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-70" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;curved=1;" parent="1" source="fxcZrqCvbWanZoaIqKKB-58" target="fxcZrqCvbWanZoaIqKKB-62" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-71" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-58" target="fxcZrqCvbWanZoaIqKKB-64" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-72" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-58" target="fxcZrqCvbWanZoaIqKKB-66" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-73" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-58" target="fxcZrqCvbWanZoaIqKKB-68" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-74" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-58" target="fxcZrqCvbWanZoaIqKKB-60" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-85" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-58" target="fxcZrqCvbWanZoaIqKKB-84" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-58" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;instanceWrapper = &lt;b&gt;createBeanInstance&lt;/b&gt;(beanName, mbd, args);&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;根据BeanDefinition配置有５种获取Bean的方式&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4040" y="7400" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-60" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;return obtainFromSupplier(instanceSupplier, beanName)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4300" y="7280" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-62" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;return instantiateUsingFactoryMethod(beanName, mbd, args)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4300" y="7340" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-64" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;return autowireConstructor(beanName, mbd, null, null)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4300" y="7400" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-66" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;return autowireConstructor(beanName, mbd, ctors, args);&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4300" y="7460" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-76" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-68" target="fxcZrqCvbWanZoaIqKKB-75" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-68" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;return instantiateBean(beanName, mbd);&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4300" y="7520" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-78" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-75" target="fxcZrqCvbWanZoaIqKKB-77" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-80" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-75" target="fxcZrqCvbWanZoaIqKKB-79" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-83" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-75" target="fxcZrqCvbWanZoaIqKKB-81" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-75" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;beanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent);&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4560" y="7520" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-77" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;BeanWrapper bw = new BeanWrapperImpl(beanInstance);&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;/span&gt;initBeanWrapper(bw);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;包装了类型转换器，属性编辑器？&lt;/font&gt;&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4560" y="7619" width="220" height="51" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-82" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-79" target="fxcZrqCvbWanZoaIqKKB-81" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-79" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;BeanUtils.instantiateClass(constructorToUse)&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;通过反射调用构造方法创建&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4820" y="7520" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-81" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;instantiateWithMethodInjection(bd, beanName, owner)&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;如果Bean定义有方法重写（methodOverrides成员不为空&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;），通过CGLib创建代理对象&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4820" y="7579" width="220" height="51" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-87" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-84" target="fxcZrqCvbWanZoaIqKKB-86" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-84" value="&lt;font style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;if (earlySingletonExposure)&lt;br&gt;&lt;/font&gt;&lt;b&gt;addSingletonFactory&lt;/b&gt;(beanName, () -&amp;gt; getEarlyBeanReference(beanName, mbd, bean));&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="4040" y="7680" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-89" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-86" target="fxcZrqCvbWanZoaIqKKB-88" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-97" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-86" target="fxcZrqCvbWanZoaIqKKB-96" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-86" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;Object exposedObject = bean;&lt;br&gt;&lt;/font&gt;&lt;b&gt;populateBean&lt;/b&gt;(beanName, mbd, instanceWrapper);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;属性填充&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4060" y="7760" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-91" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-88" target="fxcZrqCvbWanZoaIqKKB-90" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-114" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-88" target="fxcZrqCvbWanZoaIqKKB-113" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-88" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;exposedObject = &lt;b&gt;initializeBean&lt;/b&gt;(beanName, exposedObject, mbd)&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;执行初始化方法&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4060" y="8030" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-93" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-90" target="fxcZrqCvbWanZoaIqKKB-92" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-90" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;if (earlySingletonExposure)&amp;nbsp;&lt;br&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="4060" y="8500" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-95" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-92" target="fxcZrqCvbWanZoaIqKKB-94" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-44" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="fxcZrqCvbWanZoaIqKKB-92" target="FClDIIbTZ8RpvBB4YRfq-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-92" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;registerDisposableBeanIfNecessary(&lt;br&gt;beanName, bean, mbd);&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;有些Bean销毁时需要执行销毁方法&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;释放资源,这里将要执行销毁方法的Bean注册到disposableBeans Map容器&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4060" y="8580" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-94" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;return exposedObject;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4060" y="8700" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-100" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-96" target="fxcZrqCvbWanZoaIqKKB-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-96" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;先执行所有&lt;b&gt;InstantiationAwareBeanPostProcessor&lt;/b&gt;类型后置处理器的&lt;b&gt;postProcessAfterInstantiation&lt;/b&gt;()&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;内置的后置处理器此方法里面啥都没做，留给子类拓展&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="4300" y="7755" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-103" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-99" target="fxcZrqCvbWanZoaIqKKB-102" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-106" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-99" target="fxcZrqCvbWanZoaIqKKB-104" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-108" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-99" target="fxcZrqCvbWanZoaIqKKB-107" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-99" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;@Autowired字段注入处理&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4300" y="7840" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-102" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;autowireByName(beanName, mbd, bw, newPvs)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4560" y="7810" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-104" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;autowireByType(beanName, mbd, bw, newPvs)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4560" y="7870" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-110" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-107" target="fxcZrqCvbWanZoaIqKKB-109" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-107" value="&lt;font size=&quot;1&quot;&gt;&lt;div&gt;执行所有InstantiationAwareBeanPostProcessor类型后置处理器的&lt;b&gt;postProcessPropertyValues&lt;/b&gt;()&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4300" y="7920" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-112" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-109" target="fxcZrqCvbWanZoaIqKKB-111" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-109" value="&lt;font size=&quot;1&quot;&gt;applyPropertyValues(beanName, mbd, bw, pvs);&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4300" y="7980" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-111" value="&lt;font size=&quot;1&quot;&gt;bw.setPropertyValues(...);&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4560" y="7980" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-116" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-113" target="fxcZrqCvbWanZoaIqKKB-115" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-120" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-113" target="fxcZrqCvbWanZoaIqKKB-119" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-113" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;invokeAwareMethods(beanName, bean)&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;执行Aware接口方法&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4320" y="8035" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-126" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-115" target="fxcZrqCvbWanZoaIqKKB-125" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-129" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-115" target="fxcZrqCvbWanZoaIqKKB-128" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-115" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;执行所有&lt;b&gt;BeanPostProcessor&lt;/b&gt;类型后置处理器的&lt;b&gt;postProcessBeforeInitialization&lt;/b&gt;()&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4320" y="8235" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-117" value="InstantiationAwareBeanPostProcessor？　到底做什么的？" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="4525" y="7755" width="250" height="20" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-118" value="＠PropertySource" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="4525" y="7930" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-122" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-119" target="fxcZrqCvbWanZoaIqKKB-121" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-119" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;((BeanNameAware) bean).setBeanName(beanName)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4560" y="8035" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-124" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-121" target="fxcZrqCvbWanZoaIqKKB-123" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-121" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;((BeanClassLoaderAware) bean).setBeanClassLoader(bcl)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4560" y="8100" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-123" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;((BeanFactoryAware) bean).setBeanFactory(&lt;br&gt;AbstractAutowireCapableBeanFactory.this)&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4540" y="8160" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-134" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-125" target="fxcZrqCvbWanZoaIqKKB-133" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-138" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-125" target="fxcZrqCvbWanZoaIqKKB-137" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-125" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;invokeInitMethods(beanName, wrappedBean, mbd);&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4320" y="8320" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-131" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-128" target="fxcZrqCvbWanZoaIqKKB-130" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-128" value="&lt;font style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;Spring内置后置处理器的&lt;b&gt;postProcessBeforeInitialization&lt;/b&gt;都做了啥&lt;br&gt;&lt;/font&gt;&lt;div&gt;0 = {ApplicationContextAwareProcessor@2474}&amp;nbsp;&lt;/div&gt;&lt;div&gt;1 = {ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor@2050}&amp;nbsp;&lt;/div&gt;&lt;div&gt;2 = {PostProcessorRegistrationDelegate$BeanPostProcessorChecker@2535}&amp;nbsp;&lt;/div&gt;&lt;div&gt;3 = {CommonAnnotationBeanPostProcessor@2091}&amp;nbsp;&lt;/div&gt;&lt;div&gt;4 = {AutowiredAnnotationBeanPostProcessor@1994}&amp;nbsp;&lt;/div&gt;&lt;div&gt;5 = {RequiredAnnotationBeanPostProcessor@2157}&amp;nbsp;&lt;/div&gt;&lt;div&gt;6 = {ApplicationListenerDetector@2578}&amp;nbsp;&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4560" y="8220" width="300" height="80" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-130" value="&lt;span style=&quot;font-size: 8px&quot;&gt;todo&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4900" y="8240" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-136" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-133" target="fxcZrqCvbWanZoaIqKKB-135" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-133" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;InitializingBean:&lt;br&gt;&lt;/font&gt;((InitializingBean)bean).afterPropertiesSet()&lt;br&gt;&lt;font style=&quot;font-size: 8px&quot; color=&quot;#007fff&quot;&gt;实现了InitializingBean接口就调用afterPropertiesSet()&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4560" y="8320" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-135" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;String initMethodName = mbd.getInitMethodName();&lt;br&gt;&lt;/font&gt;invokeCustomInitMethod(beanName, bean, mbd);&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;通过XML或注解指定了init-method方法，就执行指定的方法&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4540" y="8380" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-137" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;执行所有&lt;b&gt;BeanPostProcessor&lt;/b&gt;类型后置处理器的&lt;b&gt;postProcessAfterInitialization&lt;/b&gt;()&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4320" y="8440" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-139" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="fxcZrqCvbWanZoaIqKKB-140" target="fxcZrqCvbWanZoaIqKKB-141" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-140" value="&lt;font style=&quot;font-size: 10px&quot;&gt;Object singletonInstance = &lt;b&gt;getSingleton&lt;/b&gt;(beanName)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1879.75" y="6320" width="199" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-145" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-141" target="fxcZrqCvbWanZoaIqKKB-144" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-141" value="&lt;font style=&quot;font-size: 9px&quot;&gt;if (singletonInstance instanceof SmartInitializingSingleton)&lt;br&gt;smartSingleton.&lt;b&gt;afterSingletonsInstantiated&lt;/b&gt;()&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1859.25" y="6380" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-144" value="实现此接口的默认Bean及回调作用：&lt;br&gt;&lt;b&gt;EventListenerMethodProcessor&lt;/b&gt; (主流程中只看到这一个，实现此接口的有好几个)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;扫描所有Bean查找@EventListener注解的方法创建监听器并加入监听列表&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;" parent="1" vertex="1">
          <mxGeometry x="2140" y="6370" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-149" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-146" target="fxcZrqCvbWanZoaIqKKB-148" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-146" value="clearResourceCaches()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;清除上下文资源缓存&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="840" y="6520" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-153" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-148" target="fxcZrqCvbWanZoaIqKKB-151" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-159" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-148" target="fxcZrqCvbWanZoaIqKKB-158" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-148" value="initLifecycleProcessor()&lt;br&gt;&lt;font style=&quot;font-size: 9px&quot; color=&quot;#007fff&quot;&gt;初始化上下文生命周期处理器&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="840" y="6580" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-155" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-151" target="fxcZrqCvbWanZoaIqKKB-152" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-162" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-151" target="fxcZrqCvbWanZoaIqKKB-161" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-151" value="getLifecycleProcessor()&lt;br&gt;.onRefresh()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="841" y="6639" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-157" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-152" target="fxcZrqCvbWanZoaIqKKB-156" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-167" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-152" target="fxcZrqCvbWanZoaIqKKB-166" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-152" value="publishEvent(new ContextRefreshedEvent(this))&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;发布ContextRefreshedEvent事件&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="820" y="6700" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-156" value="LiveBeansView&lt;br&gt;.registerApplicationContext(this)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;JMX Bean监控相关&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="820" y="6760" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-158" value="查看BeanFacotry中有没有lifecycleProcessor的Bean，没有就默认创建&lt;b&gt;DefaultLifecycleProcessor&lt;/b&gt;，并注册为单例" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1021" y="6580" width="199" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-161" value="&lt;div&gt;startBeans(true);&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;this.running = true;&lt;br&gt;&lt;font style=&quot;font-size: 8px&quot; color=&quot;#007fff&quot;&gt;按类型查找实现了Lifecycle接口的Bean执行start()方法&lt;/font&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1020" y="6640" width="198" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-169" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-166" target="fxcZrqCvbWanZoaIqKKB-168" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-171" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;strokeColor=#000000;" parent="1" source="fxcZrqCvbWanZoaIqKKB-166" target="fxcZrqCvbWanZoaIqKKB-170" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-166" value="getApplicationEventMulticaster()&lt;br&gt;.multicastEvent(applicationEvent, eventType);" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1020" y="6700" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-168" value="if (this.parent != null)&lt;br&gt;this.parent.publishEvent(event)&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 8px&quot;&gt;父BeanFactory不为空的话给父BeanFactory也发布一下事件，处理都一样&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1020" y="6760" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-170" value="for (getApplicationListeners(event, type)):&amp;nbsp;&lt;br&gt;&lt;b&gt;invokeListener&lt;/b&gt;(listener, event)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;查找ContextRefreshedEvent的监听器执行监听回调&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1260" y="6695" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-172" value="SimpleApplicationEventMulticaster" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1290" y="6675" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-174" value="这些内容测试Demo中都没涉及，&lt;br&gt;可以看SpringBoot源码，看这些都是怎么用的" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="620" y="6565" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-175" value="&lt;font style=&quot;font-size: 10px&quot;&gt;BeanFactoryPostProcessor是针对BeanDefinition的&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="260" y="3040" width="240" height="20" as="geometry" />
        </mxCell>
        <mxCell id="fxcZrqCvbWanZoaIqKKB-176" value="&lt;font style=&quot;font-size: 10px&quot;&gt;BeanPostProcessor是针对Bean的&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="335" y="4710" width="170" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;curved=1;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-1" target="FClDIIbTZ8RpvBB4YRfq-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-1" value="context.close()&lt;br&gt;&lt;span style=&quot;color: rgb(0 , 127 , 255)&quot;&gt;Spring中主动关闭的方法&lt;/span&gt;&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;5.0之前是方法名是destory()&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="40" y="7200" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;curved=1;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-3" target="FClDIIbTZ8RpvBB4YRfq-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-3" value="registerShutdownHook()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;如果是外部通过信号关闭，&lt;br&gt;走这里注册的关闭钩子&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="40" y="7319" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-4" target="FClDIIbTZ8RpvBB4YRfq-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-12" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;dashed=1;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-4" target="FClDIIbTZ8RpvBB4YRfq-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-4" value="&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;this.shutdownHook = new Thread() {&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&amp;nbsp; &amp;nbsp; @Override&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&amp;nbsp; &amp;nbsp; public void run() {&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; synchronized (startupShutdownMonitor) {&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;b&gt;doClose&lt;/b&gt;();&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&amp;nbsp; &amp;nbsp; }&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;};&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=5;" parent="1" vertex="1">
          <mxGeometry x="280" y="7299" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-6" value="&lt;div&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;Runtime.getRuntime()&lt;br&gt;.addShutdownHook(this.shutdownHook)&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="280" y="7401" width="200" height="39" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-11" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;dashed=1;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-8" target="FClDIIbTZ8RpvBB4YRfq-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-8" value="&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;div&gt;synchronized (this.startupShutdownMonitor) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; doClose();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; ...&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; Runtime.getRuntime().removeShutdownHook(&lt;br&gt;this.shutdownHook);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=5;" parent="1" vertex="1">
          <mxGeometry x="280" y="7180" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-14" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-10" target="FClDIIbTZ8RpvBB4YRfq-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-10" value="&lt;div&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;doClose()&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="520" y="7260" width="80" height="39" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-16" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-13" target="FClDIIbTZ8RpvBB4YRfq-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-13" value="并发条件判断防止重复执行close&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;active=true &amp;amp;&amp;amp; CAS 成功将 closed 从false设置为true&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="640" y="7260" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-18" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-15" target="FClDIIbTZ8RpvBB4YRfq-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-15" value="LiveBeansView&lt;br&gt;.unregisterApplicationContext(this)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;JMX Bean监控注销 &lt;/font&gt;&lt;font color=&quot;#cc0066&quot;&gt;TODO&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="640" y="7320" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-20" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-17" target="FClDIIbTZ8RpvBB4YRfq-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-31" value="Listener" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;dashed=1;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-17" target="FClDIIbTZ8RpvBB4YRfq-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-17" value="publishEvent(new ContextClosedEvent(this))&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;发布应用上下文关闭事件&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="640" y="7380" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-22" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-19" target="FClDIIbTZ8RpvBB4YRfq-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-34" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#CC0066;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-19" target="FClDIIbTZ8RpvBB4YRfq-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-19" value="this.&lt;b&gt;lifecycleProcessor&lt;/b&gt;.onClose()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;还有个重要方法onRefresh() 用于执行Lifecycle Bean 的 start() &lt;/font&gt;&lt;font color=&quot;#ff3333&quot;&gt;TODO&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="640" y="7440" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-24" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-21" target="FClDIIbTZ8RpvBB4YRfq-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-30" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-21" target="6rV152aQ6CwPY-n9f6bI-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-21" value="destroyBeans()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;销毁BeanFactory缓存的所有Bean&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="641" y="7880" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-26" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-23" target="FClDIIbTZ8RpvBB4YRfq-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-39" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-23" target="6rV152aQ6CwPY-n9f6bI-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-23" value="closeBeanFactory()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="640" y="8061" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-28" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-25" target="FClDIIbTZ8RpvBB4YRfq-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-25" value="onClose()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;Spring中此方法为空&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="640" y="8120" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-27" value="this.active.set(false)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="640" y="8181" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-29" value="通过JMX来实时查看Spring放在&lt;br&gt;application context里的bean列表" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="801" y="7324.5" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-30" value="&lt;font style=&quot;font-size: 9px&quot;&gt;Spring中并没有此事件的默认注册的监听器，&lt;font color=&quot;#cc0066&quot;&gt;TODO SpringBoot中呢？&lt;/font&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="880" y="7379" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-36" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#CC0066;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-33" target="FClDIIbTZ8RpvBB4YRfq-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-33" value="stopBeans()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="879" y="7440" width="81" height="39" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-38" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#CC0066;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-35" target="FClDIIbTZ8RpvBB4YRfq-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-40" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-35" target="FClDIIbTZ8RpvBB4YRfq-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-35" value="Map&amp;lt;String, Lifecycle&amp;gt;&amp;nbsp;lifecycleBeans&lt;br&gt;&amp;nbsp;= getLifecycleBeans()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;即查找所有Lifecycle类型的Bean&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1000" y="7440" width="200" height="39" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-37" value="beanNames = beanFactory.getBeanNamesForType(&lt;br&gt;&lt;b&gt;Lifecycle&lt;/b&gt;.class, false, false)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1240" y="7440" width="199" height="39" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-39" target="6rV152aQ6CwPY-n9f6bI-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-39" value="Map&amp;lt;Integer, LifecycleGroup&amp;gt; &lt;b&gt;phases&lt;/b&gt; = new HashMap&amp;lt;&amp;gt;();&lt;br&gt;phases.put(shutdownOrder, group);&lt;br&gt;group.add(beanName, bean);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;按 Phased 接口定义的关闭顺序对Lifecycle Bean分组(分组 LifeGroup不存在则创建)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1000" y="7500" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#007FFF;curved=1;" parent="1" source="6rV152aQ6CwPY-n9f6bI-3" target="6rV152aQ6CwPY-n9f6bI-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1220" y="7629" />
              <mxPoint x="1220" y="7541" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-3" value="keys.sort(Collections.reverseOrder());&lt;br&gt;for keys :&lt;br&gt;phases.get(key).stop()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;对分组按关闭顺序&lt;b&gt;倒序排序&lt;/b&gt;，然后依次执行&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 127 , 255)&quot;&gt;LifecycleGroup&amp;nbsp;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;stop() 方法&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1000" y="7599" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-5" target="6rV152aQ6CwPY-n9f6bI-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-5" value="this.members.sort(&lt;br&gt;Collections.reverseOrder())" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1240" y="7520" width="200" height="41" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-7" target="6rV152aQ6CwPY-n9f6bI-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-7" value="&lt;font style=&quot;font-size: 10px&quot;&gt;CountDownLatch latch = new CountDownLatch(this.smartMemberCount)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;仅用于SmartLifecycle&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1230.5" y="7581.5" width="219" height="41" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-9" value="&lt;font style=&quot;font-size: 10px&quot;&gt;latch.await(this.timeout, TimeUnit.MILLISECONDS)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;等待这个LifecycleGroup中所有SmartLifecycle Bean stop()执行完毕&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1240" y="7732.5" width="200" height="49" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-11" target="6rV152aQ6CwPY-n9f6bI-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-11" target="6rV152aQ6CwPY-n9f6bI-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-11" value="&lt;font&gt;for (LifecycleGroupMember member : this.members):&amp;nbsp;&lt;br&gt;&lt;b&gt;doStop&lt;/b&gt;(this.lifecycleBeans, member.name, latch, countDownBeanNames)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1230.5" y="7651.5" width="219" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-14" target="6rV152aQ6CwPY-n9f6bI-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-14" value="&lt;font&gt;String[] dependentBeans = getBeanFactory()&lt;br&gt;.getDependentBeans(beanName)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1478.5" y="7661.5" width="219" height="40" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-18" value="递归调用" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-16" target="6rV152aQ6CwPY-n9f6bI-14" edge="1">
          <mxGeometry x="-0.2514" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-16" value="&lt;font&gt;&lt;div&gt;for dependentBeans:&lt;/div&gt;&lt;div&gt;&lt;b&gt;doStop&lt;/b&gt;(lifecycleBeans, dependentBean, latch, countDownBeanNames)&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1478.75" y="7791.5" width="219" height="40" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-19" value="&lt;font&gt;((SmartLifecycle) bean).stop(() -&amp;gt; {...});&lt;br&gt;或&lt;br&gt;bean.stop();&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1720" y="7719.25" width="219" height="40" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-25" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-23" target="6rV152aQ6CwPY-n9f6bI-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-26" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-23" target="6rV152aQ6CwPY-n9f6bI-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-23" value="dependentBeans&lt;br&gt;不为空？" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1539" y="7717" width="100" height="44.5" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-27" value="总结：&lt;br&gt;&lt;div&gt;获取所有&lt;b&gt;Lifecycle&lt;/b&gt; Bean&amp;nbsp;&lt;/div&gt;按关闭顺序分组，然后倒序一组一组地执行stop()处理，如果LifecycleBean 有依赖其他 LifecycleBean 则递归先执行依赖的LifecycleBean的关闭&lt;br&gt;&lt;br&gt;&lt;b&gt;Lifecycle&lt;/b&gt;是一个接口，可以&lt;b&gt;在所有的bean都创建完成(getBean)之后执行自己的初始化工作&lt;/b&gt;，或者在退出时执行资源销毁工作。&lt;br&gt;&lt;b&gt;SmartLifecycle&lt;/b&gt;继承自Lifecycle，提供了更丰富的功能：第一，start()方法无需容器显式调用就可以被执行(配置isAutoStartup()返回true)；第二，可以控制多SmartLifecycle实例的执行顺序。（Lifecycle Bean也可以通过额外实现Phased接口控制执行顺序）&lt;br&gt;&lt;br&gt;Phased getPhase() 返回值越大，越先执行" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="730" y="7492" width="250" height="208" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-28" value="&lt;font color=&quot;#007fff&quot;&gt;Linux信号 -&amp;gt; Linux 进程信号监听回调 -&amp;gt;&lt;br&gt;JNI回调Java关闭钩子&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#FF3333;" parent="1" vertex="1">
          <mxGeometry x="40" y="7365" width="200" height="35" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-32" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-29" target="6rV152aQ6CwPY-n9f6bI-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-29" value="getBeanFactory()&lt;br&gt;.destroySingletons()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="840" y="7880" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-35" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-31" target="6rV152aQ6CwPY-n9f6bI-34" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-41" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-31" target="6rV152aQ6CwPY-n9f6bI-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-31" value="super.&lt;b&gt;destroySingletons&lt;/b&gt;()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;以线程安全的方式，先遍历执行实现了 Disposable 接口的Bean销毁方法，最后清空Bean容器&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1039" y="7870" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-33" value="DefaultListableBeanFactory" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="1049" y="7850" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-37" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-34" target="6rV152aQ6CwPY-n9f6bI-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-34" value="this.&lt;b&gt;manualSingletonNames&lt;/b&gt;&lt;br&gt;.clear()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1039" y="7950" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-36" value="&lt;b&gt;clearByTypeCache&lt;/b&gt;();" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1039" y="8081" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-38" value="this.beanFactory&lt;br&gt;.setSerializationId(null)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="841" y="8061" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-45" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-40" target="6rV152aQ6CwPY-n9f6bI-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-51" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-40" target="6rV152aQ6CwPY-n9f6bI-50" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-40" value="disposableBeanNames = StringUtils.toStringArray(&lt;br&gt;this.&lt;b&gt;disposableBeans&lt;/b&gt;.keySet())&lt;br&gt;for disposableBeanNames:&amp;nbsp;&lt;br&gt;&lt;b&gt;destroySingleton&lt;/b&gt;(disposableBeanNames[i])" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1241" y="7870" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-47" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-44" target="6rV152aQ6CwPY-n9f6bI-46" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-44" value="&lt;div&gt;this.containedBeanMap.clear();&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;this.dependentBeanMap.clear();&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;this.dependenciesForBeanMap.clear();&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1261" y="7950" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-49" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-46" target="6rV152aQ6CwPY-n9f6bI-48" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-46" value="clearSingletonCache()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1280" y="8030" width="161.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-48" value="&lt;div&gt;this.singletonObjects.clear();&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;/span&gt;this.singletonFactories.clear();&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;/span&gt;this.earlySingletonObjects.clear();&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;/span&gt;this.registeredSingletons.clear();&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" parent="1" vertex="1">
          <mxGeometry x="1480" y="8020" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-53" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="1" source="6rV152aQ6CwPY-n9f6bI-50" target="6rV152aQ6CwPY-n9f6bI-52" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-50" value="disposableBean = (&lt;b&gt;DisposableBean&lt;/b&gt;) this.disposableBeans.remove(beanName);&lt;br&gt;&lt;b&gt;destroyBean&lt;/b&gt;(beanName, disposableBean);" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1520" y="7870" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6rV152aQ6CwPY-n9f6bI-52" value="先销毁依赖的Bean&lt;br&gt;最后执行 &lt;b&gt;bean.destroy() &lt;/b&gt;(这个bean是&lt;b&gt;DisposableBeanAdapter&lt;/b&gt;)&lt;br&gt;然后再销毁所有依赖这个Bean的Bean&lt;br&gt;将这个Bean从其他Bean的依赖中清除" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=13;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1800" y="7870" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-51" value="&lt;font color=&quot;#007fff&quot;&gt;Y&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#000000;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-43" target="FClDIIbTZ8RpvBB4YRfq-50" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-70" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;dashed=1;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-43" target="FClDIIbTZ8RpvBB4YRfq-60" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="4320" y="8630" />
              <mxPoint x="4320" y="8840" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-43" value="!mbd.isPrototype() &amp;amp;&amp;amp; &lt;b&gt;requiresDestruction&lt;/b&gt;(bean, mbd)" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4330" y="8570" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-49" value="&lt;font color=&quot;#000000&quot;&gt;&lt;b&gt;requiresDestruction&lt;/b&gt;：&lt;br&gt;1) DisposableBeanAdapter.hasDestroyMethod(bean, mbd)&lt;/font&gt;&lt;br&gt;是DisposableBean的实例；&lt;br&gt;是AutoCloseable的实例；&lt;br&gt;Bean定义中拥有&lt;b&gt;destroyMethod&lt;/b&gt;方法（destoryMethodName不为空）；&lt;br&gt;&lt;br&gt;&lt;font color=&quot;#000000&quot;&gt;2)&amp;nbsp;&lt;span&gt;hasDestructionAwareBeanPostProcessors() &amp;amp;&amp;amp;&lt;/span&gt;&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/span&gt;DisposableBeanAdapter.hasApplicableProcessors(bean, getBeanPostProcessors())&lt;/font&gt;&lt;/div&gt;&lt;div&gt;BeanFactory有注册DestructionAwareBeanPostProcessor；&lt;/div&gt;&lt;div&gt;且&lt;/div&gt;&lt;div&gt;注册的DestructionAwareBeanPostProcessor中有适用于当前Bean的后置处理器（通过 requiresDestruction() 返回值一一判断是否有适用的）&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="4330" y="8650" width="310" height="160" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-53" value="&lt;font color=&quot;#007fff&quot;&gt;Y&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#000000;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-50" target="FClDIIbTZ8RpvBB4YRfq-52" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-55" value="&lt;font color=&quot;#007fff&quot;&gt;N&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#000000;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-50" target="FClDIIbTZ8RpvBB4YRfq-54" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-50" value="mbd.isSingleton()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;是否是单例？&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4600" y="8570" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-57" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-52" target="FClDIIbTZ8RpvBB4YRfq-56" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-52" value="&lt;div&gt;&lt;b&gt;registerDisposableBean&lt;/b&gt;(beanName,&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/span&gt;new &lt;b&gt;DisposableBeanAdapter&lt;/b&gt;(bean, beanName, mbd, getBeanPostProcessors(), acc))&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4800" y="8580" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-54" value="&lt;div&gt;&lt;b&gt;scope&lt;/b&gt;.&lt;b&gt;registerDestructionCallback&lt;/b&gt;(&lt;br&gt;beanName,&lt;span&gt;new &lt;b&gt;DisposableBeanAdapter&lt;/b&gt;(bean, beanName, mbd, getBeanPostProcessors(), acc))&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4800" y="8660" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-56" value="this.&lt;b&gt;disposableBeans&lt;/b&gt;.put(&lt;br&gt;beanName, bean)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;这里的bean是&amp;nbsp;&lt;b&gt;DisposableBeanAdapter&lt;/b&gt; 类型&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="5040" y="8585" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-58" value="disposableBeans并不是单指实现了&lt;br&gt;DisposableBean接口的Bean,&lt;br&gt;满足前面条件的Bean都会存到这个Map中" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="5040" y="8635" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-63" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-60" target="FClDIIbTZ8RpvBB4YRfq-62" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-72" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-60" target="FClDIIbTZ8RpvBB4YRfq-71" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-75" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-60" target="FClDIIbTZ8RpvBB4YRfq-73" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-60" value="&lt;font&gt;&lt;font&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;destoryMethod&lt;/font&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;方法来源&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;查setDestroyMethodName调用位置&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4340" y="8820" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-65" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-62" target="FClDIIbTZ8RpvBB4YRfq-64" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-62" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;@Bean destoryMethod属性&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4520" y="8820" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-69" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="1" source="FClDIIbTZ8RpvBB4YRfq-64" target="FClDIIbTZ8RpvBB4YRfq-68" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-64" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;loadBeanDefinitionsForBeanMethod()&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" parent="1" vertex="1">
          <mxGeometry x="4720" y="8820" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-66" value="ConfigurationClassBeanDefinitionReader" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" parent="1" vertex="1">
          <mxGeometry x="4730" y="8800" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-68" value="&lt;font style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;AnnotationAttributes bean = AnnotationConfigUtils.attributesFor(metadata, &lt;b&gt;Bean&lt;/b&gt;.class);&lt;br&gt;&lt;/font&gt;&lt;div&gt;String destroyMethodName = bean.getString(&quot;&lt;b&gt;destroyMethod&lt;/b&gt;&quot;);&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;beanDef.&lt;b&gt;setDestroyMethodName&lt;/b&gt;(destroyMethodName);&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=9;" parent="1" vertex="1">
          <mxGeometry x="4960" y="8810" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-71" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;XML Bean destory-method&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4520" y="8880" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FClDIIbTZ8RpvBB4YRfq-73" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;@PreDestroy&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="4520" y="8940" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="hRreLIQ2RDspytQuaS6y-1" value="&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px;&quot;&gt;先尝试从singletonObjects查，不为空或者正在创建中，直接返回；&lt;br&gt;否则尝试从earlySingletonObjects查，不为空&lt;br&gt;或者为空但是allowEarlyReference 且 singletonFactories包含此beanName的原始对象就通过原始对象创建，&lt;br&gt;并存入earlySingletonObjects&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=top;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2479.75" y="6390" width="500" height="70" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="EiT47i0vRjlMBAQ_8soJ" name="Spring上下文关闭">
    <mxGraphModel dx="1046" dy="-6358" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="X-ydTpfycSVzjgLRHPys-0" />
        <mxCell id="X-ydTpfycSVzjgLRHPys-1" parent="X-ydTpfycSVzjgLRHPys-0" />
        <mxCell id="X-ydTpfycSVzjgLRHPys-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;curved=1;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-3" target="X-ydTpfycSVzjgLRHPys-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-3" value="context.close()&lt;br&gt;&lt;span style=&quot;color: rgb(0 , 127 , 255)&quot;&gt;Spring中主动关闭的方法&lt;/span&gt;&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;5.0之前是方法名是destory()&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="40" y="7060" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;curved=1;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-5" target="X-ydTpfycSVzjgLRHPys-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-5" value="registerShutdownHook()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;如果是外部通过信号关闭，&lt;br&gt;走这里注册的关闭钩子&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="40" y="7179" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-8" target="X-ydTpfycSVzjgLRHPys-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-7" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;dashed=1;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-8" target="X-ydTpfycSVzjgLRHPys-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-8" value="&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;this.shutdownHook = new Thread() {&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&amp;nbsp; &amp;nbsp; @Override&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&amp;nbsp; &amp;nbsp; public void run() {&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; synchronized (startupShutdownMonitor) {&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;b&gt;doClose&lt;/b&gt;();&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;&amp;nbsp; &amp;nbsp; }&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;};&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=5;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="280" y="7159" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-9" value="&lt;div&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;Runtime.getRuntime()&lt;br&gt;.addShutdownHook(this.shutdownHook)&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="280" y="7261" width="200" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-10" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;dashed=1;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-11" target="X-ydTpfycSVzjgLRHPys-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-11" value="&lt;div style=&quot;font-size: 8px&quot;&gt;&lt;div&gt;synchronized (this.startupShutdownMonitor) {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; doClose();&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; ...&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; Runtime.getRuntime().removeShutdownHook(&lt;br&gt;this.shutdownHook);&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=5;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="280" y="7040" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-12" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-13" target="X-ydTpfycSVzjgLRHPys-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-13" value="&lt;div&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;doClose()&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="520" y="7120" width="80" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-14" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-15" target="X-ydTpfycSVzjgLRHPys-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-15" value="并发条件判断防止重复执行close&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;active=true &amp;amp;&amp;amp; CAS 成功将 closed 从false设置为true&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="640" y="7120" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-16" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-17" target="X-ydTpfycSVzjgLRHPys-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-17" value="LiveBeansView&lt;br&gt;.unregisterApplicationContext(this)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;JMX Bean监控注销 &lt;/font&gt;&lt;font color=&quot;#cc0066&quot;&gt;TODO&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="640" y="7180" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-18" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-20" target="X-ydTpfycSVzjgLRHPys-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-19" value="Listener" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;dashed=1;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-20" target="X-ydTpfycSVzjgLRHPys-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-20" value="publishEvent(new ContextClosedEvent(this))&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;发布应用上下文关闭事件&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="640" y="7240" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-21" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-23" target="X-ydTpfycSVzjgLRHPys-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-22" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#CC0066;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-23" target="X-ydTpfycSVzjgLRHPys-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-23" value="this.&lt;b&gt;lifecycleProcessor&lt;/b&gt;.onClose()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;还有个重要方法onRefresh() 用于执行Lifecycle Bean 的 start() &lt;/font&gt;&lt;font color=&quot;#ff3333&quot;&gt;TODO&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="640" y="7300" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-24" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-26" target="X-ydTpfycSVzjgLRHPys-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-25" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-26" target="X-ydTpfycSVzjgLRHPys-64">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-26" value="destroyBeans()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;销毁BeanFactory缓存的所有Bean&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="641" y="7740" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-27" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-29" target="X-ydTpfycSVzjgLRHPys-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-28" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-29" target="X-ydTpfycSVzjgLRHPys-72">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-29" value="closeBeanFactory()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="640" y="7921" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-30" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-31" target="X-ydTpfycSVzjgLRHPys-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-31" value="onClose()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;Spring中此方法为空&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="640" y="7980" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-32" value="this.active.set(false)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="640" y="8041" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-33" value="通过JMX来实时查看Spring放在&lt;br&gt;application context里的bean列表" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="801" y="7184.5" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-34" value="&lt;font style=&quot;font-size: 9px&quot;&gt;Spring中并没有此事件的默认注册的监听器，&lt;font color=&quot;#cc0066&quot;&gt;TODO SpringBoot中呢？&lt;/font&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="880" y="7239" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-35" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#CC0066;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-36" target="X-ydTpfycSVzjgLRHPys-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-36" value="stopBeans()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="879" y="7300" width="81" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-37" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#CC0066;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-39" target="X-ydTpfycSVzjgLRHPys-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-38" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-39" target="X-ydTpfycSVzjgLRHPys-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-39" value="Map&amp;lt;String, Lifecycle&amp;gt;&amp;nbsp;lifecycleBeans&lt;br&gt;&amp;nbsp;= getLifecycleBeans()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;即查找所有Lifecycle类型的Bean&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1000" y="7300" width="200" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-40" value="beanNames = beanFactory.getBeanNamesForType(&lt;br&gt;&lt;b&gt;Lifecycle&lt;/b&gt;.class, false, false)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1240" y="7300" width="199" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-41" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-42" target="X-ydTpfycSVzjgLRHPys-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-42" value="Map&amp;lt;Integer, LifecycleGroup&amp;gt; &lt;b&gt;phases&lt;/b&gt; = new HashMap&amp;lt;&amp;gt;();&lt;br&gt;phases.put(shutdownOrder, group);&lt;br&gt;group.add(beanName, bean);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;按 Phased 接口定义的关闭顺序对Lifecycle Bean分组(分组 LifeGroup不存在则创建)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1000" y="7360" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-43" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#007FFF;curved=1;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-44" target="X-ydTpfycSVzjgLRHPys-46">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1220" y="7489" />
              <mxPoint x="1220" y="7401" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-44" value="keys.sort(Collections.reverseOrder());&lt;br&gt;for keys :&lt;br&gt;phases.get(key).stop()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;对分组按关闭顺序&lt;b&gt;倒序排序&lt;/b&gt;，然后依次执行&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 127 , 255)&quot;&gt;LifecycleGroup&amp;nbsp;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;stop() 方法&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1000" y="7459" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-45" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-46" target="X-ydTpfycSVzjgLRHPys-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-46" value="this.members.sort(&lt;br&gt;Collections.reverseOrder())" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1240" y="7380" width="200" height="41" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-48" target="X-ydTpfycSVzjgLRHPys-52">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-48" value="&lt;font style=&quot;font-size: 10px&quot;&gt;CountDownLatch latch = new CountDownLatch(this.smartMemberCount)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;仅用于SmartLifecycle&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1230.5" y="7441.5" width="219" height="41" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-49" value="&lt;font style=&quot;font-size: 10px&quot;&gt;latch.await(this.timeout, TimeUnit.MILLISECONDS)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;等待这个LifecycleGroup中所有SmartLifecycle Bean stop()执行完毕&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1240" y="7592.5" width="200" height="49" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-52" target="X-ydTpfycSVzjgLRHPys-49">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-51" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-52" target="X-ydTpfycSVzjgLRHPys-54">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-52" value="&lt;font&gt;for (LifecycleGroupMember member : this.members):&amp;nbsp;&lt;br&gt;&lt;b&gt;doStop&lt;/b&gt;(this.lifecycleBeans, member.name, latch, countDownBeanNames)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1230.5" y="7511.5" width="219" height="60" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-53" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-54" target="X-ydTpfycSVzjgLRHPys-60">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-54" value="&lt;font&gt;String[] dependentBeans = getBeanFactory()&lt;br&gt;.getDependentBeans(beanName)&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1478.5" y="7521.5" width="219" height="40" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-55" value="递归调用" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-56" target="X-ydTpfycSVzjgLRHPys-54">
          <mxGeometry x="-0.2514" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-56" value="&lt;font&gt;&lt;div&gt;for dependentBeans:&lt;/div&gt;&lt;div&gt;&lt;b&gt;doStop&lt;/b&gt;(lifecycleBeans, dependentBean, latch, countDownBeanNames)&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1478.75" y="7651.5" width="219" height="40" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-57" value="&lt;font&gt;((SmartLifecycle) bean).stop(() -&amp;gt; {...});&lt;br&gt;或&lt;br&gt;bean.stop();&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1720" y="7579.25" width="219" height="40" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-58" value="Y" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-60" target="X-ydTpfycSVzjgLRHPys-56">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-59" value="N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-60" target="X-ydTpfycSVzjgLRHPys-57">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-60" value="dependentBeans&lt;br&gt;不为空？" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1539" y="7577" width="100" height="44.5" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-61" value="总结：&lt;br&gt;&lt;div&gt;获取所有&lt;b&gt;Lifecycle&lt;/b&gt; Bean&amp;nbsp;&lt;/div&gt;按关闭顺序分组，然后倒序一组一组地执行stop()处理，如果LifecycleBean 有依赖其他 LifecycleBean 则递归先执行依赖的LifecycleBean的关闭&lt;br&gt;&lt;br&gt;&lt;b&gt;Lifecycle&lt;/b&gt;是一个接口，可以&lt;b&gt;在所有的bean都创建完成(getBean)之后执行自己的初始化工作&lt;/b&gt;，或者在退出时执行资源销毁工作。&lt;br&gt;&lt;b&gt;SmartLifecycle&lt;/b&gt;继承自Lifecycle，提供了更丰富的功能：第一，start()方法无需容器显式调用就可以被执行(配置isAutoStartup()返回true)；第二，可以控制多SmartLifecycle实例的执行顺序。（Lifecycle Bean也可以通过额外实现Phased接口控制执行顺序）&lt;br&gt;&lt;br&gt;Phased getPhase() 返回值越大，越先执行" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="730" y="7352" width="250" height="208" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-62" value="&lt;font color=&quot;#007fff&quot;&gt;Linux信号 -&amp;gt; Linux 进程信号监听回调 -&amp;gt;&lt;br&gt;JNI回调Java关闭钩子&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#FF3333;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="40" y="7225" width="200" height="35" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-63" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-64" target="X-ydTpfycSVzjgLRHPys-67">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-64" value="getBeanFactory()&lt;br&gt;.destroySingletons()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="840" y="7740" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-65" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-67" target="X-ydTpfycSVzjgLRHPys-70">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-66" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-67" target="X-ydTpfycSVzjgLRHPys-75">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-67" value="super.&lt;b&gt;destroySingletons&lt;/b&gt;()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;以线程安全的方式，先遍历执行实现了 Disposable 接口的Bean销毁方法，最后清空Bean容器&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1039" y="7730" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-68" value="DefaultListableBeanFactory" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#007FFF;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1049" y="7710" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-69" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-70" target="X-ydTpfycSVzjgLRHPys-71">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-70" value="this.&lt;b&gt;manualSingletonNames&lt;/b&gt;&lt;br&gt;.clear()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1039" y="7810" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-71" value="&lt;b&gt;clearByTypeCache&lt;/b&gt;();" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1039" y="7941" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-72" value="this.beanFactory&lt;br&gt;.setSerializationId(null)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="841" y="7921" width="160" height="39" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-73" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-75" target="X-ydTpfycSVzjgLRHPys-77">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-74" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-75" target="X-ydTpfycSVzjgLRHPys-82">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;fillColor=#d5e8d4;strokeColor=#82b366;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-75" target="AVFYX94W6K4ikGJm1E3o-14">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1481" y="7720" />
              <mxPoint x="2080" y="7720" />
              <mxPoint x="2080" y="7670" />
              <mxPoint x="3040" y="7670" />
              <mxPoint x="3040" y="7506" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-75" value="disposableBeanNames = StringUtils.toStringArray(&lt;br&gt;this.&lt;b&gt;disposableBeans&lt;/b&gt;.keySet())&lt;br&gt;for disposableBeanNames:&amp;nbsp;&lt;br&gt;&lt;b&gt;destroySingleton&lt;/b&gt;(disposableBeanNames[i])" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1241" y="7730" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-76" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-77" target="X-ydTpfycSVzjgLRHPys-79">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-77" value="&lt;div&gt;this.containedBeanMap.clear();&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;this.dependentBeanMap.clear();&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;this.dependenciesForBeanMap.clear();&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1261" y="7810" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-78" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-79" target="X-ydTpfycSVzjgLRHPys-80">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-79" value="clearSingletonCache()" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1280" y="7890" width="161.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-80" value="&lt;div&gt;this.singletonObjects.clear();&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;/span&gt;this.singletonFactories.clear();&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;/span&gt;this.earlySingletonObjects.clear();&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;/span&gt;this.registeredSingletons.clear();&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1480" y="7880" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-81" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="X-ydTpfycSVzjgLRHPys-82" target="X-ydTpfycSVzjgLRHPys-83">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-82" value="disposableBean = (&lt;b&gt;DisposableBean&lt;/b&gt;) this.disposableBeans.remove(beanName);&lt;br&gt;&lt;b&gt;destroyBean&lt;/b&gt;(beanName, disposableBean);" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=13;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1520" y="7730" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="X-ydTpfycSVzjgLRHPys-83" value="先销毁依赖的Bean&lt;br&gt;最后执行 &lt;b&gt;bean.destroy() &lt;/b&gt;(这个bean是&lt;b&gt;DisposableBeanAdapter&lt;/b&gt;)&lt;br&gt;然后再销毁所有依赖这个Bean的Bean&lt;br&gt;将这个Bean从其他Bean的依赖中清除" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=13;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="1800" y="7730" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-0" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;strokeColor=#000000;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="AVFYX94W6K4ikGJm1E3o-2" target="AVFYX94W6K4ikGJm1E3o-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-1" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="AVFYX94W6K4ikGJm1E3o-2" target="AVFYX94W6K4ikGJm1E3o-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-2" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;registerDisposableBeanIfNecessary(&lt;br&gt;beanName, bean, mbd);&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;有些Bean销毁时需要执行销毁方法&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;释放资源,这里将要执行销毁方法的Bean注册到disposableBeans Map容器&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="2080" y="7451.5" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-3" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;return exposedObject;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="2080" y="7571.5" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-4" value="&lt;font color=&quot;#007fff&quot;&gt;Y&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#000000;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="AVFYX94W6K4ikGJm1E3o-6" target="AVFYX94W6K4ikGJm1E3o-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-5" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;dashed=1;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="AVFYX94W6K4ikGJm1E3o-6" target="AVFYX94W6K4ikGJm1E3o-19">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2340" y="7501.5" />
              <mxPoint x="2340" y="7711.5" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-6" value="!mbd.isPrototype() &amp;amp;&amp;amp; &lt;b&gt;requiresDestruction&lt;/b&gt;(bean, mbd)" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=12;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="2350" y="7441.5" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-7" value="&lt;font color=&quot;#000000&quot;&gt;&lt;b&gt;requiresDestruction&lt;/b&gt;：&lt;br&gt;1) DisposableBeanAdapter.hasDestroyMethod(bean, mbd)&lt;/font&gt;&lt;br&gt;是DisposableBean的实例；&lt;br&gt;是AutoCloseable的实例；&lt;br&gt;Bean定义中拥有&lt;b&gt;destroyMethod&lt;/b&gt;方法（destoryMethodName不为空）；&lt;br&gt;&lt;br&gt;&lt;font color=&quot;#000000&quot;&gt;2)&amp;nbsp;&lt;span&gt;hasDestructionAwareBeanPostProcessors() &amp;amp;&amp;amp;&lt;/span&gt;&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/span&gt;DisposableBeanAdapter.hasApplicableProcessors(bean, getBeanPostProcessors())&lt;/font&gt;&lt;/div&gt;&lt;div&gt;BeanFactory有注册DestructionAwareBeanPostProcessor；&lt;/div&gt;&lt;div&gt;且&lt;/div&gt;&lt;div&gt;注册的DestructionAwareBeanPostProcessor中有适用于当前Bean的后置处理器（通过 requiresDestruction() 返回值一一判断是否有适用的）&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#007FFF;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="2350" y="7521.5" width="310" height="160" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-8" value="&lt;font color=&quot;#007fff&quot;&gt;Y&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#000000;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="AVFYX94W6K4ikGJm1E3o-10" target="AVFYX94W6K4ikGJm1E3o-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-9" value="&lt;font color=&quot;#007fff&quot;&gt;N&lt;/font&gt;" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#000000;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="AVFYX94W6K4ikGJm1E3o-10" target="AVFYX94W6K4ikGJm1E3o-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-10" value="mbd.isSingleton()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;是否是单例？&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=12;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="2620" y="7441.5" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-11" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="AVFYX94W6K4ikGJm1E3o-12" target="AVFYX94W6K4ikGJm1E3o-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-12" value="&lt;div&gt;&lt;b&gt;registerDisposableBean&lt;/b&gt;(beanName,&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/span&gt;new &lt;b&gt;DisposableBeanAdapter&lt;/b&gt;(bean, beanName, mbd, getBeanPostProcessors(), acc))&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=12;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="2820" y="7451.5" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-13" value="&lt;div&gt;&lt;b&gt;scope&lt;/b&gt;.&lt;b&gt;registerDestructionCallback&lt;/b&gt;(&lt;br&gt;beanName,&lt;span&gt;new &lt;b&gt;DisposableBeanAdapter&lt;/b&gt;(bean, beanName, mbd, getBeanPostProcessors(), acc))&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=12;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="2820" y="7531.5" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-14" value="this.&lt;b&gt;disposableBeans&lt;/b&gt;.put(&lt;br&gt;beanName, bean)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;这里的bean是&amp;nbsp;&lt;b&gt;DisposableBeanAdapter&lt;/b&gt; 类型&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="3060" y="7456.5" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-15" value="disposableBeans并不是单指实现了&lt;br&gt;DisposableBean接口的Bean,&lt;br&gt;满足前面条件的Bean都会存到这个Map中" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="3060" y="7506.5" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-16" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="AVFYX94W6K4ikGJm1E3o-19" target="AVFYX94W6K4ikGJm1E3o-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-17" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="AVFYX94W6K4ikGJm1E3o-19" target="AVFYX94W6K4ikGJm1E3o-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-18" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="AVFYX94W6K4ikGJm1E3o-19" target="AVFYX94W6K4ikGJm1E3o-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-19" value="&lt;font&gt;&lt;font&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;destoryMethod&lt;/font&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;方法来源&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;查setDestroyMethodName调用位置&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="2360" y="7691.5" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-20" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="AVFYX94W6K4ikGJm1E3o-21" target="AVFYX94W6K4ikGJm1E3o-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-21" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;@Bean destoryMethod属性&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="2540" y="7691.5" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-22" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" edge="1" parent="X-ydTpfycSVzjgLRHPys-1" source="AVFYX94W6K4ikGJm1E3o-23" target="AVFYX94W6K4ikGJm1E3o-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-23" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;loadBeanDefinitionsForBeanMethod()&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="2740" y="7691.5" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-24" value="ConfigurationClassBeanDefinitionReader" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#007FFF;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="2750" y="7671.5" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-25" value="&lt;font style=&quot;font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;AnnotationAttributes bean = AnnotationConfigUtils.attributesFor(metadata, &lt;b&gt;Bean&lt;/b&gt;.class);&lt;br&gt;&lt;/font&gt;&lt;div&gt;String destroyMethodName = bean.getString(&quot;&lt;b&gt;destroyMethod&lt;/b&gt;&quot;);&lt;/div&gt;&lt;div&gt;&lt;span&gt;&#x9;&#x9;&lt;/span&gt;beanDef.&lt;b&gt;setDestroyMethodName&lt;/b&gt;(destroyMethodName);&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=9;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="2980" y="7681.5" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-26" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;XML Bean destory-method&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="2540" y="7751.5" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AVFYX94W6K4ikGJm1E3o-27" value="&lt;font&gt;&lt;font size=&quot;1&quot;&gt;@PreDestroy&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=center;arcSize=12;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="X-ydTpfycSVzjgLRHPys-1">
          <mxGeometry x="2540" y="7811.5" width="160" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
