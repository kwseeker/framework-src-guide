<mxfile host="Electron" modified="2024-12-09T17:07:06.094Z" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.6.5 Chrome/114.0.5735.243 Electron/25.3.1 Safari/537.36" etag="WGIOFCZfjYgglpAuoXQx" version="21.6.5" type="device" pages="3">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="工作流程">
    <mxGraphModel dx="3088" dy="879" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="9RbiF7Askb06rhWkXzBX-20" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=9;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2210" y="2070" width="1510" height="470" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-9" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#3399FF;shape=link;strokeColor=none;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-63" target="FaMM4MfJ-Ujy_KWEskPM-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4h_itlIO3gS3AQeO8IFH-0" value="&lt;h1&gt;Mybatis 工作流图 &lt;span style=&quot;font-weight: normal&quot;&gt;（Mybatis 3.5.9）&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;&lt;b&gt;前置知识&lt;/b&gt;：&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;javax.xml 拓展包使用 &amp;amp; xml相关知识（如果没有对xml的系统认识，配置文件及Mapper文件解析的源码看起来不会很顺畅），DOM + XPath 解析XML；&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;深入理解：动态代理、反射（比如：泛型反射）、MethodHandle（被称为新型反射）&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;JDBC (包括基本使用、会话、事务等);&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="40" y="40" width="720" height="120" as="geometry" />
        </mxCell>
        <mxCell id="4h_itlIO3gS3AQeO8IFH-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="4h_itlIO3gS3AQeO8IFH-2" target="4h_itlIO3gS3AQeO8IFH-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4h_itlIO3gS3AQeO8IFH-2" value="start" style="ellipse;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="60" y="200" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="4h_itlIO3gS3AQeO8IFH-3" value="end" style="ellipse;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="60" y="2120" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="4h_itlIO3gS3AQeO8IFH-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="4h_itlIO3gS3AQeO8IFH-8" target="4h_itlIO3gS3AQeO8IFH-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4h_itlIO3gS3AQeO8IFH-8" value="读取配置文件到输入流" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="40" y="280" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="4h_itlIO3gS3AQeO8IFH-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="4h_itlIO3gS3AQeO8IFH-10" target="4h_itlIO3gS3AQeO8IFH-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="4h_itlIO3gS3AQeO8IFH-10" target="8foiymuQkOx7uc3-mmT_-0" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4h_itlIO3gS3AQeO8IFH-10" value="根据配置&lt;br&gt;创建SqlSession工厂" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="40" y="400" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="4h_itlIO3gS3AQeO8IFH-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="4h_itlIO3gS3AQeO8IFH-12" target="4h_itlIO3gS3AQeO8IFH-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-54" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="4h_itlIO3gS3AQeO8IFH-12" target="8foiymuQkOx7uc3-mmT_-53" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4h_itlIO3gS3AQeO8IFH-12" value="建立会话&lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 8px&quot;&gt;会话层面的设置&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="40" y="920" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="4h_itlIO3gS3AQeO8IFH-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="4h_itlIO3gS3AQeO8IFH-14" target="4h_itlIO3gS3AQeO8IFH-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-67" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="4h_itlIO3gS3AQeO8IFH-14" target="8foiymuQkOx7uc3-mmT_-66" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4h_itlIO3gS3AQeO8IFH-14" value="获取Mapper代理对象&lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 10px&quot;&gt;主要是里面的MapperMethod&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="40" y="1200" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="4h_itlIO3gS3AQeO8IFH-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="4h_itlIO3gS3AQeO8IFH-16" target="4h_itlIO3gS3AQeO8IFH-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-69" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="4h_itlIO3gS3AQeO8IFH-16" target="8foiymuQkOx7uc3-mmT_-68" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4h_itlIO3gS3AQeO8IFH-16" value="执行sql操作&lt;br&gt;并返回结果&lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 8px&quot;&gt;将上面的MapperMethod结合参数信息，丢到Executor执行&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="40" y="1430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-0" target="8foiymuQkOx7uc3-mmT_-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-20" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-0" target="4h_itlIO3gS3AQeO8IFH-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-0" value="new SqlSessionFactoryBuilder()&lt;br&gt;.build(inputStream)" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="240" y="400" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-2" target="8foiymuQkOx7uc3-mmT_-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-2" target="8foiymuQkOx7uc3-mmT_-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-2" value="XMLConfigBuilder parser = new XMLConfigBuilder(inputStream, environment, properties)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="480" y="400" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;curved=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="100" y="2440" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-15" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-5" target="8foiymuQkOx7uc3-mmT_-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-19" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-5" target="8foiymuQkOx7uc3-mmT_-0" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-5" value="this.build(parser.parse())" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="480" y="520" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-7" target="8foiymuQkOx7uc3-mmT_-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-7" value="XMLConfigBuilder &amp;lt;init&amp;gt;&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;新建用于将xml文件解析成&lt;br&gt;Configuration对象的Builder&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="720" y="400" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-9" value="&lt;div&gt;new &lt;b&gt;XPathParser&lt;/b&gt;(&lt;b&gt;inputStream&lt;/b&gt;, true, props, new &lt;b&gt;XMLMapperEntityResolver&lt;/b&gt;())&lt;/div&gt;&lt;div&gt;super(new &lt;b&gt;Configuration&lt;/b&gt;());&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#3399ff&quot;&gt;//configuration存储上次解析的缓存&lt;/font&gt;&lt;/div&gt;&lt;div&gt;this.&lt;b&gt;localReflectorFactory&lt;/b&gt; = new &lt;b&gt;DefaultReflectorFactory&lt;/b&gt;();&lt;/div&gt;&lt;div&gt;ErrorContext.instance().resource(&quot;SQL Mapper Configuration&quot;);&lt;/div&gt;&lt;div&gt;this.&lt;b&gt;configuration&lt;/b&gt;.setVariables(props);&lt;span&gt;&#x9;&lt;/span&gt;&lt;span&gt;&#x9;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;this.parsed = false;&lt;span&gt;&#x9;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;&lt;font color=&quot;#3399ff&quot;&gt;//是否解析过，解析过再获取配置就直接取缓存&lt;/font&gt;&lt;/div&gt;&lt;div&gt;this.environment = environment;&lt;/div&gt;&lt;div&gt;this.&lt;b&gt;parser&lt;/b&gt; = parser;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#3399ff&quot;&gt;//上面的XPathParser，自带待解析数据（传参）&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;align=left;arcSize=3;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="960" y="360" width="440" height="120" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-17" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-14" target="8foiymuQkOx7uc3-mmT_-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-24" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-14" target="8foiymuQkOx7uc3-mmT_-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-14" value="&lt;b&gt;XMLConfigBuilder&lt;/b&gt;$&lt;b&gt;parse&lt;/b&gt;()&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;解析数据流&lt;br&gt;返回Configuration实例&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="720" y="520" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-18" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-16" target="8foiymuQkOx7uc3-mmT_-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-16" value="return new DefaultSqlSessionFactory(config);&lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 8px&quot;&gt;使用Configuration实例构建SqlSession工厂，只是传下Configuration实例&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="720" y="760" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-26" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-23" target="8foiymuQkOx7uc3-mmT_-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-23" value="evalNode(&quot;/configuration&quot;)&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;通过XPath和DOM解析并返回XNode根节点实例&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="960" y="520" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-29" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-25" target="8foiymuQkOx7uc3-mmT_-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-43" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-25" target="8foiymuQkOx7uc3-mmT_-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-44" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-25" target="8foiymuQkOx7uc3-mmT_-32" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-45" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-25" target="8foiymuQkOx7uc3-mmT_-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-46" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-25" target="8foiymuQkOx7uc3-mmT_-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-47" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-25" target="8foiymuQkOx7uc3-mmT_-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-48" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-25" target="8foiymuQkOx7uc3-mmT_-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-49" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-25" target="8foiymuQkOx7uc3-mmT_-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-50" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-25" target="8foiymuQkOx7uc3-mmT_-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-51" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-25" target="8foiymuQkOx7uc3-mmT_-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-52" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-25" target="8foiymuQkOx7uc3-mmT_-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-25" value="&lt;b&gt;parseConfiguration&lt;/b&gt;(XNode root)&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;遍历根节点实例，解析所有子节点&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="960" y="600" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-27" value="&lt;font color=&quot;#3399ff&quot;&gt;&quot;properties&quot;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="530" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-31" value="&lt;font color=&quot;#3399ff&quot;&gt;&quot;settings&quot;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="550" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-6" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-32" target="nTEty8VkxfBIhpbtXYr3-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-32" value="&lt;font color=&quot;#3399ff&quot;&gt;&quot;typeAliases&quot;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="570" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-33" value="&lt;font color=&quot;#3399ff&quot;&gt;&quot;plugins&quot;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="590" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-36" value="&lt;font color=&quot;#3399ff&quot;&gt;&quot;objectFactory&quot;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="610" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-37" value="&lt;font color=&quot;#3399ff&quot;&gt;&quot;objectWrapperFactory&quot;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="630" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-38" value="&lt;font color=&quot;#3399ff&quot;&gt;&quot;reflectorFactory&quot;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="650" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-39" target="sPj-nGploxGMAyuYcm76-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-39" value="&lt;font color=&quot;#3399ff&quot;&gt;&quot;environments&quot;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="670" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-40" value="&lt;font color=&quot;#3399ff&quot;&gt;&quot;databaseIdProvider&quot;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="690" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-41" value="&lt;font color=&quot;#3399ff&quot;&gt;&quot;typeHandlers&quot;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="710" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-75" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-42" target="8foiymuQkOx7uc3-mmT_-74" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-42" value="&lt;font color=&quot;#3399ff&quot;&gt;&quot;mappers&quot;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="730" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-56" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-53" target="8foiymuQkOx7uc3-mmT_-55" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-17" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-53" target="4h_itlIO3gS3AQeO8IFH-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-53" value="openSession(true)" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="240" y="920" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-58" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-55" target="8foiymuQkOx7uc3-mmT_-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-16" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-55" target="8foiymuQkOx7uc3-mmT_-53" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-55" value="openSessionFromDataSource(ExecutorType execType, TransactionIsolationLevel level, boolean autoCommit)&lt;br&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span style=&quot;color: rgb(51 , 153 , 255)&quot;&gt;&amp;nbsp; execType:默认ExecutorType.SIMPLE，&lt;/span&gt;&lt;/div&gt;&lt;font color=&quot;#3399ff&quot;&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;&amp;nbsp; level: 事务隔离级别null，&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;&amp;nbsp; autoCommit: 自动提交&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="430" y="905" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-60" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-57" target="8foiymuQkOx7uc3-mmT_-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-57" value="TransactionFactory transactionFactory = getTransactionFactoryFromEnvironment(environment)&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;测试中是JDBCTransactionFactory&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="720" y="920" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-62" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-59" target="8foiymuQkOx7uc3-mmT_-61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-59" value="tx = transactionFactory.newTransaction(&lt;br&gt;environment.getDataSource(), level, autoCommit);&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;测试中是JDBCTransaction&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#cdeb8b;strokeColor=#36393d;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="720" y="980" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-64" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-61" target="8foiymuQkOx7uc3-mmT_-63" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-13" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-61" target="sPj-nGploxGMAyuYcm76-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-61" value="Executor executor = configuration.newExecutor(tx, execType);&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;创建SQL执行器&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="720" y="1040" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-65" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-63" target="8foiymuQkOx7uc3-mmT_-55" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-10" style="edgeStyle=entityRelationEdgeStyle;shape=link;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#3399FF;elbow=vertical;strokeColor=#3399FF;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-63" target="FaMM4MfJ-Ujy_KWEskPM-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-63" value="new &lt;b&gt;DefaultSqlSession&lt;/b&gt;(configuration, executor, autoCommit);&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;使用上面的组件创建会话对象&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#d5e8d4;strokeColor=#82b366;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="720" y="1100" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-18" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-66" target="8foiymuQkOx7uc3-mmT_-70" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-66" value="sqlSession.getMapper(&lt;br&gt;Xxx.class);&lt;br&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#3399ff&quot;&gt;获取某MapperProxy代理对象&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="240" y="1200" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-34" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-68" target="sPj-nGploxGMAyuYcm76-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-68" value="&lt;font style=&quot;font-size: 10px&quot;&gt;比如blogMapper.selectBlog(1);&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="240" y="1440" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-19" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-70" target="8foiymuQkOx7uc3-mmT_-72" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-70" value="configuration.getMapper&lt;br&gt;(type, this)&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;type即Mapper接口类&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="280" y="1280" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-22" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-72" target="sPj-nGploxGMAyuYcm76-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-72" value="&lt;b&gt;mapperProxyFactory&lt;/b&gt;&lt;br&gt;.newInstance(sqlSession);&lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 10px&quot;&gt;从mapperRegistry读取type的Mapper代理工厂,然后创建Mapper代理对象&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="320" y="1350" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-77" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-74" target="8foiymuQkOx7uc3-mmT_-76" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-79" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-74" target="8foiymuQkOx7uc3-mmT_-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-74" value="&lt;b&gt;mapperElement&lt;/b&gt;(&lt;br&gt;root.evalNode(&quot;mappers&quot;))&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;读取mappers配置节点，然后逐个解析mapper xml文件并注册到&lt;b&gt;Configuration&lt;/b&gt;.&lt;b&gt;mapperRegistry&lt;/b&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;fillColor=#e3c800;strokeColor=#B09500;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1400" y="750" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-76" value="&amp;lt;package name=&quot;&quot;&amp;gt;&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;通过包名加载Mapper&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1600" y="730" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-84" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-78" target="8foiymuQkOx7uc3-mmT_-83" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-78" value="&amp;lt;mapper resource=&quot;&quot; url=&quot;&quot; class=&quot;&quot;&amp;gt;&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;通过本地Mapper文件、URL远程Mapper文件、Mapper Interface类 加载&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1600" y="790" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-80" value="解析细节参考：XmlParseTest::testParseXml" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="720" y="490" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-89" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-81" target="8foiymuQkOx7uc3-mmT_-88" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-81" value="&lt;b&gt;XMLMapperBuilder&lt;/b&gt; &amp;lt;init&amp;gt;&lt;br&gt;this.&lt;b&gt;builderAssistant&lt;/b&gt; = new MapperBuilderAssistant;&lt;br&gt;this.&lt;b&gt;sqlFragments&lt;/b&gt; = sqlFragments;&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;这两个类似解析缓存&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2000" y="640" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-85" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-83" target="8foiymuQkOx7uc3-mmT_-81" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-83" value="本地Mapper文件加载" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1840" y="650" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-91" value="Y" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-88" target="8foiymuQkOx7uc3-mmT_-90" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-24" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;strokeColor=#330000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-88" target="nTEty8VkxfBIhpbtXYr3-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1970" y="750" />
              <mxPoint x="1970" y="1075" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-25" value="N" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#3399FF;" parent="nTEty8VkxfBIhpbtXYr3-24" vertex="1" connectable="0">
          <mxGeometry x="-0.8573" y="9" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-88" value="首次加载？&lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 8px&quot;&gt;loadedResouces&lt;br&gt;是否包含？&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=11;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2040" y="730" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-93" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-90" target="8foiymuQkOx7uc3-mmT_-92" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-98" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-90" target="8foiymuQkOx7uc3-mmT_-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-90" value="configurationElement(&lt;br&gt;parser.evalNode(&quot;/mapper&quot;))&lt;br&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#3399ff&quot;&gt;解析并加载“/mapper”根节点，然后记录到loadedResouces&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;arcSize=11;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2010" y="800" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-15" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-92" target="nTEty8VkxfBIhpbtXYr3-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;strokeColor=#330000;elbow=vertical;curved=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-92" target="nTEty8VkxfBIhpbtXYr3-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-92" value="bindMapperForNamespace()&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;将当前namespace指定的Mapper Interface 类型及Mapper代理工厂注册到Configurations$&lt;b&gt;mapperRegistry&lt;/b&gt;中&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;arcSize=11;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2000" y="890" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-96" value="内部流程和前面解析/configuration的原理类似&lt;br&gt;把内部各种属性、元素等解析为对象，存储到Configuration实例中" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1800" y="805" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-0" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-97" target="8foiymuQkOx7uc3-mmT_-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-7" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-97" target="nTEty8VkxfBIhpbtXYr3-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-10" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-97" target="nTEty8VkxfBIhpbtXYr3-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-11" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="8foiymuQkOx7uc3-mmT_-97" target="nTEty8VkxfBIhpbtXYr3-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-97" value="&quot;namespace&quot; &lt;font color=&quot;#3399ff&quot;&gt;命名空间 -&amp;gt;&amp;nbsp;cacheRefMap&lt;/font&gt;&lt;br&gt;&quot;cache-ref&quot; &lt;font color=&quot;#3399ff&quot;&gt;缓存配置引用&lt;/font&gt;&lt;br&gt;&quot;cache&quot;　&lt;font color=&quot;#3399ff&quot;&gt;缓存配置&lt;/font&gt;&lt;br&gt;&lt;strike&gt;&quot;/mapper/parameterMap&quot; &lt;font color=&quot;#3399ff&quot;&gt;参数映射&lt;/font&gt;&lt;br&gt;&lt;/strike&gt;&quot;/mapper/resultMap&quot;&lt;br&gt;&quot;/mapper/sql&quot;&lt;span&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#3399ff&quot;&gt;可重用sql模块&lt;/font&gt;&lt;br&gt;&quot;select|insert|update|delete&quot;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;arcSize=7;align=left;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2220" y="780" width="220" height="90" as="geometry" />
        </mxCell>
        <mxCell id="8foiymuQkOx7uc3-mmT_-99" value="缓存配置：&lt;font color=&quot;#3399ff&quot;&gt;Mybatis提供了多种实现&lt;/font&gt;&lt;br&gt;Cache cache = new CacheBuilder(...)&lt;br&gt;configuration.addCache(cache);" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;arcSize=7;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2480" y="700" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-8" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="nTEty8VkxfBIhpbtXYr3-1" target="8foiymuQkOx7uc3-mmT_-81" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-1" value="resultMap&lt;br&gt;1) 获取type属性，获取对应Class类型，并注册到typeAliasRegistry&lt;br&gt;2) 解析各个字段的映射规则（包括列名、java类型、jdbc类型、自定义类型转换器、flags等等）&lt;br&gt;3）最后将映射规则注册到XMLMapperBuilder$&lt;b&gt;builderAssistant&lt;/b&gt;&lt;br&gt;同时还创建了ResultMapResolver注册到&lt;b&gt;&amp;nbsp;&lt;/b&gt;Configuration$&lt;b&gt;incompleteResultMaps&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;arcSize=7;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2480" y="760" width="430" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-9" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="nTEty8VkxfBIhpbtXYr3-2" target="8foiymuQkOx7uc3-mmT_-81" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-2" value="可重用sql&amp;nbsp;&lt;br&gt;涉及databaseId、id属性，最终将可重用sql片段存储到 XMLMapperBuilder$&lt;b&gt;sqlFragments&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;arcSize=7;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2480" y="840" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-3" value="statement&lt;br&gt;创建sql语句解析器&lt;b&gt;XMLStatementBuilder&lt;/b&gt;，解析CRUD语句，并将此解析器注册到 Configuration$&lt;b&gt;incompleteStatements&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;arcSize=7;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2480" y="900" width="250" height="50" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-4" value="&lt;font color=&quot;#3399ff&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;resultMap解析还是比较复杂的，可以实现复杂查询语句的结果映射&lt;br&gt;这个后面详细分析 TODO&lt;br&gt;&lt;/span&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2910" y="770" width="310" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-5" value="别名注册, 存储到Map&amp;nbsp; configuration.typeAliasRegistry" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1400" y="560" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-12" value="&lt;font color=&quot;#3399ff&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;XMLStatementBuilder是后面获取Mapper代理对象时很重要的一个对象&lt;br&gt;后面详细分析 TODO&lt;br&gt;&lt;/span&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2730" y="905" width="330" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-17" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="nTEty8VkxfBIhpbtXYr3-14" target="nTEty8VkxfBIhpbtXYr3-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-14" value="&lt;div&gt;knownMappers.put(&lt;span&gt;type,&lt;/span&gt;&lt;/div&gt;&lt;div&gt;new MapperProxyFactory&amp;lt;&amp;gt;(type));&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;arcSize=11;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2240" y="895" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-19" style="edgeStyle=isometricEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;shape=link;elbow=vertical;strokeColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="nTEty8VkxfBIhpbtXYr3-16" target="nTEty8VkxfBIhpbtXYr3-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-16" value="parser = new MapperAnnotationBuilder(config, type);&lt;br&gt;parser.parse()&lt;br&gt;注解形式定义的Statement的解析及构造器&amp;nbsp;&lt;b&gt;MethodResolver&lt;/b&gt;&lt;br&gt;注册到&amp;nbsp;&lt;span&gt;Configuration$&lt;/span&gt;&lt;b&gt;incompleteMethods&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;arcSize=11;align=left;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2190" y="970" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-18" value="&lt;font color=&quot;#3399ff&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;XMLStatementBuilder&lt;/b&gt;是处理XML statement定义的&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;MethodResolver&lt;/b&gt; 是处理 注解 statement定义的&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2470" y="980" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-27" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;strokeColor=#330000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="nTEty8VkxfBIhpbtXYr3-22" target="nTEty8VkxfBIhpbtXYr3-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-22" value="parsePendingResultMaps()&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;遍历incompleteResultMaps执行resolve整合到 ResultMapResolver.assistant&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;arcSize=11;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2010" y="1050" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-29" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;strokeColor=#330000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="nTEty8VkxfBIhpbtXYr3-26" target="nTEty8VkxfBIhpbtXYr3-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-26" value="parsePendingCacheRefs()&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;同上，后续处理&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;arcSize=11;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2010" y="1120" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-28" value="parsePendingStatements()&lt;br&gt;&lt;span style=&quot;color: rgb(51 , 153 , 255)&quot;&gt;同上，后续处理&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;arcSize=11;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2010" y="1180" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-30" value="前面为何不处理完全？&lt;br&gt;可能在等待什么依赖的配置解析完才能继续&lt;br&gt;这个后面再看" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2170" y="1055" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-34" value="通过这一步主要创建了XMLStatementBuilder，和几个Resolver类" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1400" y="810" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="nTEty8VkxfBIhpbtXYr3-35" value="&lt;span style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#ff0080&quot;&gt;疑问：XMLMapperBuilder只是中间对象，解析阶段完成后sqlFragments应该还是要存到&lt;br&gt;Configuration$sqlFragments 才对，哪一步传过去的？ TODO&lt;/font&gt;&lt;br&gt;&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2730" y="845" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-1" value="environmentsElement(&lt;br&gt;root.evalNode(&quot;environments&quot;))&lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 8px&quot;&gt;创建事务工厂实例，这里是JDBCTransactionFactory; 创建数据源这里是PooledDataSource; 然后构造Envorionment实例存入Configuration&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1400" y="625" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-9" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-6" target="sPj-nGploxGMAyuYcm76-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-6" value="&lt;font&gt;executor = new SimpleExecutor(this, transaction);&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;有三种执行器类型（测试中选用的SIMPLE）&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1040" y="970" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-14" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-8" target="sPj-nGploxGMAyuYcm76-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-8" value="&lt;font&gt;executor = new CachingExecutor(executor);&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;是否为执行器开启缓存（这个是&lt;b&gt;一级缓存&lt;/b&gt;默认开启）&lt;br&gt;关键是TransactionalCacheManager&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;strokeColor=#82b366;fillColor=#d5e8d4;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1049" y="1030" width="181" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-15" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-10" target="8foiymuQkOx7uc3-mmT_-61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-10" value="&lt;font&gt;executor = (Executor) interceptorChain.pluginAll(executor);&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;通过动态代理&lt;/font&gt;&lt;span style=&quot;color: rgb(51 , 153 , 255)&quot;&gt;将插件逻辑&lt;/span&gt;&lt;font color=&quot;#3399ff&quot;&gt;一层层地包装到Executor上，如果有加载插件的话&lt;br&gt;最终拿到的Executor是个代理类&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;strokeColor=#82b366;fillColor=#d5e8d4;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1050" y="1110" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-27" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-20" target="sPj-nGploxGMAyuYcm76-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-29" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-20" target="sPj-nGploxGMAyuYcm76-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-20" value="&lt;font style=&quot;font-size: 10px&quot;&gt;MapperProxy&amp;lt;T&amp;gt; mapperProxy = new &lt;b&gt;MapperProxy&lt;/b&gt;&amp;lt;&amp;gt;(sqlSession, mapperInterface, methodCache);&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;MapperProxy实现InvocationHandler接口，即定义了增强逻辑&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="560" y="1180" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-23" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-24" target="sPj-nGploxGMAyuYcm76-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-24" value="&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;MapperProxy 数据结构&lt;/span&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="40" y="2307" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-25" value="&lt;div&gt;private static final Constructor&amp;lt;Lookup&amp;gt; lookupConstructor; &lt;font color=&quot;#3399ff&quot;&gt;//获取的MethodHandles.Lookup.class的构造器方法&lt;/font&gt;&lt;/div&gt;&lt;div&gt;private static final Method privateLookupInMethod; &lt;font color=&quot;#3399ff&quot;&gt;//估计是用于旧版本兼容&lt;/font&gt;&lt;/div&gt;&lt;div&gt;private final SqlSession sqlSession;&lt;/div&gt;&lt;div&gt;private final Class&amp;lt;T&amp;gt; mapperInterface;&lt;/div&gt;&lt;div&gt;private final Map&amp;lt;Method, MapperMethodInvoker&amp;gt; methodCache; &lt;font color=&quot;#3399ff&quot;&gt;//MapperMethodInvoker（核心是MapperMethod）缓存&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fontColor=#000000;arcSize=2;align=left;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="120" y="2367" width="400" height="100" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-31" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-26" target="sPj-nGploxGMAyuYcm76-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-26" value="&amp;nbsp;newInstance(mapperProxy)" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="560" y="1280" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="94C2e1VlCWugmCqxg8EF-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;curved=1;dashed=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-28" target="ZMCkvMuu3y16pFemIggh-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1030" y="1250" />
              <mxPoint x="1030" y="1459" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-28" value="lookup = MethodHandles.Lookup.class.&lt;br style=&quot;font-size: 10px&quot;&gt;getDeclaredConstructor(Class.class, int.class);&lt;br style=&quot;font-size: 10px&quot;&gt;lookupConstructor = lookup;&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;Mapper接口没定义default方法的话不会用到 MethodHandle&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="800" y="1190" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-30" value="&lt;font style=&quot;font-size: 10px&quot;&gt;Proxy.newProxyInstance(&lt;br&gt;mapperInterface.getClassLoader(), &lt;br&gt;new Class[] { &lt;b&gt;mapperInterface&lt;/b&gt; }, &lt;b&gt;mapperProxy&lt;/b&gt;)&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;invoke()内部使用MethodHandle&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="800" y="1270" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-32" value="MapperProxy中最重要的代码是 invoke() -&amp;gt;&amp;nbsp;cachedInvoker()&amp;nbsp; 中&lt;br&gt;return new PlainMethodInvoker(&lt;br&gt;new &lt;b&gt;MapperMethod&lt;/b&gt;(mapperInterface, method, sqlSession.getConfiguration()))" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1030" y="1190" width="360" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-36" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-33" target="sPj-nGploxGMAyuYcm76-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-33" value="&lt;font style=&quot;font-size: 10px&quot;&gt;MapperProxy$invoke()&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="400" y="1440" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-38" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-35" target="sPj-nGploxGMAyuYcm76-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-35" target="ZMCkvMuu3y16pFemIggh-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-35" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;MapperMethodInvoker invoker = cachedInvoker(method)&lt;/span&gt;&lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 8px&quot;&gt;获取缓存的MapperMethod,没有则新建,并缓存到 MapperPrxoy的&lt;/font&gt;&lt;font color=&quot;#3399ff&quot;&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;methodCache&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="560" y="1430" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-53" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-37" target="sPj-nGploxGMAyuYcm76-54" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="780" y="1660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-82" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-37" target="sPj-nGploxGMAyuYcm76-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-37" value="&lt;font&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;invoker.&lt;b&gt;invoke&lt;/b&gt;(proxy, method, args, sqlSession)&lt;/span&gt;&lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 8px&quot;&gt;调用MapperMethod的execute()方法，执行SQL语句并返回结果&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="560" y="1670" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-44" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-39" target="sPj-nGploxGMAyuYcm76-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-47" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-39" target="sPj-nGploxGMAyuYcm76-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-39" value="&lt;font style=&quot;font-size: 10px&quot;&gt;new &lt;b&gt;SqlCommand&lt;/b&gt;(config, mapperInterface, method)&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;包括SQL类型、SQL statement名&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1040" y="1460" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-51" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-41" target="sPj-nGploxGMAyuYcm76-50" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-104" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-41" target="sPj-nGploxGMAyuYcm76-96" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-105" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-41" target="sPj-nGploxGMAyuYcm76-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-107" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-41" target="sPj-nGploxGMAyuYcm76-98" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-108" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-41" target="sPj-nGploxGMAyuYcm76-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-109" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-41" target="sPj-nGploxGMAyuYcm76-100" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-110" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-41" target="sPj-nGploxGMAyuYcm76-101" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-111" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-41" target="sPj-nGploxGMAyuYcm76-102" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-112" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-41" target="sPj-nGploxGMAyuYcm76-103" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-41" value="&lt;font style=&quot;font-size: 10px&quot;&gt;new &lt;b&gt;MethodSignature&lt;/b&gt;(config, mapperInterface, method)&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;方法签名，包括很多执行时的信息&lt;/font&gt;&lt;br style=&quot;font-size: 10px&quot;&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1040" y="1600" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-46" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-43" target="sPj-nGploxGMAyuYcm76-45" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-84" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-43" target="sPj-nGploxGMAyuYcm76-83" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-43" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;div&gt;&lt;b&gt;MappedStatement&lt;/b&gt; ms = &lt;b&gt;resolveMappedStatement&lt;/b&gt;(mapperInterface, methodName, declaringClass,&amp;nbsp;&lt;span&gt;configuration);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;font color=&quot;#3399ff&quot;&gt;从Configuration.mappedStatements查找此Mapper方法对应的Statement&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1240" y="1450" width="240" height="58.75" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-45" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;&lt;div&gt;name = ms.getId();&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;type = ms.getSqlCommandType();&lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 8px&quot;&gt;name: Mapper接口类型+方法名;&lt;br&gt;type: 增、删、改、查、FLUSH (???)&lt;/font&gt;&lt;/div&gt;&lt;/span&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=1" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1270" y="1540" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-49" value="MapperMethod.class" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1065" y="1440" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-50" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;TypeParameterResolver.resolveReturnType(method, mapperInterface)&amp;nbsp;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 9px;&quot;&gt;获取返回结果类型&lt;/font&gt;&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1280" y="1600" width="400" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-56" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-54" target="sPj-nGploxGMAyuYcm76-55" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="920" y="1960" />
              <mxPoint x="920" y="1800" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-62" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-54" target="sPj-nGploxGMAyuYcm76-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-63" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-54" target="sPj-nGploxGMAyuYcm76-58" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-64" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-54" target="sPj-nGploxGMAyuYcm76-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-65" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-54" target="sPj-nGploxGMAyuYcm76-61" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="920" y="1960" />
              <mxPoint x="920" y="2120" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-54" value="command.getType()" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;fontColor=#000000;strokeColor=#000000;rounded=1;arcSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="760" y="1940" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-55" value="&lt;font face=&quot;jetbrains mono, monospace&quot;&gt;&lt;span style=&quot;font-size: 11.2px&quot;&gt;INSERT&lt;/span&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="960" y="1780" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-57" value="&lt;font face=&quot;jetbrains mono, monospace&quot;&gt;&lt;span style=&quot;font-size: 11.2px&quot;&gt;UPDATE&lt;/span&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="960" y="1860" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-58" value="&lt;font face=&quot;jetbrains mono, monospace&quot;&gt;&lt;span style=&quot;font-size: 11.2px&quot;&gt;DELETE&lt;/span&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="960" y="1940" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-67" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-59" target="sPj-nGploxGMAyuYcm76-66" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1120" y="2040" />
              <mxPoint x="1120" y="1960" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-68" value="method.returnsVoid() &amp;amp;&amp;amp; &lt;br style=&quot;font-size: 8px;&quot;&gt;method.hasResultHandler()" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=8;fontColor=#3399FF;" parent="sPj-nGploxGMAyuYcm76-67" vertex="1" connectable="0">
          <mxGeometry x="0.1239" y="-3" relative="1" as="geometry">
            <mxPoint x="17" y="-6" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-73" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-59" target="sPj-nGploxGMAyuYcm76-69" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-77" value="method.returnsMany()" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=8;fontColor=#3399FF;" parent="sPj-nGploxGMAyuYcm76-73" vertex="1" connectable="0">
          <mxGeometry x="0.4289" y="-6" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-74" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-59" target="sPj-nGploxGMAyuYcm76-70" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-78" value="method.returnsMap()" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=8;fontColor=#3399FF;" parent="sPj-nGploxGMAyuYcm76-74" vertex="1" connectable="0">
          <mxGeometry x="0.7304" y="1" relative="1" as="geometry">
            <mxPoint x="-23" y="-9" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-75" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-59" target="sPj-nGploxGMAyuYcm76-71" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-79" value="method.returnsCursor()" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=8;fontColor=#3399FF;" parent="sPj-nGploxGMAyuYcm76-75" vertex="1" connectable="0">
          <mxGeometry x="0.767" relative="1" as="geometry">
            <mxPoint x="-20" y="-10" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-76" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-59" target="sPj-nGploxGMAyuYcm76-72" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-80" value="else" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=8;fontColor=#3399FF;" parent="sPj-nGploxGMAyuYcm76-76" vertex="1" connectable="0">
          <mxGeometry x="0.6877" y="13" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-59" value="&lt;font face=&quot;jetbrains mono, monospace&quot;&gt;&lt;span style=&quot;font-size: 11.2px&quot;&gt;SELECT&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;返回值类型，TODO&lt;/font&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="960" y="2020" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-61" value="&lt;font face=&quot;jetbrains mono, monospace&quot;&gt;&lt;span style=&quot;font-size: 11.2px&quot;&gt;FLUSH&lt;/span&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="960" y="2100" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-66" value="&lt;font face=&quot;jetbrains mono, monospace&quot;&gt;&lt;span style=&quot;font-size: 11.2px&quot;&gt;executeWithResultHandler(&lt;br&gt;sqlSession, args)&lt;/span&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="1940" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-69" value="&lt;font face=&quot;jetbrains mono, monospace&quot;&gt;&lt;span style=&quot;font-size: 11.2px&quot;&gt;executeForMany(&lt;br&gt;sqlSession, args)&lt;/span&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="2000" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-70" value="&lt;font face=&quot;jetbrains mono, monospace&quot;&gt;&lt;span style=&quot;font-size: 11.2px&quot;&gt;executeForMap(&lt;br&gt;sqlSession, args)&lt;/span&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="2060" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-71" value="&lt;font face=&quot;jetbrains mono, monospace&quot;&gt;&lt;span style=&quot;font-size: 11.2px&quot;&gt;executeForCursor(&lt;br&gt;sqlSession, args)&lt;/span&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="2120" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#3399FF;curved=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-72" target="FaMM4MfJ-Ujy_KWEskPM-0" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1420" y="2200" />
              <mxPoint x="1420" y="2065" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-72" value="查找单个结果&lt;br&gt;返回普通类型或Optional.class类型" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1200" y="2180" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-83" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;div&gt;mappedStatements来源&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1520" y="1460" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-85" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sPj-nGploxGMAyuYcm76-86" target="sPj-nGploxGMAyuYcm76-87" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-86" value="&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;MethodSignature&amp;nbsp;&lt;br&gt;数据结构&lt;/span&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="40" y="2507" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-87" value="&lt;div&gt;private final boolean returnsMany; &lt;font color=&quot;#3399ff&quot;&gt;//是否返回多个结果&lt;/font&gt;&lt;/div&gt;&lt;div&gt;private final boolean returnsMap;&lt;/div&gt;&lt;div&gt;private final boolean returnsVoid;&lt;/div&gt;&lt;div&gt;private final boolean returnsCursor;&lt;/div&gt;&lt;div&gt;private final boolean returnsOptional;&lt;/div&gt;&lt;div&gt;private final Class&amp;lt;?&amp;gt; returnType;&lt;/div&gt;&lt;div&gt;private final String mapKey;&lt;/div&gt;&lt;div&gt;private final Integer resultHandlerIndex;&lt;/div&gt;&lt;div&gt;private final Integer rowBoundsIndex;&lt;/div&gt;&lt;div&gt;private final ParamNameResolver paramNameResolver;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fontColor=#000000;arcSize=2;align=left;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="120" y="2567" width="400" height="140" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-96" value="&lt;font&gt;this.returnsVoid = void.class.equals(this.returnType); &lt;font color=&quot;#3399ff&quot;&gt;无返回值&lt;/font&gt;&lt;br style=&quot;font-size: 10px&quot;&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1280" y="1620" width="400" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-97" value="&lt;font style=&quot;font-size: 9px&quot;&gt;this.returnsMany = configuration.getObjectFactory()&lt;br style=&quot;font-size: 9px&quot;&gt;.isCollection(this.returnType) || this.returnType.isArray(); &lt;font color=&quot;#3399ff&quot;&gt;返回集合或数组&lt;/font&gt;&lt;br style=&quot;font-size: 9px&quot;&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1280" y="1640" width="400" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-98" value="&lt;font&gt;this.returnsCursor = Cursor.class.equals(this.returnType); &lt;font color=&quot;#3399ff&quot;&gt;返回Cursor.class&lt;/font&gt;&lt;br style=&quot;font-size: 10px&quot;&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1280" y="1660" width="400" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-99" value="&lt;font&gt;this.returnsOptional = Optional.class.equals(this.returnType); &lt;font color=&quot;#3399ff&quot;&gt;返回Optional.class&lt;/font&gt;&lt;br style=&quot;font-size: 10px&quot;&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1280" y="1680" width="400" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-100" value="&lt;font style=&quot;font-size: 8px&quot;&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;this.mapKey = getMapKey(method);&lt;/div&gt;&lt;div style=&quot;font-size: 8px&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; this.returnsMap = this.mapKey != null;&amp;nbsp; &lt;font color=&quot;#3399ff&quot;&gt;@MapKey注解的值 ？？？&lt;/font&gt;&lt;/div&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1280" y="1700" width="400" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-101" value="&lt;font style=&quot;font-size: 9px&quot;&gt;this.rowBoundsIndex = getUniqueParamIndex(method, RowBounds.class); &lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 9px&quot;&gt;获取method RowBounds类型参数索引 ？？？&lt;/font&gt;&lt;br style=&quot;font-size: 11px&quot;&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1280" y="1720" width="400" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-102" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;this.resultHandlerIndex = getUniqueParamIndex(method, ResultHandler.class);&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 9px;&quot;&gt;获取method ResultHandler类型参数索引 ？？？&lt;/font&gt;&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1280" y="1740" width="400" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-103" value="&lt;font style=&quot;font-size: 9px;&quot;&gt;this.paramNameResolver = new ParamNameResolver(configuration, method);&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 9px;&quot;&gt;处理@Param注解的参数 ？？？&lt;/font&gt;&lt;br style=&quot;font-size: 9px;&quot;&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1280" y="1760" width="400" height="20" as="geometry" />
        </mxCell>
        <mxCell id="sPj-nGploxGMAyuYcm76-113" value="MapperMethod.class" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1065" y="1580" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-3" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-0" target="FaMM4MfJ-Ujy_KWEskPM-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-0" value="return paramNameResolver&lt;br&gt;.getNamedParams(args)&lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 9px&quot;&gt;获取命名的参数？如果参数有多个返回参数Map ...&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#b85450;rounded=1;arcSize=8;fillColor=#f8cecc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1460" y="2040" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-5" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-2" target="FaMM4MfJ-Ujy_KWEskPM-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-7" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-2" target="FaMM4MfJ-Ujy_KWEskPM-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-2" value="result = &lt;b&gt;sqlSession&lt;/b&gt;.&lt;b&gt;selectOne&lt;/b&gt;(&lt;br&gt;command.getName(), param)&lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 9px&quot;&gt;name是接口类全路径加上方法名&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#b85450;rounded=1;arcSize=8;fillColor=#f8cecc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1460" y="2120" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-4" value="如果返回Optional.class类型&lt;br&gt;结果封装一下&lt;br style=&quot;font-size: 9px&quot;&gt;Optional.ofNullable(result)" style="whiteSpace=wrap;html=1;fontSize=9;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1460" y="2190" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#3399FF;strokeColor=#000000;elbow=vertical;curved=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-6" target="FaMM4MfJ-Ujy_KWEskPM-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-6" value="selectList(statement, parameter)" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1640" y="2120" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-8" value="DefaultSqlSession" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#3399FF;fontStyle=1" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1650" y="2100" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-14" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#3399FF;strokeColor=#000000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-11" target="FaMM4MfJ-Ujy_KWEskPM-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-11" value="&lt;b&gt;selectList&lt;/b&gt;(statement, parameter, rowBounds, Executor.NO_RESULT_HANDLER)&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;RowBounds.DEFAULT&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1800" y="2115" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-16" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#3399FF;strokeColor=#000000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-13" target="FaMM4MfJ-Ujy_KWEskPM-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-13" value="MappedStatement&lt;span style=&quot;font-weight: normal&quot;&gt; ms = configuration&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;.getMappedStatement(statement)&lt;/span&gt;&lt;br&gt;&lt;font style=&quot;font-size: 8px&quot; color=&quot;#3399ff&quot;&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;使用方法名换取之前解析XML创建的&lt;/span&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;mappedStatements中的MappedStatement对象&lt;/span&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#d6b656;rounded=1;arcSize=8;fontStyle=1;fillColor=#fff2cc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2000" y="2110" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-22" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;strokeColor=#000000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-15" target="FaMM4MfJ-Ujy_KWEskPM-21" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2210" y="2219" />
              <mxPoint x="2210" y="2140" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-15" value="executor&lt;span style=&quot;font-weight: 400&quot;&gt;.query(ms, wrapCollection(parameter), rowBounds, handler)&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#b85450;rounded=1;arcSize=8;fontStyle=1;fillColor=#f8cecc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2000" y="2199" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-20" value="CachingExecutor" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#3399FF;fontStyle=1" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2285" y="2095" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-24" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;strokeColor=#000000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-21" target="FaMM4MfJ-Ujy_KWEskPM-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-21" value="&lt;span style=&quot;font-weight: 400&quot;&gt;BoundSql boundSql = ms.getBoundSql(parameterObject);&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;基本包含SQL所有信息:sql语句、参数映射、参数值&lt;/font&gt;&lt;br&gt;&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#d6b656;rounded=1;arcSize=8;fontStyle=1;fillColor=#fff2cc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2240" y="2115" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-26" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;strokeColor=#000000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-23" target="FaMM4MfJ-Ujy_KWEskPM-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-23" value="&lt;font&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;CacheKey key = &lt;/span&gt;createCacheKey&lt;span style=&quot;font-weight: 400&quot;&gt;(ms, parameterObject, rowBounds, boundSql)&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#3399ff&quot; size=&quot;1&quot;&gt;&lt;span style=&quot;font-weight: 400 ; font-size: 9px&quot;&gt;创建缓存的Key,内容和BoundSql差不多，后面查缓存时用的&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#b85450;rounded=1;arcSize=8;fontStyle=1;fillColor=#f8cecc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2240" y="2191" width="180" height="59" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-28" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;strokeColor=#000000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-25" target="FaMM4MfJ-Ujy_KWEskPM-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2450" y="2300" />
              <mxPoint x="2450" y="2140" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-25" value="query&lt;span style=&quot;font-weight: 400&quot;&gt;(ms, parameterObject, rowBounds, resultHandler, key, boundSql)&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2240" y="2280" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-11" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-27" target="9RbiF7Askb06rhWkXzBX-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-27" value="&lt;span style=&quot;font-weight: 400&quot;&gt;Cache cache = ms.getCache()&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;if (cache != null) ：&lt;/span&gt;&lt;br&gt;List&amp;lt;E&amp;gt; list = (List&amp;lt;E&amp;gt;) tcm.getObject(cache, key);&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;即先尝试从&lt;/span&gt;二级缓存&lt;span style=&quot;font-weight: normal&quot;&gt;获取&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 8px&quot;&gt;Configuration -&amp;gt; mappedStatements(Map) -&amp;gt; MappedStatement -&amp;gt; Cache&lt;/font&gt;&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#b85450;rounded=1;arcSize=8;fontStyle=1;fillColor=#f8cecc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2480" y="2100" width="260" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-24" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-29" target="ZMCkvMuu3y16pFemIggh-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-14" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-29" target="9RbiF7Askb06rhWkXzBX-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-29" value="&lt;span style=&quot;font-weight: normal&quot;&gt;list = &lt;/span&gt;delegate.query&lt;span style=&quot;font-weight: 400&quot;&gt;(ms, parameterObject, rowBounds, resultHandler, key, boundSql)&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2760" y="2201" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-34" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;strokeColor=#000000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-31" target="FaMM4MfJ-Ujy_KWEskPM-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-23" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-31" target="9RbiF7Askb06rhWkXzBX-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-31" value="&lt;span style=&quot;font-weight: normal&quot;&gt;list = &lt;/span&gt;queryFromDatabase&lt;span style=&quot;font-weight: normal&quot;&gt;(ms, parameter, rowBounds, resultHandler, key, boundSql)&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#d6b656;rounded=1;arcSize=8;fontStyle=1;fillColor=#fff2cc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3180" y="2351" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-36" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;strokeColor=#000000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-33" target="FaMM4MfJ-Ujy_KWEskPM-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-39" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-33" target="ZMCkvMuu3y16pFemIggh-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-33" value="&lt;div&gt;localCache&lt;span style=&quot;font-weight: 400&quot;&gt;.putObject(key, EXECUTION_PLACEHOLDER);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;try {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;&amp;nbsp; &amp;nbsp; list = &lt;/span&gt;doQuery&lt;span style=&quot;font-weight: 400&quot;&gt;(ms, parameter, rowBounds, resultHandler, boundSql);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;} finally {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;localCache&lt;span style=&quot;font-weight: 400&quot;&gt;.removeObject(key);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;EXECUTION_PLACEHOLDER用于标识此key的缓存正在更新&lt;/font&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#b85450;rounded=1;arcSize=8;fontStyle=1;fillColor=#f8cecc;align=left;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3400" y="2320" width="280" height="100" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-38" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;strokeColor=#000000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-35" target="FaMM4MfJ-Ujy_KWEskPM-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-43" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-35" target="ZMCkvMuu3y16pFemIggh-42" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3960" y="2371" />
              <mxPoint x="3960" y="2319" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-35" value="&lt;span style=&quot;font-weight: 400&quot;&gt;StatementHandler handler = configuration.&lt;/span&gt;newStatementHandler&lt;span style=&quot;font-weight: 400&quot;&gt;(&lt;br&gt;wrapper, ms, parameter, rowBounds, resultHandler, boundSql);&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#d6b656;rounded=1;arcSize=8;fontStyle=1;fillColor=#fff2cc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3760" y="2346" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-40" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;strokeColor=#000000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-37" target="FaMM4MfJ-Ujy_KWEskPM-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-49" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-37" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3980" y="2431" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-37" value="&lt;span style=&quot;font-weight: 400&quot;&gt;stmt = &lt;/span&gt;prepareStatement&lt;span style=&quot;font-weight: 400&quot;&gt;(handler, ms.getStatementLog());&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#d6b656;rounded=1;arcSize=8;fontStyle=1;fillColor=#fff2cc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3760" y="2431" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-42" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;strokeColor=#000000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-39" target="FaMM4MfJ-Ujy_KWEskPM-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-6" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-39" target="9RbiF7Askb06rhWkXzBX-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-39" value="&lt;span style=&quot;font-weight: 400&quot;&gt;handler.&lt;/span&gt;query&lt;span style=&quot;font-weight: 400&quot;&gt;(stmt, resultHandler);&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;RoutingStatementHandler.class&lt;/font&gt;&lt;br&gt;&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=8;fontStyle=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3760" y="2496" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-44" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#3399FF;strokeColor=#000000;elbow=vertical;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="FaMM4MfJ-Ujy_KWEskPM-41" target="FaMM4MfJ-Ujy_KWEskPM-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-41" value="&lt;span style=&quot;font-weight: 400&quot;&gt;PreparedStatement ps = (PreparedStatement) statement;&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;ps.execute();&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;进入到JDBC代码执行并返回结果&lt;/font&gt;&lt;br&gt;&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#d6b656;rounded=1;arcSize=8;fontStyle=1;fillColor=#fff2cc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3980" y="2491" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-43" value="&lt;font style=&quot;font-size: 9px&quot;&gt;resultSetHandler&lt;/font&gt;&lt;span style=&quot;font-weight: 400 ; font-size: 9px&quot;&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;.handleResultSets(ps)&lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 9px&quot;&gt;DefaultResultSetHandler处理结果集数据&lt;/font&gt;&lt;/font&gt;&lt;br&gt;&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#d6b656;rounded=1;arcSize=8;fontStyle=1;fillColor=#fff2cc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3980" y="2561" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-45" value="PreparedStatementHandler.class" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="4005" y="2471" width="130" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FaMM4MfJ-Ujy_KWEskPM-46" value="BaseExecutor.class" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3025" y="2242" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-0" value="&lt;font color=&quot;#3399ff&quot;&gt;这之前还有一步判断：&lt;br style=&quot;font-size: 8px&quot;&gt;调用的方法是否是Object类声明的，&lt;br&gt;不过基本不可能走这一步，略&lt;br&gt;&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="400" y="1480" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;curved=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-3" target="ZMCkvMuu3y16pFemIggh-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-7" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="880" y="1480" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-3" value="m.isDefault()&lt;br style=&quot;font-size: 10px;&quot;&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-size: 10px;&quot;&gt;是否是 default方法&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;rounded=1;fontSize=10;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="760" y="1420" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-5" value="&amp;nbsp;new DefaultMethodInvoker()" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="880" y="1380" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-9" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-8" target="sPj-nGploxGMAyuYcm76-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-8" value="new PlainMethodInvoker(new &lt;b&gt;MapperMethod&lt;/b&gt;(mapperInterface, method, sqlSession.getConfiguration()));" style="whiteSpace=wrap;html=1;fontSize=8;rounded=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="880" y="1459.38" width="120" height="40.62" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-15" value="&lt;b&gt;缓存过期机制&lt;/b&gt;：&lt;br&gt;缓存结果为null，还是会走后面的代理查询逻辑&lt;br&gt;那么何时缓存的结果会被清除？&amp;nbsp;insert、update 和 delete 语句执行后会刷新缓存；同时默认使用LRU机制清除不需要的缓存" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2780" y="2105" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-17" value="&lt;b&gt;TransactionalCacheManager&lt;/b&gt; 在后面执行SQL查询前会用到，先从缓存中查，没有再执行SQL；&lt;br&gt;内部集成了事务操作，这个抽离出一个单元测试看吧" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1230" y="1040" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-19" value="&lt;b&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;梳理进度&lt;/font&gt;&lt;/b&gt;&lt;br style=&quot;font-size: 9px&quot;&gt;&lt;br style=&quot;font-size: 9px&quot;&gt;&lt;b style=&quot;font-size: 9px&quot;&gt;1） “select”主线的逻辑，包括&lt;/b&gt;&lt;br style=&quot;font-size: 9px&quot;&gt;&lt;ul style=&quot;font-size: 9px&quot;&gt;&lt;li style=&quot;font-size: 9px&quot;&gt;&lt;b style=&quot;font-weight: bold ; font-size: 9px&quot;&gt;XML解析 &lt;/b&gt;（将xml配置解析到Configuaraion全局配置对象[不是静态类，很多对象都包含其引用]，包含很多xml指定的和默认的配置）&lt;/li&gt;&lt;li style=&quot;font-size: 9px&quot;&gt;&lt;b style=&quot;font-weight: bold ; font-size: 9px&quot;&gt;插件原理 &lt;/b&gt;（JDK Proxy 装饰者模式，形式为通过拦截器链进行代理装饰）&lt;/li&gt;&lt;li style=&quot;font-size: 9px&quot;&gt;&lt;b&gt;Mapper动态代理&lt;/b&gt; （SQL执行入口，内部构造Sql参数、Statement、使用executor执行、将结果集映射到Mapper接口返回类型对象）&lt;br&gt;关于动态代理逻辑已抽离到了测试，参考：top.kwseeker.mybatis.analysis.proxy.MethodHandleTest&lt;/li&gt;&lt;li&gt;&lt;b&gt;缓存机制&amp;nbsp;&amp;nbsp;&lt;/b&gt;（两级缓存 session / namespace，说三级缓存的是把redis等第三方缓存算进来了）&lt;br&gt;由源码可知这两级缓存在分布式场景下都存在“可能出现脏数据的”问题，需要注意。&lt;br&gt;可以通过设置 LocalCacheScope.STATEMENT 关闭一级缓存，或者通过设置 flushCache =“true” 关闭单个SQL语句的一级缓存。&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;TODO:&lt;/div&gt;&lt;ul&gt;&lt;li style=&quot;font-size: 9px&quot;&gt;RoutingStatementHandler执行详细流程（StatementHandler、ParameterHandler、ResultSetHandler、连接池）&lt;/li&gt;&lt;li&gt;缓存的LRU机制&lt;/li&gt;&lt;li style=&quot;font-size: 9px&quot;&gt;复杂关联查询的原理：一对多、多对多映射&lt;/li&gt;&lt;li style=&quot;font-size: 9px&quot;&gt;延迟加载、动态SQL&lt;/li&gt;&lt;li style=&quot;font-size: 9px&quot;&gt;常用插件实现原理（分页插件、乐观锁插件）&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="800" y="40" width="600" height="240" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-20" value="二级缓存，全局缓存，&lt;br&gt;通过&amp;lt;cache/&amp;gt;标签配置开启" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2545" y="2070" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-26" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-23" target="ZMCkvMuu3y16pFemIggh-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-27" value="Y" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#3399FF;" parent="ZMCkvMuu3y16pFemIggh-26" vertex="1" connectable="0">
          <mxGeometry x="-0.2434" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="BK6uqOB74IsekC5S0Vyd-0" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-23" target="ZMCkvMuu3y16pFemIggh-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-23" value="&lt;span style=&quot;font-weight: normal ; font-size: 8px&quot;&gt;queryStack == 0 &amp;amp;&amp;amp; ms.isFlushCacheRequired()&lt;br&gt;&lt;/span&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3010" y="2196" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-25" value="&lt;span style=&quot;font-weight: normal&quot;&gt;clearLocalCache();&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;清理一级缓存&lt;/font&gt;&lt;br&gt;&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3230" y="2201" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-32" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-29" target="ZMCkvMuu3y16pFemIggh-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-29" value="&lt;span style=&quot;font-weight: 400&quot;&gt;list = resultHandler == null ? (List&amp;lt;E&amp;gt;) localCache.&lt;/span&gt;getObject&lt;span style=&quot;font-weight: 400&quot;&gt;(key) : null&lt;br&gt;&lt;/span&gt;&lt;font color=&quot;#3399ff&quot;&gt;从一级缓存（本地缓存）&lt;/font&gt;&lt;span style=&quot;color: rgb(51 , 153 , 255) ; font-weight: 400&quot;&gt;获取&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#b85450;rounded=1;arcSize=8;fontStyle=1;fillColor=#f8cecc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2980" y="2262" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-33" value="Y,不为空" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#3399FF;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-31" target="ZMCkvMuu3y16pFemIggh-34" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3400" y="2282" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-36" value="N" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-31" target="FaMM4MfJ-Ujy_KWEskPM-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-31" value="&lt;span style=&quot;font-weight: normal ; font-size: 9px&quot;&gt;list != null ?&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;一级缓存&lt;br&gt;此key是否为空&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;font-family: monospace ; font-weight: 400 ; font-size: 0px&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22%26lt%3Bspan%20style%3D%26quot%3Bfont-weight%3A%20normal%26quot%3B%26gt%3BqueryStack%20%3D%3D%200%20%26amp%3Bamp%3B%26amp%3Bamp%3B%20ms.isFlushCacheRequired()%26lt%3B%2Fspan%26gt%3B%22%20style%3D%22rhombus%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfontSize%3D10%3BstrokeColor%3D%23000000%3BfontColor%3D%23000000%3Brounded%3D1%3BarcSize%3D8%3BfontStyle%3D1%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%222730%22%20y%3D%222185%22%20width%3D%22120%22%20height%3D%2250%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;&lt;br&gt;&lt;/span&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3210" y="2257" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-34" value="&lt;span style=&quot;font-weight: 400&quot;&gt;handleLocallyCachedOutputParameters(&lt;br&gt;ms, key, parameter, boundSql)&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3400" y="2262" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-37" value="它的基类里面创建了&lt;b&gt;二级缓存&lt;/b&gt;（namespace）&lt;br&gt;this.localCache = new &lt;b&gt;PerpetualCache&lt;/b&gt;(&quot;LocalCache&quot;)&lt;br&gt;后面执行SQL查询会用到" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1241" y="970" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-38" value="&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;localCache&lt;/span&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;.&lt;/span&gt;&lt;span&gt;putObject&lt;/span&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;(key, list);&lt;/span&gt;&lt;/div&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;&lt;font&gt;&lt;div style=&quot;text-align: left&quot;&gt;if (ms.getStatementType() == StatementType.CALLABLE) {&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; localOutputParameterCache.putObject(key, parameter);&lt;br&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;&lt;span&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;&lt;font color=&quot;#007fff&quot;&gt;即更新本地缓存和参数缓存&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#b85450;rounded=1;arcSize=8;fontStyle=1;fillColor=#f8cecc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3400" y="2440" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-41" value="后面几步都是在与JDBC打交道" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3780" y="2326" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-45" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-42" target="ZMCkvMuu3y16pFemIggh-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-42" value="&lt;span style=&quot;font-weight: 400&quot;&gt;new &lt;/span&gt;RoutingStatementHandler&lt;span style=&quot;font-weight: 400&quot;&gt;(...)&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3990" y="2291" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-44" value="&lt;font style=&quot;font-size: 9px&quot;&gt;statementHandler&lt;span style=&quot;font-weight: 400&quot;&gt; = (StatementHandler) interceptorChain.pluginAll(statementHandler);&lt;/span&gt;&lt;br&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;font-weight: 400&quot;&gt;插入插件拦截器功能&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#B09500;rounded=1;arcSize=8;fontStyle=1;fillColor=#e3c800;fontColor=#000000;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3980" y="2351" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-53" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-50" target="ZMCkvMuu3y16pFemIggh-52" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="4280" y="2431" />
              <mxPoint x="4280" y="2351" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-60" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-50" target="ZMCkvMuu3y16pFemIggh-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-62" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=9;fontColor=#3399FF;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-50" target="ZMCkvMuu3y16pFemIggh-63" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="4300" y="2481" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-50" value="&lt;div&gt;Connection&lt;span style=&quot;font-weight: normal&quot;&gt; connection = getConnection(statementLog);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;stmt = handler.prepare(&lt;/span&gt;connection&lt;span style=&quot;font-weight: normal&quot;&gt;, transaction.getTimeout());&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;handler.parameterize(stmt);&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3980" y="2401" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-55" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-52" target="ZMCkvMuu3y16pFemIggh-54" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-52" value="JdbcTransaction&lt;span style=&quot;font-weight: 400&quot;&gt;$&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;openConnection()&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="4300" y="2331" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-57" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-54" target="ZMCkvMuu3y16pFemIggh-56" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-54" value="PooledDataSource&lt;span style=&quot;font-weight: 400&quot;&gt;$&lt;br&gt;getConnection()&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="4460" y="2331" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-56" value="popConnection&lt;span style=&quot;font-weight: 400&quot;&gt;(dataSource.getUsername(), dataSource.getPassword())&lt;br&gt;.getProxyConnection()&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#82b366;rounded=1;arcSize=8;fontStyle=1;fillColor=#d5e8d4;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="4620" y="2331" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-58" value="这里展示了Mybatis怎么配置JDBC连接参数的&lt;br&gt;以及连接池的实现" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="4630" y="2306" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="pBM-6k7lNjpTZ7rBvnHI-4" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=8;fontColor=#007FFF;strokeColor=#330000;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="ZMCkvMuu3y16pFemIggh-59" target="pBM-6k7lNjpTZ7rBvnHI-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-59" value="&lt;div&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;statement = instantiateStatement(connection);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;setStatementTimeout(statement, transactionTimeout);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;setFetchSize(statement);&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1;align=left;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="4300" y="2406" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-63" value="parameterHandler&lt;span style=&quot;font-weight: 400&quot;&gt;.setParameters(&lt;br&gt;(PreparedStatement) statement);&lt;br&gt;&lt;font color=&quot;#3399ff&quot;&gt;参数映射类型转换等等&lt;/font&gt;&lt;br&gt;&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1;align=left;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="4300" y="2491" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ZMCkvMuu3y16pFemIggh-65" value="里面还有很多细节，&lt;br&gt;比如Mapper是继承来的相应处理；" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="4170" y="2561" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-0" value="&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;总结：主要分为两部分：&lt;br&gt;1）创建XMLConfigBuilder解析配置文件（解析过程中还会解析配置中指定的Mapper XML文件、Mapper接口文件），将内容填充到全局的Configuration对象&lt;br&gt;2）创建默认的SqlSession工厂&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; text-align: center&quot;&gt;DefaultSqlSessionFactory（工厂本质还是Configuration对象）&lt;/span&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&lt;br&gt;&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="40" y="460" width="310" height="80" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-2" value="org.apache.ibatis.builder.xml.XMLConfigBuilder" style="swimlane;fontSize=10;fontColor=#007FFF;startSize=20;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-400" y="400" width="400" height="200" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-3" value="&lt;div&gt;&lt;div&gt;//是否已经解析过&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;parsed = true&lt;/div&gt;&lt;div&gt;//XML文件解析器&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;parser = {XPathParser@1004}&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;environment = null&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;localReflectorFactory = {DefaultReflectorFactory@1261}&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;configuration = {Configuration@1258}&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;typeAliasRegistry = {TypeAliasRegistry@1259}&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;typeHandlerRegistry = {TypeHandlerRegistry@1260}&amp;nbsp;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="o2derX1fehIm7PfuiJEg-2" vertex="1">
          <mxGeometry y="20" width="400" height="180" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-4" value="org.apache.ibatis.session.Configuration" style="swimlane;fontSize=10;fontColor=#007FFF;startSize=20;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-1120" y="400" width="640" height="720" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-5" value="&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected Environment environment;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected boolean safeRowBoundsEnabled;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected boolean safeResultHandlerEnabled;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected boolean mapUnderscoreToCamelCase;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected boolean aggressiveLazyLoading;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected boolean multipleResultSetsEnabled;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected boolean useGeneratedKeys;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected boolean useColumnLabel;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected boolean cacheEnabled;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected boolean callSettersOnNulls;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected boolean useActualParamName;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected boolean returnInstanceForEmptyRow;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected boolean shrinkWhitespacesInSql;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected boolean nullableOnForEach;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected String logPrefix;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected Class&amp;lt;? extends Log&amp;gt; logImpl;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected Class&amp;lt;? extends VFS&amp;gt; vfsImpl;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected Class&amp;lt;?&amp;gt; defaultSqlProviderType;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected LocalCacheScope localCacheScope;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected JdbcType jdbcTypeForNull;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected Set&amp;lt;String&amp;gt; lazyLoadTriggerMethods;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected Integer defaultStatementTimeout;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected Integer defaultFetchSize;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected ResultSetType defaultResultSetType;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected ExecutorType defaultExecutorType;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected AutoMappingBehavior autoMappingBehavior;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected AutoMappingUnknownColumnBehavior autoMappingUnknownColumnBehavior;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected Properties variables;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected ReflectorFactory reflectorFactory;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected ObjectFactory objectFactory;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected ObjectWrapperFactory objectWrapperFactory;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected boolean lazyLoadingEnabled;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected ProxyFactory proxyFactory;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected String databaseId;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected Class&amp;lt;?&amp;gt; configurationFactory;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final MapperRegistry&amp;nbsp;&lt;b&gt;mapperRegistry&lt;/b&gt;;&lt;font color=&quot;#3399ff&quot;&gt;&amp;nbsp;//包含 DAO层定义的Mapper接口-&amp;gt;MapperProxyFactory的HashMap（knownMappers）&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final InterceptorChain interceptorChain;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//插件拦截器链&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final TypeHandlerRegistry typeHandlerRegistry;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final TypeAliasRegistry&amp;nbsp;&lt;b&gt;typeAliasRegistry&lt;/b&gt;;&lt;font color=&quot;#3399ff&quot;&gt;//Java类型别名注册表HashMap(String-&amp;gt;Class&amp;lt;?&amp;gt;)&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final LanguageDriverRegistry languageRegistry;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final Map&amp;lt;String, MappedStatement&amp;gt;&amp;nbsp;&lt;b&gt;mappedStatements&lt;/b&gt;;&lt;span&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#3399ff&quot;&gt;//namespace -&amp;gt; MappedStatement&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final Map&amp;lt;String, Cache&amp;gt;&amp;nbsp;&lt;b&gt;caches&lt;/b&gt;;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//缓存实现实例Map(namespace-&amp;gt;? extend Cache),每个配置了缓存的namespace都有自己的缓存实现&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final Map&amp;lt;String, ResultMap&amp;gt; resultMaps;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final Map&amp;lt;String, ParameterMap&amp;gt; parameterMaps;&lt;span&gt;&#x9;&lt;/span&gt;&lt;font color=&quot;#3399ff&quot;&gt;//弃用的属性，略&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final Map&amp;lt;String, KeyGenerator&amp;gt; keyGenerators;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final Set&amp;lt;String&amp;gt;&amp;nbsp;&lt;b&gt;loadedResources&lt;/b&gt;;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//已经加载过的Mapper资源文件路径&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final Map&amp;lt;String, XNode&amp;gt;&amp;nbsp;&lt;b&gt;sqlFragments&lt;/b&gt;;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//HashMap (String-&amp;gt;XNode) 公共sql片段&lt;/font&gt;&lt;/div&gt;&lt;span style=&quot;color: rgb(51 , 153 , 255)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final Collection&amp;lt;XMLStatementBuilder&amp;gt;&amp;nbsp;&lt;b&gt;incompleteStatements&lt;/b&gt;;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//用于解析Statement配置以及构造可执行的Statement语句的工具（既是解析器又是构造器）&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final Collection&amp;lt;ResultMapResolver&amp;gt;&amp;nbsp;&lt;b&gt;incompleteResultMaps&lt;/b&gt;;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//结果映射构造器&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final Collection&amp;lt;MethodResolver&amp;gt;&amp;nbsp;&lt;b&gt;incompleteMethods&lt;/b&gt;;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//用于解析注解形式定义的Statement配置以及构造可执行Statement语句的工具（既是解析器又是构造器&lt;/font&gt;）&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final Collection&amp;lt;CacheRefResolver&amp;gt;&amp;nbsp;&lt;b&gt;incompleteCacheRefs&lt;/b&gt;;&lt;font color=&quot;#3399ff&quot;&gt;//包括CacheRefResolver（？）&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected final Map&amp;lt;String, String&amp;gt;&amp;nbsp;&lt;b&gt;cacheRefMap&lt;/b&gt;;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//缓存配置引用，namespace-&amp;gt;referencedNamespace, 即命名空间指向被引用的命名空间的HashMap (HashMap的话，也就是说最多只能引用一个)&lt;/font&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="o2derX1fehIm7PfuiJEg-4" vertex="1">
          <mxGeometry y="20" width="640" height="700" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-6" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=-0.002;exitY=0.636;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="o2derX1fehIm7PfuiJEg-3" target="o2derX1fehIm7PfuiJEg-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-440" y="534" />
              <mxPoint x="-440" y="400" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-7" value="org.apache.ibatis.transaction.jdbc.JdbcTransaction" style="swimlane;fontSize=10;fontColor=#007FFF;startSize=20;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-400" y="640" width="400" height="140" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-8" value="&lt;div&gt;事务对象是抽象的概念，是对一组操作的定义（获取连接、开关自动提交、提交、回滚、关闭连接、获取事务超时时间）。&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;connection = null&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;dataSource = {PooledDataSource@1894}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;level = null&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; white-space: pre&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; white-space: pre&quot;&gt;&#x9;&lt;/span&gt;//事务隔离级别&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;autoCommit = true&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; white-space: pre&quot;&gt;&#x9;&lt;/span&gt;//是否开启自动提交&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="o2derX1fehIm7PfuiJEg-7" vertex="1">
          <mxGeometry y="20" width="400" height="120" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-10" value="&lt;span style=&quot;font-size: 12px&quot;&gt;&lt;b&gt;注意透过类对象看本质（以JDBC Driver为例）&lt;/b&gt;&lt;/span&gt;&lt;br style=&quot;font-size: 9px&quot;&gt;&lt;br style=&quot;font-size: 9px&quot;&gt;&lt;b style=&quot;font-size: 10px&quot;&gt;1）事务 （定义了事务相关的一组操作）&lt;br&gt;2）SQL执行器 Executor （封装了事务、缓存、插件增强逻辑，定义SQL执行相关的一组操作：创建statement、增删改查等）&lt;br&gt;3）会话SqlSession (封装了Configuration、Executor对象，定义了获取连接、SQL执行的操作)&lt;br&gt;4）Mapper代理&lt;br&gt;4.1）MapperProxy 定义增强逻辑（就是结合Mapper xml内容，根据增删改查的类型，创建Statement、sql入参并执行）&lt;br&gt;4.2） MapperMethod 定义了增强逻辑的主体&lt;br&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-480" y="80" width="480" height="160" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-11" value="org.apache.ibatis.executor" style="swimlane;fontSize=10;fontColor=#007FFF;startSize=20;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-400" y="820" width="400" height="280" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-12" value="&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&lt;b&gt;ReuseExecutor&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private final Map&amp;lt;String, Statement&amp;gt; statementMap = new HashMap&amp;lt;&amp;gt;();&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&lt;b&gt;SimpleExecutor&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&lt;b&gt;BatchExecutor&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&lt;div&gt;private final List&amp;lt;Statement&amp;gt; statementList = new ArrayList&amp;lt;&amp;gt;();&lt;/div&gt;&lt;div&gt;private final List&amp;lt;BatchResult&amp;gt; batchResultList = new ArrayList&amp;lt;&amp;gt;();&lt;/div&gt;&lt;div&gt;private String currentSql;&lt;/div&gt;&lt;div&gt;private MappedStatement currentStatement;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&lt;b&gt;基类&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&lt;b&gt;BaseExecutor&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected Transaction &lt;b&gt;transaction&lt;/b&gt;;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//比如JDBCTransaction&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected Executor &lt;b&gt;wrapper&lt;/b&gt;;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//子类实例&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected ConcurrentLinkedQueue&amp;lt;DeferredLoad&amp;gt; deferredLoads;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected PerpetualCache &lt;b&gt;localCache&lt;/b&gt;;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//一级缓存&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected PerpetualCache localOutputParameterCache;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//给CallableStatement使用&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected Configuration configuration;&lt;font color=&quot;#3399ff&quot;&gt;//即解析阶段的Configuration对象&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;protected int queryStack;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private boolean closed;&lt;font color=&quot;#3399ff&quot;&gt;//状态&lt;/font&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="o2derX1fehIm7PfuiJEg-11" vertex="1">
          <mxGeometry y="20" width="400" height="260" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-13" value="org.apache.ibatis.session.defaults.DefaultSqlSession" style="swimlane;fontSize=10;fontColor=#007FFF;startSize=20;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-400" y="1140" width="400" height="120" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-14" value="&lt;div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&lt;b&gt;configuration&lt;/b&gt; = {Configuration@1258}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;executor&lt;/b&gt;&lt;font color=&quot;#000000&quot;&gt; = {CachingExecutor@2124}&amp;nbsp;&amp;nbsp;&lt;/font&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; white-space: pre&quot;&gt;&#x9;&lt;/span&gt;//前面创建的Sql执行器对象&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;autoCommit = true&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;dirty = false&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;cursorList = null&lt;/div&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="o2derX1fehIm7PfuiJEg-13" vertex="1">
          <mxGeometry y="20" width="400" height="100" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-15" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=-0.004;exitY=0.387;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="o2derX1fehIm7PfuiJEg-14" target="o2derX1fehIm7PfuiJEg-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-430" y="1199" />
              <mxPoint x="-430" y="820" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-16" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=0.999;entryY=0.956;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=10;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="o2derX1fehIm7PfuiJEg-14" target="o2derX1fehIm7PfuiJEg-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-17" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.63;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="o2derX1fehIm7PfuiJEg-12" target="o2derX1fehIm7PfuiJEg-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-430" y="1004" />
              <mxPoint x="-430" y="640" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="94C2e1VlCWugmCqxg8EF-0" value="&lt;font style=&quot;font-size: 9px&quot;&gt;&lt;font color=&quot;#000000&quot; style=&quot;font-size: 9px&quot;&gt;1）MapperProxy类定义增强逻辑；增强逻辑主要由MapperMethod定义，主要逻辑是根据前面解析的Mapper xml内容，根据命令类型构造Statement以及参数并执行&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#000000&quot; style=&quot;font-size: 9px&quot;&gt;2）通过JDK动态代理对DAO层Mapper接口进行增强生成实体对象；&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#000000&quot; style=&quot;font-size: 9px&quot;&gt;&lt;br&gt;这部分代码已经抽离到了&lt;br&gt;top.kwseeker.mybatis.analysis.proxy.MethodHandleTest&lt;/font&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="40" y="1250" width="220" height="130" as="geometry" />
        </mxCell>
        <mxCell id="94C2e1VlCWugmCqxg8EF-2" value="&lt;font style=&quot;font-size: 10px&quot;&gt;Mapper XML文件解析阶段为每个Mapper接口都定义了一个代理工厂实例&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="520" y="1360" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="o2derX1fehIm7PfuiJEg-1" value="&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;1）创建事务 （当前Demo是JDBCTransaction，是对JDBC事务操作的封装）&lt;br&gt;2）创建SQL执行器（执行器其实是事务、缓存、全局配置类的组合体，如果有启用插件、则通过动态代理给执行器层层包装上插件逻辑）&lt;br&gt;3）创建默认的SqlSession&lt;br&gt;&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="40" y="980" width="349" height="70" as="geometry" />
        </mxCell>
        <mxCell id="94C2e1VlCWugmCqxg8EF-4" value="就是根据命令类型选择不同的处理方式" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="740" y="1675" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-0" value="BaseExecutor" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#3399FF;fontStyle=1" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2810" y="2176" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-1" value="org.apache.ibatis.mapping.MappedStatement" style="swimlane;fontSize=10;fontColor=#007FFF;startSize=20;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-400" y="1300" width="400" height="340" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-2" value="&lt;div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private String resource;&amp;nbsp;&lt;font color=&quot;#007fff&quot;&gt;//xml文件相对路径&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private Configuration configuration;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private String id;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//xml中某CRUD语句, id属性值&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private Integer fetchSize;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private Integer timeout;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private StatementType statementType;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//SQL语句类型, 默认PREPARED&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private ResultSetType resultSetType;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//结果集类型，默认DEFAULT, 其他：&lt;/font&gt;&lt;/div&gt;&lt;font color=&quot;#3399ff&quot; style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;FORWARD_ONLY、SCROLL_INSENSITIVE、SCROLL_SENSITIVE&lt;/font&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private SqlSource sqlSource;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;// RawSqlSource, （包括sql、parameterMappings）&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;private Cache &lt;/font&gt;&lt;b style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;cache&lt;/b&gt;&lt;font color=&quot;#000000&quot;&gt;; &lt;/font&gt;//二级缓存的容器，SynchronizedCache&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private ParameterMap parameterMap;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private List&amp;lt;ResultMap&amp;gt; resultMaps;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private boolean flushCacheRequired;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private boolean&amp;nbsp;&lt;b&gt;useCache&lt;/b&gt;;&amp;nbsp;&amp;nbsp;&lt;font color=&quot;#3399ff&quot;&gt;//是否使用二级缓存&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private boolean resultOrdered;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private SqlCommandType sqlCommandType;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private KeyGenerator keyGenerator;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private String[] keyProperties;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private String[] keyColumns;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private boolean hasNestedResultMaps;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private String databaseId;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private Log statementLog;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private LanguageDriver lang;&lt;/div&gt;&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;private String[] resultSets;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="9RbiF7Askb06rhWkXzBX-1" vertex="1">
          <mxGeometry y="20" width="400" height="320" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.711;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;fontSize=8;curved=1;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="o2derX1fehIm7PfuiJEg-5" target="9RbiF7Askb06rhWkXzBX-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-1140" y="918" />
              <mxPoint x="-1140" y="1210" />
              <mxPoint x="-400" y="1210" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-4" value="&lt;div&gt;示例：&lt;/div&gt;&lt;div&gt;mappedStatements = {Configuration$StrictMap@2341}&amp;nbsp; size = 2&lt;/div&gt;&lt;div&gt;&amp;nbsp;&quot;top.kwseeker.mybatis.analysis.dao.BlogMapper.selectBlog&quot; -&amp;gt; {MappedStatement@2263}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&quot;selectBlog&quot; -&amp;gt; {MappedStatement@2263}&amp;nbsp;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-760" y="1315" width="360" height="50" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-9" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=8;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9RbiF7Askb06rhWkXzBX-5" target="9RbiF7Askb06rhWkXzBX-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-5" value="&lt;span style=&quot;font-weight: 400&quot;&gt;finally:&lt;/span&gt;&lt;br&gt;closeStatement&lt;span style=&quot;font-weight: 400&quot;&gt;(stmt);&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=8;fontStyle=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3760" y="2631" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-8" value="&lt;span style=&quot;font-weight: 400&quot;&gt;statement.close()&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;rounded=1;arcSize=8;fontStyle=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3980" y="2631" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-12" value="Y&lt;br&gt;二级缓存为空" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9RbiF7Askb06rhWkXzBX-10" target="FaMM4MfJ-Ujy_KWEskPM-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-16" value="N" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9RbiF7Askb06rhWkXzBX-10" target="9RbiF7Askb06rhWkXzBX-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-10" value="&lt;span style=&quot;font-weight: normal ; font-size: 8px&quot;&gt;list == null&amp;nbsp;&lt;br&gt;&lt;/span&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2550" y="2196" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-18" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9RbiF7Askb06rhWkXzBX-13" target="9RbiF7Askb06rhWkXzBX-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-13" value="tcm.putObject(cache, key, list)&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 9px&quot;&gt;如果启用了二级缓存，这里更新二级缓存&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#b85450;rounded=1;arcSize=8;fontStyle=1;fillColor=#f8cecc;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2760" y="2280" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-17" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="9RbiF7Askb06rhWkXzBX-15" target="FaMM4MfJ-Ujy_KWEskPM-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-15" value="&lt;span style=&quot;font-weight: normal&quot;&gt;return list;&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;二级缓存不为空直接返回结果&lt;/font&gt;&lt;br&gt;&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2520" y="2291" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-21" value="&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;text-align: center&quot;&gt;isFlushCacheRequired()&amp;nbsp;&lt;/span&gt;&lt;b&gt;即是否 flushCache = true&lt;/b&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3010" y="2160" width="200" height="36" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-22" value="&lt;div&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;if (queryStack == 0)：&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;&amp;nbsp; &amp;nbsp; deferredLoads 处理;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;&amp;nbsp; &amp;nbsp; if (configuration.getLocalCacheScope() == &lt;/span&gt;LocalCacheScope.STATEMENT)&lt;span style=&quot;font-weight: 400&quot;&gt; {&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;clearLocalCache&lt;span style=&quot;font-weight: 400&quot;&gt;();&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;&amp;nbsp; &amp;nbsp; }&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#000000;fontColor=#000000;rounded=1;arcSize=8;fontStyle=1;align=left;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="3165" y="2420.5" width="210" height="79.5" as="geometry" />
        </mxCell>
        <mxCell id="9RbiF7Askb06rhWkXzBX-24" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;如果配置中指定&amp;nbsp; localCacheScope&amp;nbsp; 为&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;span&gt;&lt;font color=&quot;#007fff&quot;&gt;LocalCacheScope.STATEMENT 是会清除一级缓存的&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#3399FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2960" y="2442.25" width="200" height="36" as="geometry" />
        </mxCell>
        <mxCell id="pBM-6k7lNjpTZ7rBvnHI-1" value="MixedSqlNode" style="swimlane;fontSize=10;fontColor=#007FFF;startSize=20;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-520" y="1680" width="520" height="380" as="geometry" />
        </mxCell>
        <mxCell id="pBM-6k7lNjpTZ7rBvnHI-2" value="&lt;div style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;&lt;div&gt;&lt;b&gt;rootSqlNode&lt;/b&gt; = {MixedSqlNode@10948}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;b&gt;contents&lt;/b&gt; = {ArrayList@10949}&amp;nbsp; size = 4&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;b&gt;0&lt;/b&gt; = {StaticTextSqlNode@10951}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;text = &quot;\n\tSELECT user_id,balance&amp;nbsp; FROM &quot;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;b&gt;1&lt;/b&gt; = {ChooseSqlNode@10952}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;defaultSqlNode = {MixedSqlNode@10956}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; contents = {ArrayList@10963}&amp;nbsp; size = 1&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;0 = {StaticTextSqlNode@10965}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; text = &quot;house_coin_account&quot;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;ifSqlNodes = {ArrayList@10957}&amp;nbsp; size = 1&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; 0 = {IfSqlNode@10959}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;evaluator = {ExpressionEvaluator@10960}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;test = &quot;@tk.mybatis.mapper.util.OGNL@isDynamicParameter(_parameter) and dynamicTableName != null and dynamicTableName != &#39;&#39;&quot;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;contents = {MixedSqlNode@10962}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; contents = {ArrayList@11022}&amp;nbsp; size = 1&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;0 = {TextSqlNode@11024}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; text = &quot;${dynamicTableName}\n&quot;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; injectionFilter = null&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;b&gt;2&lt;/b&gt; = {StaticTextSqlNode@10953}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;text = &quot; &quot;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;b&gt;3&lt;/b&gt; = {WhereSqlNode@10954}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;contents = {MixedSqlNode@11017}&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;prefix = &quot;WHERE&quot;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;suffix = null&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;prefixesToOverride = {Arrays$ArrayList@11019}&amp;nbsp; size = 8&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;suffixesToOverride = null&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;configuration = {Configuration@10899}&amp;nbsp;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="pBM-6k7lNjpTZ7rBvnHI-1" vertex="1">
          <mxGeometry y="20" width="520" height="360" as="geometry" />
        </mxCell>
        <mxCell id="pBM-6k7lNjpTZ7rBvnHI-3" value="&lt;span style=&quot;font-weight: 400&quot;&gt;String sql = &lt;/span&gt;boundSql.getSql&lt;span style=&quot;font-weight: 400&quot;&gt;();&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;connection.&lt;/span&gt;prepareStatement&lt;span style=&quot;font-weight: 400&quot;&gt;(sql, mappedStatement.getResultSetType().getValue(), ResultSet.CONCUR_READ_ONLY)&lt;/span&gt;" style="whiteSpace=wrap;html=1;fontSize=10;strokeColor=#82b366;rounded=1;arcSize=8;fontStyle=1;align=left;fillColor=#d5e8d4;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="4580" y="2406" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="cI1GqtmJVXRYIFO9Cu9q-0" value="&lt;font color=&quot;#007fff&quot;&gt;XMLConfigBuilder&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="980" y="500" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="cI1GqtmJVXRYIFO9Cu9q-1" value="XMLConfigBuilder" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1425" y="730" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="cI1GqtmJVXRYIFO9Cu9q-3" value="&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;b&gt;mappedStatements&lt;/b&gt; = {Configuration$StrictMap@2598}&amp;nbsp; size = 4&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp;&quot;&lt;b&gt;top.kwseeker.mybatis.analysis.dao.BlogMapper.selectBlog&lt;/b&gt;&quot; -&amp;gt; {MappedStatement@2717}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp;&quot;&lt;b&gt;top.kwseeker.mybatis.analysis.dao.BlogMapper.updateBlog&lt;/b&gt;&quot; -&amp;gt; {MappedStatement@2719}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp;&quot;&lt;b&gt;selectBlog&lt;/b&gt;&quot; -&amp;gt; {MappedStatement@2717}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; key = &quot;selectBlog&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &lt;b&gt;value&lt;/b&gt; = {&lt;b&gt;MappedStatement&lt;/b&gt;@2717}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;resource = &quot;mapper/BlogMapper.xml&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;configuration = {Configuration@1280}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;&lt;b&gt;id&lt;/b&gt; = &quot;top.kwseeker.mybatis.analysis.dao.BlogMapper.selectBlog&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;fetchSize = null&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;timeout = null&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;statementType = {StatementType@2748} &quot;PREPARED&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;resultSetType = {ResultSetType@2749} &quot;DEFAULT&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;sqlSource = {RawSqlSource@2750}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;b&gt;sqlSource&lt;/b&gt; = {StaticSqlSource@2761}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;sql = &quot;select * from t_blog where id = ?&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;parameterMappings = {ArrayList@2763}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;configuration = {Configuration@1280}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;cache = {SynchronizedCache@2751}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;parameterMap = {ParameterMap@2752}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;resultMaps = {Collections$UnmodifiableRandomAccessList@2753}&amp;nbsp; size = 1&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;flushCacheRequired = false&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;useCache = true&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;resultOrdered = false&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;sqlCommandType = {SqlCommandType@2754} &quot;SELECT&quot;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;keyGenerator = {NoKeyGenerator@2755}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;keyProperties = null&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;keyColumns = null&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;hasNestedResultMaps = false&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;databaseId = null&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;statementLog = {Log4j2Impl@2756}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;lang = {XMLLanguageDriver@2757}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp; &amp;nbsp;resultSets = null&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&amp;nbsp;&quot;&lt;b&gt;updateBlog&lt;/b&gt;&quot; -&amp;gt; {MappedStatement@2719}&amp;nbsp;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#007FFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1700" y="1360" width="430" height="430" as="geometry" />
        </mxCell>
        <mxCell id="BK6uqOB74IsekC5S0Vyd-1" value="&lt;font color=&quot;#007fff&quot;&gt;CacheKey 格式，比如：&lt;br&gt;309835678:2208568545:cn.iocoder.springboot.lab12.mybatis.mapper.UserMapper.selectById:0:2147483647:[SQL语句]&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="2240" y="2346" width="660" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="NizMrroKywAOpVdq3Ygv" name="两级缓存">
    <mxGraphModel dx="1434" dy="842" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="fSpWBalldA7KaLDpEmEo-0" />
        <mxCell id="fSpWBalldA7KaLDpEmEo-1" parent="fSpWBalldA7KaLDpEmEo-0" />
        <mxCell id="W_EeLx_GVnp0SNuLf_t7-9" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#3399FF;strokeColor=#007FFF;" parent="fSpWBalldA7KaLDpEmEo-1" source="fSpWBalldA7KaLDpEmEo-2" target="W_EeLx_GVnp0SNuLf_t7-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fSpWBalldA7KaLDpEmEo-2" value="Client" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fontSize=9;fontColor=#3399FF;" parent="fSpWBalldA7KaLDpEmEo-1" vertex="1">
          <mxGeometry x="40" y="170" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fSpWBalldA7KaLDpEmEo-4" value="Mybatis" style="swimlane;fontSize=9;fontColor=#3399FF;startSize=20;" parent="fSpWBalldA7KaLDpEmEo-1" vertex="1">
          <mxGeometry x="120" y="120" width="400" height="310" as="geometry" />
        </mxCell>
        <mxCell id="W_EeLx_GVnp0SNuLf_t7-2" value="SqlSession" style="swimlane;fontSize=9;fontColor=#3399FF;startSize=15;" parent="fSpWBalldA7KaLDpEmEo-4" vertex="1">
          <mxGeometry x="50" y="30" width="300" height="130" as="geometry" />
        </mxCell>
        <mxCell id="W_EeLx_GVnp0SNuLf_t7-10" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=9;fontColor=#3399FF;strokeColor=#3399FF;" parent="W_EeLx_GVnp0SNuLf_t7-2" source="W_EeLx_GVnp0SNuLf_t7-3" target="W_EeLx_GVnp0SNuLf_t7-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W_EeLx_GVnp0SNuLf_t7-3" value="&lt;font color=&quot;#000000&quot;&gt;CachingExecutor&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#3399FF;" parent="W_EeLx_GVnp0SNuLf_t7-2" vertex="1">
          <mxGeometry x="20" y="30" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="W_EeLx_GVnp0SNuLf_t7-13" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=9;fontColor=#3399FF;strokeColor=#3399FF;" parent="W_EeLx_GVnp0SNuLf_t7-2" source="W_EeLx_GVnp0SNuLf_t7-7" target="W_EeLx_GVnp0SNuLf_t7-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W_EeLx_GVnp0SNuLf_t7-16" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;fontSize=9;fontColor=#3399FF;strokeColor=#3399FF;" parent="W_EeLx_GVnp0SNuLf_t7-2" source="W_EeLx_GVnp0SNuLf_t7-7" target="W_EeLx_GVnp0SNuLf_t7-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W_EeLx_GVnp0SNuLf_t7-7" value="&lt;font color=&quot;#000000&quot;&gt;Executor&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#3399FF;" parent="W_EeLx_GVnp0SNuLf_t7-2" vertex="1">
          <mxGeometry x="180" y="30" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="W_EeLx_GVnp0SNuLf_t7-17" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;fontSize=9;fontColor=#3399FF;strokeColor=#3399FF;" parent="W_EeLx_GVnp0SNuLf_t7-2" source="W_EeLx_GVnp0SNuLf_t7-8" target="W_EeLx_GVnp0SNuLf_t7-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W_EeLx_GVnp0SNuLf_t7-8" value="&lt;font color=&quot;#000000&quot;&gt;localCache&lt;/font&gt;&lt;br&gt;一级缓存/会话缓存" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#3399FF;" parent="W_EeLx_GVnp0SNuLf_t7-2" vertex="1">
          <mxGeometry x="180" y="90" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="uIJcqba1RXZshPAOB_N2-16" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.217;exitY=0.015;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;fontSize=9;fontColor=#000000;strokeColor=#007FFF;exitPerimeter=0;" parent="fSpWBalldA7KaLDpEmEo-4" source="W_EeLx_GVnp0SNuLf_t7-18" target="W_EeLx_GVnp0SNuLf_t7-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W_EeLx_GVnp0SNuLf_t7-18" value="Configuration -&gt; mappedStatements -&gt; MappedStatement -&gt; Cache" style="swimlane;fontSize=9;fontColor=#3399FF;startSize=15;fontStyle=0" parent="fSpWBalldA7KaLDpEmEo-4" vertex="1">
          <mxGeometry x="20" y="170" width="360" height="120" as="geometry" />
        </mxCell>
        <mxCell id="W_EeLx_GVnp0SNuLf_t7-20" value="&lt;font color=&quot;#000000&quot;&gt;Mapper namespace1&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#3399FF;verticalAlign=top;" parent="W_EeLx_GVnp0SNuLf_t7-18" vertex="1">
          <mxGeometry x="20" y="30" width="90" height="70" as="geometry" />
        </mxCell>
        <mxCell id="uIJcqba1RXZshPAOB_N2-0" value="&lt;font color=&quot;#000000&quot;&gt;Mapper namespace2&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#3399FF;verticalAlign=top;" parent="W_EeLx_GVnp0SNuLf_t7-18" vertex="1">
          <mxGeometry x="130" y="30" width="100" height="70" as="geometry" />
        </mxCell>
        <mxCell id="uIJcqba1RXZshPAOB_N2-13" value="&lt;span style=&quot;color: rgb(0 , 0 , 0)&quot;&gt;Mapper namespace3&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#3399FF;verticalAlign=top;" parent="W_EeLx_GVnp0SNuLf_t7-18" vertex="1">
          <mxGeometry x="250" y="30" width="90" height="70" as="geometry" />
        </mxCell>
        <mxCell id="REksHFYMmToKNzTnskRi-0" value="Cache" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#000000;" parent="W_EeLx_GVnp0SNuLf_t7-18" vertex="1">
          <mxGeometry x="27.5" y="60" width="75" height="30" as="geometry" />
        </mxCell>
        <mxCell id="REksHFYMmToKNzTnskRi-1" value="Cache" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#000000;" parent="W_EeLx_GVnp0SNuLf_t7-18" vertex="1">
          <mxGeometry x="142.5" y="60" width="75" height="30" as="geometry" />
        </mxCell>
        <mxCell id="REksHFYMmToKNzTnskRi-2" value="Cache" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#000000;" parent="W_EeLx_GVnp0SNuLf_t7-18" vertex="1">
          <mxGeometry x="257.5" y="60" width="75" height="30" as="geometry" />
        </mxCell>
        <mxCell id="uIJcqba1RXZshPAOB_N2-15" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#000000;strokeColor=#007FFF;entryX=0.369;entryY=0.002;entryDx=0;entryDy=0;entryPerimeter=0;" parent="fSpWBalldA7KaLDpEmEo-4" source="W_EeLx_GVnp0SNuLf_t7-3" target="W_EeLx_GVnp0SNuLf_t7-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W_EeLx_GVnp0SNuLf_t7-12" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0;exitDx=0;exitDy=52.5;exitPerimeter=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;fontSize=9;fontColor=#3399FF;strokeColor=#3399FF;" parent="fSpWBalldA7KaLDpEmEo-1" source="fSpWBalldA7KaLDpEmEo-5" target="W_EeLx_GVnp0SNuLf_t7-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fSpWBalldA7KaLDpEmEo-5" value="DB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fontSize=9;fontColor=#3399FF;" parent="fSpWBalldA7KaLDpEmEo-1" vertex="1">
          <mxGeometry x="560" y="157.5" width="60" height="85" as="geometry" />
        </mxCell>
        <mxCell id="W_EeLx_GVnp0SNuLf_t7-11" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=9;fontColor=#3399FF;strokeColor=#3399FF;" parent="fSpWBalldA7KaLDpEmEo-1" source="W_EeLx_GVnp0SNuLf_t7-7" target="fSpWBalldA7KaLDpEmEo-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="uIJcqba1RXZshPAOB_N2-14" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=9;fontColor=#000000;strokeColor=#007FFF;" parent="fSpWBalldA7KaLDpEmEo-1" source="W_EeLx_GVnp0SNuLf_t7-3" target="fSpWBalldA7KaLDpEmEo-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="REksHFYMmToKNzTnskRi-11" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.563;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#007FFF;exitPerimeter=0;" parent="fSpWBalldA7KaLDpEmEo-1" source="REksHFYMmToKNzTnskRi-4" target="uIJcqba1RXZshPAOB_N2-0" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="REksHFYMmToKNzTnskRi-14" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.845;exitY=0.012;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#007FFF;exitPerimeter=0;" parent="fSpWBalldA7KaLDpEmEo-1" source="REksHFYMmToKNzTnskRi-4" target="uIJcqba1RXZshPAOB_N2-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="REksHFYMmToKNzTnskRi-4" value="第三方缓存" style="swimlane;fontSize=9;fontColor=#007FFF;startSize=20;fontStyle=0" parent="fSpWBalldA7KaLDpEmEo-1" vertex="1">
          <mxGeometry x="120" y="450" width="400" height="120" as="geometry" />
        </mxCell>
        <mxCell id="REksHFYMmToKNzTnskRi-5" value="MemCached" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#000000;" parent="REksHFYMmToKNzTnskRi-4" vertex="1">
          <mxGeometry x="27" y="50" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="REksHFYMmToKNzTnskRi-6" value="OSCache" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#000000;" parent="REksHFYMmToKNzTnskRi-4" vertex="1">
          <mxGeometry x="117" y="50" width="72.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="REksHFYMmToKNzTnskRi-7" value="Redis" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#000000;" parent="REksHFYMmToKNzTnskRi-4" vertex="1">
          <mxGeometry x="207" y="50" width="72.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="REksHFYMmToKNzTnskRi-9" value="自定义" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fontColor=#000000;" parent="REksHFYMmToKNzTnskRi-4" vertex="1">
          <mxGeometry x="297" y="50" width="72.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="REksHFYMmToKNzTnskRi-8" value="缓存接口：&lt;b&gt;Cache&lt;/b&gt;&lt;br&gt;Mybatis内部提供了多种实现：LruCache\FifoCache\BlockingCache\&lt;br&gt;ScheduledCache\WeakCach\...&lt;br&gt;外部装饰&lt;b&gt;TransactionalCache&lt;/b&gt;，&lt;br&gt;由&lt;b&gt;TransactionalCacheManager&lt;/b&gt;管理，对外提供服务。&lt;br&gt;也可以自定义实现Cache接口。" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#007FFF;" parent="fSpWBalldA7KaLDpEmEo-1" vertex="1">
          <mxGeometry x="520" y="290" width="260" height="120" as="geometry" />
        </mxCell>
        <mxCell id="REksHFYMmToKNzTnskRi-10" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#007FFF;entryX=0.438;entryY=-0.004;entryDx=0;entryDy=0;entryPerimeter=0;" parent="fSpWBalldA7KaLDpEmEo-1" source="uIJcqba1RXZshPAOB_N2-0" target="REksHFYMmToKNzTnskRi-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="REksHFYMmToKNzTnskRi-13" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;fontSize=9;fontColor=#007FFF;strokeColor=#007FFF;" parent="fSpWBalldA7KaLDpEmEo-1" source="uIJcqba1RXZshPAOB_N2-13" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="413" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="_jvGcdypkImCxSo9b0yh" name="Mybatis-Spring数据源管理">
    <mxGraphModel dx="1434" dy="842" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="b21OgYg-HELzEwGqWFWW-0" />
        <mxCell id="b21OgYg-HELzEwGqWFWW-1" parent="b21OgYg-HELzEwGqWFWW-0" />
        <mxCell id="BKvJxalBKf770bxExyb1-0" value="&lt;h1&gt;Mybatis-Spring 数据源管理&lt;span style=&quot;font-weight: normal&quot;&gt;（mybatis-spring-boot-starter 2.0.1）&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;&lt;b&gt;前置知识&lt;/b&gt;：&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Spring自动配置、@Import 、条件注解（条件匹配逻辑）&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="40" y="40" width="720" height="120" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#0066CC;curved=1;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-1" target="BKvJxalBKf770bxExyb1-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-1" value="start" style="ellipse;whiteSpace=wrap;html=1;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="80" y="160" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-2" value="end" style="ellipse;whiteSpace=wrap;html=1;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="80" y="1920" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-75" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-4" target="BKvJxalBKf770bxExyb1-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-115" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-4" target="BKvJxalBKf770bxExyb1-114" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-4" value="MybatisAutoConfiguration" style="rounded=1;whiteSpace=wrap;html=1;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="40" y="260" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-6" value="&lt;font color=&quot;#0066cc&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;mybatis-spring-boot-starter 依赖 spring-boot-starter、spring-boot-starter-jdbc、mybatis-spring-boot-autoconfigure、mybatis、mybatis-spring&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;mybatis-spring-boot-autoconfigure 打包了Mybatis自动配置类&lt;/span&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;MybatisAutoConfiguration&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="170" y="160" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-12" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#0066CC;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-9" target="BKvJxalBKf770bxExyb1-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-13" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-9" target="BKvJxalBKf770bxExyb1-14" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="540" y="580" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-17" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-9" target="BKvJxalBKf770bxExyb1-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-26" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-9" target="BKvJxalBKf770bxExyb1-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-105" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-9" target="BKvJxalBKf770bxExyb1-104" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-9" value="&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;@Configuration&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;@ConditionalOnClass({SqlSessionFactory.class, SqlSessionFactoryBean.class})&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;@ConditionalOnSingleCandidate(DataSource.class)&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;@EnableConfigurationProperties({MybatisProperties.class})&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;@AutoConfigureAfter({&lt;b&gt;DataSourceAutoConfiguration&lt;/b&gt;.class})&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="240" y="450" width="280" height="80" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-11" value="&lt;div style=&quot;font-size: 10px&quot;&gt;SqlSessionFactory&lt;br&gt;SqlSessionFactoryBean&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;类文件路径classpath需要包含上述类才会加载此自动配置类&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="560" y="460" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-14" value="&lt;div style=&quot;font-size: 10px&quot;&gt;DataSource&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;上述类型Bean在Bean容器中有些仅有一个才会加载此自动配置类&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="560" y="540" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-16" value="&lt;div style=&quot;font-size: 10px&quot;&gt;MybatisProperties&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;application.properties中配置的Mybatis配置属性&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="560" y="600" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-19" value="&lt;div style=&quot;font-size: 10px&quot;&gt;MybatisProperties&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;application.properties中配置的Mybatis配置属性&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="560" y="600" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-73" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-20" target="BKvJxalBKf770bxExyb1-60" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-103" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-20" target="BKvJxalBKf770bxExyb1-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-20" value="&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;MybatisAutoConfiguration&lt;br&gt;&lt;/span&gt;内部Bean实例化&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="240" y="260" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-72" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-23" target="BKvJxalBKf770bxExyb1-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="740" y="680" />
              <mxPoint x="740" y="920" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-77" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-23" target="BKvJxalBKf770bxExyb1-76" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-23" value="&lt;div style=&quot;font-size: 10px&quot;&gt;DataSourceAutoConfiguration&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;之后自动配置&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="560" y="660" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-24" value="SqlSessionFactory 是mybatis核心包的类，SqlSessionFactoryBean 是 mybatis-spring包中的类，pom.xml已经引入这两个包，条件满足" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="720" y="460" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-25" value="DataSource是JDK中定义的接口&lt;br&gt;此测试项目中配置了spring.datasource配置&lt;br&gt;被解析成DataSourceProperties对象，位于spring-boot-autoconfigure包" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="720" y="540" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-30" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-27" target="BKvJxalBKf770bxExyb1-29" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1060" y="915" />
              <mxPoint x="1060" y="1360" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-33" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=11;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-27" target="BKvJxalBKf770bxExyb1-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-27" value="&lt;div style=&quot;font-size: 9px&quot;&gt;&lt;div&gt;@Configuration&lt;/div&gt;&lt;div&gt;@ConditionalOnClass({ DataSource.class, EmbeddedDatabaseType.class })&lt;/div&gt;&lt;div&gt;@EnableConfigurationProperties(DataSourceProperties.class)&lt;/div&gt;&lt;div&gt;@Import({ &lt;b&gt;DataSourcePoolMetadataProvidersConfiguration&lt;/b&gt;.class, &lt;b&gt;DataSourceInitializationConfiguration&lt;/b&gt;.class })&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="760" y="880" width="280" height="70" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-35" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=11;fontColor=#007FFF;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-29" target="BKvJxalBKf770bxExyb1-36" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1360" y="1360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-29" value="&lt;font style=&quot;font-size: 11px&quot;&gt;DataSourcePoolMetadataProvidersConfiguration&lt;font color=&quot;#0066cc&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/font&gt;&lt;font color=&quot;#0066cc&quot; style=&quot;font-size: 10px&quot;&gt;返回&lt;b&gt;DataSourcePoolMetadataProvider&lt;/b&gt; Bean实例&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1080" y="1337.5" width="240" height="45" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-45" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#0066CC;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-31" target="BKvJxalBKf770bxExyb1-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-31" value="&lt;font style=&quot;font-size: 12px&quot;&gt;&lt;b&gt;DataSourceInitializationConfiguration&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#0066cc&quot; style=&quot;font-size: 10px&quot;&gt;从名称上知道是实例化DataSource Bean实例的&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1080" y="880" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-39" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=9;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-36" target="BKvJxalBKf770bxExyb1-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-42" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;fontColor=#000000;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-36" target="BKvJxalBKf770bxExyb1-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-43" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#000000;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-36" target="BKvJxalBKf770bxExyb1-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-36" value="&lt;font color=&quot;#000000&quot;&gt;@ConditionalOnClass&lt;/font&gt;&lt;br&gt;&lt;font style=&quot;font-size: 9px&quot;&gt;根据引入依赖&lt;br&gt;选择不同的连接池&lt;/font&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fontColor=#007FFF;rounded=1;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1360" y="1320" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-38" value="&lt;font color=&quot;#000000&quot; style=&quot;font-size: 10px&quot;&gt;org.apache.tomcat.jdbc.pool.DataSource.class&lt;br&gt;-&amp;gt; TomcatDataSourcePoolMetadata&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=11;fontColor=#007FFF;rounded=1;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1520" y="1280" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-100" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-40" target="BKvJxalBKf770bxExyb1-99" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-40" value="&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;font color=&quot;#000000&quot;&gt;com.zaxxer.hikari.HikariDataSource.class&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#000000&quot;&gt;-&amp;gt; &lt;b&gt;HikariDataSourcePoolMetadata&lt;/b&gt;&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#0066cc&quot;&gt;查看依赖列表可以发现实际默认引入的是这个&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=11;fontColor=#007FFF;rounded=1;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1520" y="1340" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-41" value="&lt;font color=&quot;#000000&quot; style=&quot;font-size: 10px&quot;&gt;org.apache.commons.dbcp2.BasicDataSource.class&lt;br&gt;-&amp;gt; CommonsDbcp2DataSourcePoolMetadata&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=11;fontColor=#007FFF;rounded=1;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1520" y="1410" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-47" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#0066CC;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-44" target="BKvJxalBKf770bxExyb1-46" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1660" y="905" />
              <mxPoint x="1660" y="1135" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-49" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#0066CC;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-44" target="BKvJxalBKf770bxExyb1-48" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-44" value="&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;@Configuration&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;@Import({ &lt;b&gt;DataSourceInitializerInvoker&lt;/b&gt;.class, &lt;b&gt;DataSourceInitializationConfiguration&lt;/b&gt;.&lt;b&gt;Registrar&lt;/b&gt;.class })&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1360" y="880" width="280" height="50" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-51" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#0066CC;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-46" target="BKvJxalBKf770bxExyb1-50" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1980" y="1135" />
              <mxPoint x="1980" y="1250" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-92" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-46" target="BKvJxalBKf770bxExyb1-89" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-46" value="&lt;font style=&quot;font-size: 12px&quot;&gt;DataSourceInitializerInvoker&lt;br&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#0066cc&quot;&gt;最后一层了，真正开始干活的类，&lt;br&gt;监听&lt;/font&gt;&lt;font color=&quot;#0066cc&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;DataSourceSchemaCreatedEvent 事件、&lt;br&gt;还实现了InitializingBean&lt;/span&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1680" y="1105" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-71" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-48" target="BKvJxalBKf770bxExyb1-70" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-48" value="&lt;div&gt;&lt;span style=&quot;font-size: 11px ; text-align: left&quot;&gt;DataSourceInitializationConfiguration&lt;/span&gt;&lt;span style=&quot;font-size: 11px ; text-align: left&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;font-size: 11px ; text-align: left&quot;&gt;Registrar&lt;br&gt;&lt;/span&gt;&lt;font style=&quot;font-size: 10px&quot; color=&quot;#0066cc&quot;&gt;实现了ImportBeanDefinitionRegistrar接口&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1680" y="880" width="280" height="50" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-50" value="onApplicationEvent(&lt;br&gt;DataSourceSchemaCreatedEvent event)&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;没用到，略&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="2000" y="1220" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-59" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;dashed=1;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-53" target="BKvJxalBKf770bxExyb1-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-69" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-53" target="BKvJxalBKf770bxExyb1-68" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-53" value="4 afterPropertiesSet()" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="2000" y="1155" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-56" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#0066CC;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-54" target="BKvJxalBKf770bxExyb1-55" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-58" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=10;fontColor=#0066CC;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-54" target="BKvJxalBKf770bxExyb1-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-54" value="DataSourceSchemaCreatedEvent 事件&lt;br&gt;的两个发布者&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;数据库已创建事件，没用到，略&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="2000" y="990" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-55" value="DataSourceInitializedPublisher&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;？？？ 暂不清楚这个是做什么的，&lt;br&gt;打个断点如果不走这里就先略&lt;br&gt;&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="2280" y="990" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-57" value="DataSourceInitializerInvoker&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;完成初始化后afterPropertiesSet()中发布&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="2280" y="1090" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-64" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-60" target="BKvJxalBKf770bxExyb1-63" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-60" value="&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;@Import({MybatisAutoConfiguration.&lt;br&gt;&lt;b&gt;AutoConfiguredMapperScannerRegistrar&lt;/b&gt;.class})&lt;br&gt;&lt;/font&gt;@ConditionalOnMissingBean({MapperFactoryBean.class})&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="440" y="260" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-74" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-63" target="BKvJxalBKf770bxExyb1-66" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-63" value="&lt;div style=&quot;font-size: 10px&quot;&gt;1 实例化&lt;b&gt;AutoConfiguredMapperScannerRegistrar&lt;/b&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="760" y="260" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-66" value="&lt;div style=&quot;font-size: 10px&quot;&gt;registerBeanDefinitions()&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="760" y="320" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-94" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-68" target="BKvJxalBKf770bxExyb1-93" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-98" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-68" target="BKvJxalBKf770bxExyb1-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-68" value="getDataSourceInitializer()" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="2280" y="1155" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-70" value="&lt;div style=&quot;text-align: left&quot;&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;3 注册&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;&lt;b&gt;DataSourceInitializerPostProcessor&lt;/b&gt; bean定义&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="2000" y="880" width="280" height="50" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-79" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-76" target="BKvJxalBKf770bxExyb1-78" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-76" value="&lt;div&gt;&lt;div&gt;&lt;font size=&quot;1&quot;&gt;@Configuration&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;1&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;@Conditional(&lt;b&gt;PooledDataSourceCondition&lt;/b&gt;.class)&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;1&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;@ConditionalOnMissingBean({ DataSource.class, XADataSource.class })&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;1&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;@Import({ &lt;b&gt;DataSourceConfiguration.Hikari&lt;/b&gt;.class, DataSourceConfiguration.Tomcat.class,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;1&quot;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;/span&gt;DataSourceConfiguration.Dbcp2.class, DataSourceConfiguration.Generic.class,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;1&quot;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;/span&gt;DataSourceJmxConfiguration.class })&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font size=&quot;1&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;protected static class PooledDataSourceConfiguration {}&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="760" y="630" width="420" height="100" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-83" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-78" target="BKvJxalBKf770bxExyb1-81" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-78" value="&amp;nbsp;条件匹配&lt;br&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 10px&quot;&gt;这个代码有些复杂 TODO&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1220" y="630" width="160" height="42.5" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-86" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-81" target="BKvJxalBKf770bxExyb1-85" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-81" value="&amp;nbsp;2 根据上一步解析的数据源信息实例化对应的数据源" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1220" y="700" width="160" height="42.5" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-88" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#000000;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-85" target="BKvJxalBKf770bxExyb1-87" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-85" value="&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&#x9;@Configuration&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;@ConditionalOnClass(HikariDataSource.class)&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;@ConditionalOnMissingBean(DataSource.class)&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&lt;/span&gt;@ConditionalOnProperty(name = &quot;spring.datasource.type&quot;, havingValue = &quot;com.zaxxer.hikari.HikariDataSource&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&lt;span&gt;&#x9;&#x9;&#x9;&lt;/span&gt;matchIfMissing = true)&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 10px&quot;&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;&#x9;static class Hikari {}&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1420" y="681.25" width="280" height="78.75" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-87" value="&lt;div&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;HikariDataSource dataSource = &lt;b&gt;createDataSource&lt;/b&gt;(&lt;br&gt;properties, HikariDataSource.class);&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1740" y="702.1899999999999" width="240" height="38.12" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-90" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-89" target="BKvJxalBKf770bxExyb1-53" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-89" value="DataSourceInitializerInvoker#&amp;lt;init&amp;gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="2000" y="1090" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-96" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-93" target="BKvJxalBKf770bxExyb1-95" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-93" value="DataSource ds = this.dataSource.getIfUnique();" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="2560" y="1155" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-95" value="this.dataSourceInitializer = new DataSourceInitializer(ds, this.properties, this.applicationContext)" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="2560" y="1225" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-97" value="boolean schemaCreated = this.dataSourceInitializer.createSchema()&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;创建数据库，这里不需要自动创建&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="2280" y="1225" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-102" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-99" target="BKvJxalBKf770bxExyb1-101" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-99" value="&lt;font&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;HikariDataSource hikariDataSource = DataSourceUnwrapper.unwrap(dataSource, HikariDataSource.class)&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=11;fontColor=#007FFF;rounded=1;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1800" y="1340" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-101" value="&lt;font&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;new HikariDataSourcePoolMetadata(hikariDataSource)&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;fontSize=11;fontColor=#007FFF;rounded=1;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="1800" y="1400" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-107" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-104" target="BKvJxalBKf770bxExyb1-106" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-111" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-104" target="BKvJxalBKf770bxExyb1-110" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-104" value="&lt;div&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;MybatisAutoConfiguration#&amp;lt;init&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="240" y="1480" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-109" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=10;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-106" target="BKvJxalBKf770bxExyb1-108" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-106" value="&lt;div&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;afterPropertiesSet()&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="460" y="1480" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-108" value="&lt;span style=&quot;font-size: 10px&quot;&gt;checkConfigFileExists()&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="680" y="1480" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-113" value="" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=8;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-110" target="BKvJxalBKf770bxExyb1-112" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-110" value="&lt;div&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;&amp;nbsp;sqlSessionFactory(DataSource dataSource)&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="240" y="1600" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-112" value="&lt;div&gt;&lt;span style=&quot;font-size: 10px&quot;&gt;sqlSessionTemplate(SqlSessionFactory sqlSessionFactory)&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=center;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="240" y="1720" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-116" style="edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontSize=8;fontColor=#007FFF;" parent="b21OgYg-HELzEwGqWFWW-1" source="BKvJxalBKf770bxExyb1-114" target="BKvJxalBKf770bxExyb1-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="BKvJxalBKf770bxExyb1-114" value="blogMapper.selectBlog(1)" style="rounded=1;whiteSpace=wrap;html=1;" parent="b21OgYg-HELzEwGqWFWW-1" vertex="1">
          <mxGeometry x="40" y="1840" width="160" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
